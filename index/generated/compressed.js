// Automatically generated file.  Do not edit!
var g,aa=typeof Object.create=="function"?Object.create:function(a){function b(){}b.prototype=a;return new b},ba=typeof Object.defineProperties=="function"?Object.defineProperty:function(a,b,c){if(a==Array.prototype||a==Object.prototype)return a;a[b]=c.value;return a};
function ca(a){a=["object"==typeof globalThis&&globalThis,a,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var b=0;b<a.length;++b){var c=a[b];if(c&&c.Math==Math)return c}throw Error("Cannot find global object");}var r=ca(this);function u(a,b){if(b)a:{var c=r;a=a.split(".");for(var d=0;d<a.length-1;d++){var e=a[d];if(!(e in c))break a;c=c[e]}a=a[a.length-1];d=c[a];b=b(d);b!=d&&b!=null&&ba(c,a,{configurable:!0,writable:!0,value:b})}}var da;
if(typeof Object.setPrototypeOf=="function")da=Object.setPrototypeOf;else{var ea;a:{var fa={a:!0},ha={};try{ha.__proto__=fa;ea=ha.a;break a}catch(a){}ea=!1}da=ea?function(a,b){a.__proto__=b;if(a.__proto__!==b)throw new TypeError(a+" is not extensible");return a}:null}var ia=da;
function ja(a,b){a.prototype=aa(b.prototype);a.prototype.constructor=a;if(ia)ia(a,b);else for(var c in b)if(c!="prototype")if(Object.defineProperties){var d=Object.getOwnPropertyDescriptor(b,c);d&&Object.defineProperty(a,c,d)}else a[c]=b[c];a.i=b.prototype}function ka(a){var b=0;return function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}}}
function v(a){var b=typeof Symbol!="undefined"&&Symbol.iterator&&a[Symbol.iterator];if(b)return b.call(a);if(typeof a.length=="number")return{next:ka(a)};throw Error(String(a)+" is not an iterable or ArrayLike");}function la(a){if(!(a instanceof Array)){a=v(a);for(var b,c=[];!(b=a.next()).done;)c.push(b.value);a=c}return a}function ma(a,b){return Object.prototype.hasOwnProperty.call(a,b)}
var na=typeof Object.assign=="function"?Object.assign:function(a,b){for(var c=1;c<arguments.length;c++){var d=arguments[c];if(d)for(var e in d)ma(d,e)&&(a[e]=d[e])}return a};u("Object.assign",function(a){return a||na});function oa(){this.sh=!1;this.le=null;this.kq=void 0;this.wc=1;this.vo=this.gr=0;this.Ig=null}function pa(a){if(a.sh)throw new TypeError("Generator is already running");a.sh=!0}oa.prototype.Ch=function(a){this.kq=a};
oa.prototype.ai=function(a){this.Ig={Br:a,ds:!0};this.wc=this.gr||this.vo};oa.prototype.return=function(a){this.Ig={return:a};this.wc=this.vo};function qa(a){this.ba=new oa;this.Es=a}qa.prototype.Ch=function(a){pa(this.ba);if(this.ba.le)return ra(this,this.ba.le.next,a,this.ba.Ch);this.ba.Ch(a);return sa(this)};function ta(a,b){pa(a.ba);var c=a.ba.le;if(c)return ra(a,"return"in c?c["return"]:function(d){return{value:d,done:!0}},b,a.ba.return);a.ba.return(b);return sa(a)}
qa.prototype.ai=function(a){pa(this.ba);if(this.ba.le)return ra(this,this.ba.le["throw"],a,this.ba.Ch);this.ba.ai(a);return sa(this)};function ra(a,b,c,d){try{var e=b.call(a.ba.le,c);if(!(e instanceof Object))throw new TypeError("Iterator result "+e+" is not an object");if(!e.done)return a.ba.sh=!1,e;var f=e.value}catch(h){return a.ba.le=null,a.ba.ai(h),sa(a)}a.ba.le=null;d.call(a.ba,f);return sa(a)}
function sa(a){for(;a.ba.wc;)try{var b=a.Es(a.ba);if(b)return a.ba.sh=!1,{value:b.value,done:!1}}catch(c){a.ba.kq=void 0,a.ba.ai(c)}a.ba.sh=!1;if(a.ba.Ig){b=a.ba.Ig;a.ba.Ig=null;if(b.ds)throw b.Br;return{value:b.return,done:!0}}return{value:void 0,done:!0}}function ua(a){this.next=function(b){return a.Ch(b)};this.throw=function(b){return a.ai(b)};this.return=function(b){return ta(a,b)};this[Symbol.iterator]=function(){return this}}
function va(a){function b(d){return a.next(d)}function c(d){return a.throw(d)}return new Promise(function(d,e){function f(h){h.done?d(h.value):Promise.resolve(h.value).then(b,c).then(f,e)}f(a.next())})}function wa(){for(var a=Number(this),b=[],c=a;c<arguments.length;c++)b[c-a]=arguments[c];return b}
u("Symbol",function(a){function b(f){if(this instanceof b)throw new TypeError("Symbol is not a constructor");return new c(d+(f||"")+"_"+e++,f)}function c(f,h){this.mq=f;ba(this,"description",{configurable:!0,writable:!0,value:h})}if(a)return a;c.prototype.toString=function(){return this.mq};var d="jscomp_symbol_"+(Math.random()*1E9>>>0)+"_",e=0;return b});
u("Symbol.iterator",function(a){if(a)return a;a=Symbol("Symbol.iterator");for(var b="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),c=0;c<b.length;c++){var d=r[b[c]];typeof d==="function"&&typeof d.prototype[a]!="function"&&ba(d.prototype,a,{configurable:!0,writable:!0,value:function(){return xa(ka(this))}})}return a});function xa(a){a={next:a};a[Symbol.iterator]=function(){return this};return a}
u("Promise",function(a){function b(h){this.mg=0;this.Oh=void 0;this.cg=[];this.Wo=!1;var k=this.Ok();try{h(k.resolve,k.reject)}catch(l){k.reject(l)}}function c(){this.Bd=null}function d(h){return h instanceof b?h:new b(function(k){k(h)})}if(a)return a;c.prototype.Qn=function(h){if(this.Bd==null){this.Bd=[];var k=this;this.Rn(function(){k.Cr()})}this.Bd.push(h)};var e=r.setTimeout;c.prototype.Rn=function(h){e(h,0)};c.prototype.Cr=function(){for(;this.Bd&&this.Bd.length;){var h=this.Bd;this.Bd=[];for(var k=
0;k<h.length;++k){var l=h[k];h[k]=null;try{l()}catch(m){this.cr(m)}}}this.Bd=null};c.prototype.cr=function(h){this.Rn(function(){throw h;})};b.prototype.Ok=function(){function h(m){return function(q){l||(l=!0,m.call(k,q))}}var k=this,l=!1;return{resolve:h(this.Js),reject:h(this.Dm)}};b.prototype.Js=function(h){if(h===this)this.Dm(new TypeError("A Promise cannot resolve to itself"));else if(h instanceof b)this.Ps(h);else{a:switch(typeof h){case "object":var k=h!=null;break a;case "function":k=!0;break a;
default:k=!1}k?this.Is(h):this.zo(h)}};b.prototype.Is=function(h){var k=void 0;try{k=h.then}catch(l){this.Dm(l);return}typeof k=="function"?this.Qs(k,h):this.zo(h)};b.prototype.Dm=function(h){this.Op(2,h)};b.prototype.zo=function(h){this.Op(1,h)};b.prototype.Op=function(h,k){if(this.mg!=0)throw Error("Cannot settle("+h+", "+k+"): Promise already settled in state"+this.mg);this.mg=h;this.Oh=k;this.mg===2&&this.Ms();this.Dr()};b.prototype.Ms=function(){var h=this;e(function(){if(h.ts()){var k=r.console;
typeof k!=="undefined"&&k.error(h.Oh)}},1)};b.prototype.ts=function(){if(this.Wo)return!1;var h=r.CustomEvent,k=r.Event,l=r.dispatchEvent;if(typeof l==="undefined")return!0;typeof h==="function"?h=new h("unhandledrejection",{cancelable:!0}):typeof k==="function"?h=new k("unhandledrejection",{cancelable:!0}):(h=r.document.createEvent("CustomEvent"),h.initCustomEvent("unhandledrejection",!1,!0,h));h.promise=this;h.reason=this.Oh;return l(h)};b.prototype.Dr=function(){if(this.cg!=null){for(var h=0;h<
this.cg.length;++h)f.Qn(this.cg[h]);this.cg=null}};var f=new c;b.prototype.Ps=function(h){var k=this.Ok();h.Pi(k.resolve,k.reject)};b.prototype.Qs=function(h,k){var l=this.Ok();try{h.call(k,l.resolve,l.reject)}catch(m){l.reject(m)}};b.prototype.then=function(h,k){function l(p,t){return typeof p=="function"?function(A){try{m(p(A))}catch(y){q(y)}}:t}var m,q,n=new b(function(p,t){m=p;q=t});this.Pi(l(h,m),l(k,q));return n};b.prototype.catch=function(h){return this.then(void 0,h)};b.prototype.Pi=function(h,
k){function l(){switch(m.mg){case 1:h(m.Oh);break;case 2:k(m.Oh);break;default:throw Error("Unexpected state: "+m.mg);}}var m=this;this.cg==null?f.Qn(l):this.cg.push(l);this.Wo=!0};b.resolve=d;b.reject=function(h){return new b(function(k,l){l(h)})};b.race=function(h){return new b(function(k,l){for(var m=v(h),q=m.next();!q.done;q=m.next())d(q.value).Pi(k,l)})};b.all=function(h){var k=v(h),l=k.next();return l.done?d([]):new b(function(m,q){function n(A){return function(y){p[A]=y;t--;t==0&&m(p)}}var p=
[],t=0;do p.push(void 0),t++,d(l.value).Pi(n(p.length-1),q),l=k.next();while(!l.done)})};return b});function ya(a,b){a instanceof String&&(a+="");var c=0,d=!1,e={next:function(){if(!d&&c<a.length){var f=c++;return{value:b(f,a[f]),done:!1}}d=!0;return{done:!0,value:void 0}}};e[Symbol.iterator]=function(){return e};return e}u("Array.prototype.keys",function(a){return a?a:function(){return ya(this,function(b){return b})}});
u("Array.prototype.values",function(a){return a?a:function(){return ya(this,function(b,c){return c})}});u("Object.is",function(a){return a?a:function(b,c){return b===c?b!==0||1/b===1/c:b!==b&&c!==c}});u("Array.prototype.includes",function(a){return a?a:function(b,c){var d=this;d instanceof String&&(d=String(d));var e=d.length;c=c||0;for(c<0&&(c=Math.max(c+e,0));c<e;c++){var f=d[c];if(f===b||Object.is(f,b))return!0}return!1}});
u("String.prototype.includes",function(a){return a?a:function(b,c){if(this==null)throw new TypeError("The 'this' value for String.prototype.includes must not be null or undefined");if(b instanceof RegExp)throw new TypeError("First argument to String.prototype.includes must not be a regular expression");return(this+"").indexOf(b,c||0)!==-1}});
u("WeakMap",function(a){function b(l){this.Ge=(k+=Math.random()+1).toString();if(l){l=v(l);for(var m;!(m=l.next()).done;)m=m.value,this.set(m[0],m[1])}}function c(){}function d(l){var m=typeof l;return m==="object"&&l!==null||m==="function"}function e(l){if(!ma(l,h)){var m=new c;ba(l,h,{value:m})}}function f(l){var m=Object[l];m&&(Object[l]=function(q){if(q instanceof c)return q;Object.isExtensible(q)&&e(q);return m(q)})}if(function(){if(!a||!Object.seal)return!1;try{var l=Object.seal({}),m=Object.seal({}),
q=new a([[l,2],[m,3]]);if(q.get(l)!=2||q.get(m)!=3)return!1;q.delete(l);q.set(m,4);return!q.has(l)&&q.get(m)==4}catch(n){return!1}}())return a;var h="$jscomp_hidden_"+Math.random();f("freeze");f("preventExtensions");f("seal");var k=0;b.prototype.set=function(l,m){if(!d(l))throw Error("Invalid WeakMap key");e(l);if(!ma(l,h))throw Error("WeakMap key fail: "+l);l[h][this.Ge]=m;return this};b.prototype.get=function(l){return d(l)&&ma(l,h)?l[h][this.Ge]:void 0};b.prototype.has=function(l){return d(l)&&
ma(l,h)&&ma(l[h],this.Ge)};b.prototype.delete=function(l){return d(l)&&ma(l,h)&&ma(l[h],this.Ge)?delete l[h][this.Ge]:!1};return b});
u("Map",function(a){function b(){var k={};return k.pd=k.next=k.head=k}function c(k,l){var m=k[1];return xa(function(){if(m){for(;m.head!=k[1];)m=m.pd;for(;m.next!=m.head;)return m=m.next,{done:!1,value:l(m)};m=null}return{done:!0,value:void 0}})}function d(k,l){var m=l&&typeof l;m=="object"||m=="function"?f.has(l)?m=f.get(l):(m=""+ ++h,f.set(l,m)):m="p_"+l;var q=k[0][m];if(q&&ma(k[0],m))for(k=0;k<q.length;k++){var n=q[k];if(l!==l&&n.key!==n.key||l===n.key)return{id:m,list:q,index:k,pb:n}}return{id:m,
list:q,index:-1,pb:void 0}}function e(k){this[0]={};this[1]=b();this.size=0;if(k){k=v(k);for(var l;!(l=k.next()).done;)l=l.value,this.set(l[0],l[1])}}if(function(){if(!a||typeof a!="function"||!a.prototype.entries||typeof Object.seal!="function")return!1;try{var k=Object.seal({x:4}),l=new a(v([[k,"s"]]));if(l.get(k)!="s"||l.size!=1||l.get({x:4})||l.set({x:4},"t")!=l||l.size!=2)return!1;var m=l.entries(),q=m.next();if(q.done||q.value[0]!=k||q.value[1]!="s")return!1;q=m.next();return q.done||q.value[0].x!=
4||q.value[1]!="t"||!m.next().done?!1:!0}catch(n){return!1}}())return a;var f=new WeakMap;e.prototype.set=function(k,l){k=k===0?0:k;var m=d(this,k);m.list||(m.list=this[0][m.id]=[]);m.pb?m.pb.value=l:(m.pb={next:this[1],pd:this[1].pd,head:this[1],key:k,value:l},m.list.push(m.pb),this[1].pd.next=m.pb,this[1].pd=m.pb,this.size++);return this};e.prototype.delete=function(k){k=d(this,k);return k.pb&&k.list?(k.list.splice(k.index,1),k.list.length||delete this[0][k.id],k.pb.pd.next=k.pb.next,k.pb.next.pd=
k.pb.pd,k.pb.head=null,this.size--,!0):!1};e.prototype.clear=function(){this[0]={};this[1]=this[1].pd=b();this.size=0};e.prototype.has=function(k){return!!d(this,k).pb};e.prototype.get=function(k){return(k=d(this,k).pb)&&k.value};e.prototype.entries=function(){return c(this,function(k){return[k.key,k.value]})};e.prototype.keys=function(){return c(this,function(k){return k.key})};e.prototype.values=function(){return c(this,function(k){return k.value})};e.prototype.forEach=function(k,l){for(var m=this.entries(),
q;!(q=m.next()).done;)q=q.value,k.call(l,q[1],q[0],this)};e.prototype[Symbol.iterator]=e.prototype.entries;var h=0;return e});u("Math.sign",function(a){return a?a:function(b){b=Number(b);return b===0||isNaN(b)?b:b>0?1:-1}});
u("Set",function(a){function b(c){this.Qc=new Map;if(c){c=v(c);for(var d;!(d=c.next()).done;)this.add(d.value)}this.size=this.Qc.size}if(function(){if(!a||typeof a!="function"||!a.prototype.entries||typeof Object.seal!="function")return!1;try{var c=Object.seal({x:4}),d=new a(v([c]));if(!d.has(c)||d.size!=1||d.add(c)!=d||d.size!=1||d.add({x:4})!=d||d.size!=2)return!1;var e=d.entries(),f=e.next();if(f.done||f.value[0]!=c||f.value[1]!=c)return!1;f=e.next();return f.done||f.value[0]==c||f.value[0].x!=
4||f.value[1]!=f.value[0]?!1:e.next().done}catch(h){return!1}}())return a;b.prototype.add=function(c){c=c===0?0:c;this.Qc.set(c,c);this.size=this.Qc.size;return this};b.prototype.delete=function(c){c=this.Qc.delete(c);this.size=this.Qc.size;return c};b.prototype.clear=function(){this.Qc.clear();this.size=0};b.prototype.has=function(c){return this.Qc.has(c)};b.prototype.entries=function(){return this.Qc.entries()};b.prototype.values=function(){return this.Qc.values()};b.prototype.keys=b.prototype.values;
b.prototype[Symbol.iterator]=b.prototype.values;b.prototype.forEach=function(c,d){var e=this;this.Qc.forEach(function(f){return c.call(d,f,f,e)})};return b});u("Array.prototype.fill",function(a){return a?a:function(b,c,d){var e=this.length||0;c<0&&(c=Math.max(0,e+c));if(d==null||d>e)d=e;d=Number(d);d<0&&(d=Math.max(0,e+d));for(c=Number(c||0);c<d;c++)this[c]=b;return this}});function za(a){return a?a:Array.prototype.fill}u("Int8Array.prototype.fill",za);u("Uint8Array.prototype.fill",za);
u("Uint8ClampedArray.prototype.fill",za);u("Int16Array.prototype.fill",za);u("Uint16Array.prototype.fill",za);u("Int32Array.prototype.fill",za);u("Uint32Array.prototype.fill",za);u("Float32Array.prototype.fill",za);u("Float64Array.prototype.fill",za);u("Object.values",function(a){return a?a:function(b){var c=[],d;for(d in b)ma(b,d)&&c.push(b[d]);return c}});
var Aa={},Ba;
var Ca=[,2,1,4,3];
var Da=function(){return typeof self==="object"?self:typeof window==="object"?window:typeof global==="object"?global:this}();
var w={};Da.Blockly||(Da.Blockly={});Da.Blockly.Msg||(Da.Blockly.Msg=w);function Ea(a){a=String(a).toLowerCase().trim();var b=Fa[a];if(b)return b;b=a.substring(0,2)=="0x"?"#"+a.substring(2):a;b=b[0]=="#"?b:"#"+b;if(/^#[0-9a-f]{6}$/.test(b))return b;if(/^#[0-9a-f]{3}$/.test(b))return["#",b[1],b[1],b[2],b[2],b[3],b[3]].join("");var c=a.match(/^(?:rgb)?\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)$/);return c&&(a=Number(c[1]),b=Number(c[2]),c=Number(c[3]),a>=0&&a<256&&b>=0&&b<256&&c>=0&&c<256)?Ga(a,b,c):null}
function Ga(a,b,c){b=a<<16|b<<8|c;return a<16?"#"+(16777216|b).toString(16).substr(1):"#"+b.toString(16)}function Ha(a){a=Ea(a);if(!a)return[0,0,0];a=parseInt(a.substr(1),16);return[a>>16,a>>8&255,a&255]}function Ia(a,b,c){a=Ea(a);if(!a)return null;b=Ea(b);if(!b)return null;a=Ha(a);b=Ha(b);return Ga(Math.round(b[0]+c*(a[0]-b[0])),Math.round(b[1]+c*(a[1]-b[1])),Math.round(b[2]+c*(a[2]-b[2])))}
var Fa={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00"};function x(a,b){this.x=a;this.y=b}function Ja(a,b){return a==b?!0:a&&b?a.x==b.x&&a.y==b.y:!1}function Ka(a,b){var c=a.x-b.x;a=a.y-b.y;return Math.sqrt(c*c+a*a)}function La(a,b){return new x(a.x-b.x,a.y-b.y)}function Ma(a,b){return new x(a.x+b.x,a.y+b.y)}x.prototype.clone=function(){return new x(this.x,this.y)};x.prototype.scale=function(a){this.x*=a;this.y*=a;return this};x.prototype.translate=function(a,b){this.x+=a;this.y+=b;return this};function Na(a,b,c,d){this.top=a;this.bottom=b;this.left=c;this.right=d}Na.prototype.contains=function(a,b){return a>=this.left&&a<=this.right&&b>=this.top&&b<=this.bottom};function Oa(a){return a.length?a.reduce(function(b,c){return b.length<c.length?b:c}).length:0}function Pa(a,b){if(!a.length)return 0;if(a.length==1)return a[0].length;var c=0;b=b||Oa(a);for(var d=0;d<b;d++){for(var e=a[0][d],f=1;f<a.length;f++)if(e!=a[f][d])return c;e==" "&&(c=d+1)}for(f=1;f<a.length;f++)if((e=a[f][d])&&e!=" ")return c;return b}
function Qa(a,b){if(!a.length)return 0;if(a.length==1)return a[0].length;var c=0;b=b||Oa(a);for(var d=0;d<b;d++){for(var e=a[0].substr(-d-1,1),f=1;f<a.length;f++)if(e!=a[f].substr(-d-1,1))return c;e==" "&&(c=d+1)}for(f=1;f<a.length;f++)if((e=a[f].charAt(a[f].length-d-1))&&e!=" ")return c;return b}
function Ra(a,b){a=a.split("\n");for(var c=0;c<a.length;c++){var d=c;var e=a[c],f=b;if(e.length<=f)var h=e;else{for(var k=e.trim().split(/\s+/),l=0;l<k.length;l++)k[l].length>f&&(f=k[l].length);l=-Infinity;var m=1;do{var q=l;h=e;e=[];var n=k.length/m,p=1;for(l=0;l<k.length-1;l++)p<(l+1.5)/n?(p++,e[l]=!0):e[l]=!1;e=Sa(k,e,f);l=Ta(k,e,f);n=k;p=[];for(var t=0;t<n.length;t++)p.push(n[t]),e[t]!==void 0&&p.push(e[t]?"\n":" ");e=p.join("");m++}while(l>q)}a[d]=h}return a.join("\n")}
function Ta(a,b,c){for(var d=[0],e=[],f=0;f<a.length;f++)d[d.length-1]+=a[f].length,b[f]===!0?(d.push(0),e.push(a[f].charAt(a[f].length-1))):b[f]===!1&&d[d.length-1]++;a=Math.max.apply(Math,d);for(f=b=0;f<d.length;f++)b-=Math.pow(Math.abs(c-d[f]),1.5)*2,b-=Math.pow(a-d[f],1.5),".?!".indexOf(e[f])!=-1?b+=c/3:",;)]}".indexOf(e[f])!=-1&&(b+=c/4);d.length>1&&d[d.length-1]<=d[d.length-2]&&(b+=.5);return b}
function Sa(a,b,c){for(var d=Ta(a,b,c),e,f=0;f<b.length-1;f++)if(b[f]!=b[f+1]){var h=[].concat(b);h[f]=!h[f];h[f+1]=!h[f+1];var k=Ta(a,h,c);k>d&&(d=k,e=h)}return e?Sa(a,e,c):b};function Ua(a,b){this.width=a;this.height=b};function Va(a){var b;(b=Wa(a,"display"))||(b=a.currentStyle?a.currentStyle.display:null);if((b||a.style&&a.style.display)!="none")return new Ua(a.offsetWidth,a.offsetHeight);b=a.style;var c=b.display,d=b.visibility,e=b.position;b.visibility="hidden";b.position="absolute";b.display="inline";var f=a.offsetWidth;a=a.offsetHeight;b.display=c;b.position=e;b.visibility=d;return new Ua(f,a)}
function Wa(a,b){return document.defaultView&&document.defaultView.getComputedStyle&&(a=document.defaultView.getComputedStyle(a,null))?a[b]||a.getPropertyValue(b)||"":""}function Xa(a){var b=new x(0,0);a=a.getBoundingClientRect();var c=document.documentElement;c=new x(window.pageXOffset||c.scrollLeft,window.pageYOffset||c.scrollTop);b.x=a.left+c.x;b.y=a.top+c.y;return b};var Ya,Za,$a,ab,bb,cb,db,eb,fb,gb,hb;
(function(a){function b(d){return c.indexOf(d.toUpperCase())!=-1}hb=a;var c=hb.toUpperCase();Ya=b("Trident")||b("MSIE");Za=b("Edge");b("JavaFX");!b("Chrome")&&b("CriOS");$a=b("WebKit")&&!Za;ab=b("Gecko")&&!$a&&!Ya&&!Za;bb=b("Android");a=Da.navigator&&Da.navigator.maxTouchPoints;cb=b("iPad")||b("Macintosh")&&a>0;db=b("iPod");eb=b("iPhone")&&!cb&&!db;fb=b("Macintosh");gb=cb||bb&&!b("Mobile")||b("Silk");!gb&&(db||eb||bb||b("IEMobile"))})(Da.navigator&&Da.navigator.userAgent||"");
function ib(a){a.preventDefault();a.stopPropagation()}function jb(a){return a.target.type=="textarea"||a.target.type=="text"||a.target.type=="number"||a.target.type=="email"||a.target.type=="password"||a.target.type=="search"||a.target.type=="tel"||a.target.type=="url"||a.target.isContentEditable||a.target.dataset&&a.target.dataset.mu=="true"}
function lb(a){var b=new x(0,0),c=a.getAttribute("x");c&&(b.x=parseInt(c,10));if(c=a.getAttribute("y"))b.y=parseInt(c,10);if(c=(c=a.getAttribute("transform"))&&c.match(mb))b.x+=Number(c[1]),c[3]&&(b.y+=Number(c[3]));(a=a.getAttribute("style"))&&a.indexOf("translate")>-1&&(a=a.match(nb))&&(b.x+=Number(a[1]),a[3]&&(b.y+=Number(a[3])));return b}
function ob(a){for(var b=0,c=0;a;){var d=lb(a);b+=d.x;c+=d.y;if((" "+(a.getAttribute("class")||"")+" ").indexOf(" injectionDiv ")!=-1)break;a=a.parentNode}return new x(b,c)}var mb=/translate\(\s*([-+\d.e]+)([ ,]\s*([-+\d.e]+)\s*)?/,nb=/transform:\s*translate(?:3d)?\(\s*([-+\d.e]+)\s*px([ ,]\s*([-+\d.e]+)\s*px)?/;function pb(a){return a.ctrlKey&&fb?!0:a.button==2}function qb(a,b,c){var d=b.createSVGPoint();d.x=a.clientX;d.y=a.clientY;c||(c=b.getScreenCTM().inverse());return d.matrixTransform(c)}
function rb(a){switch(a.deltaMode){default:return{x:a.deltaX,y:a.deltaY};case 1:return{x:a.deltaX*40,y:a.deltaY*40};case 2:return{x:a.deltaX*125,y:a.deltaY*125}}}function sb(a){if(typeof a!="string")return a;a=tb(a,!1);return a.length?String(a[0]):""}
function tb(a,b){var c=[],d=a.split("");d.push("");var e=0;a=[];for(var f=null,h=0;h<d.length;h++){var k=d[h];e==0?k=="%"?((k=a.join(""))&&c.push(k),a.length=0,e=1):a.push(k):e==1?k=="%"?(a.push(k),e=0):b&&"0"<=k&&k<="9"?(e=2,f=k,(k=a.join(""))&&c.push(k),a.length=0):k=="{"?e=3:(a.push("%",k),e=0):e==2?"0"<=k&&k<="9"?f+=k:(c.push(parseInt(f,10)),h--,e=0):e==3&&(k==""?(a.splice(0,0,"%{"),h--,e=0):k!="}"?a.push(k):(e=a.join(""),/[A-Z]\w*/i.test(e)?(k=e.toUpperCase(),(k=k.lastIndexOf("BKY_",0)==0?k.substring(4):
null)&&k in w?(e=w[k],typeof e=="string"?Array.prototype.push.apply(c,tb(e,b)):b?c.push(String(e)):c.push(e)):c.push("%{"+e+"}")):c.push("%{"+e+"}"),e=a.length=0))}(k=a.join(""))&&c.push(k);b=[];for(h=a.length=0;h<c.length;++h)typeof c[h]=="string"?a.push(c[h]):((k=a.join(""))&&b.push(k),a.length=0,b.push(c[h]));(k=a.join(""))&&b.push(k);a.length=0;return b}function ub(){for(var a=vb.length,b=[],c=0;c<20;c++)b[c]=vb.charAt(Math.random()*a);return b.join("")}var vb="!#$%()*+,-./:;=?@[]^_`{|}~ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";
function wb(){if(xb!==void 0)return xb;if(!Da.getComputedStyle)return!1;var a=document.createElement("p"),b="none",c={webkitTransform:"-webkit-transform",OTransform:"-o-transform",msTransform:"-ms-transform",MozTransform:"-moz-transform",transform:"transform"};document.body.insertBefore(a,null);for(var d in c)if(a.style[d]!==void 0){a.style[d]="translate3d(1px,1px,1px)";b=Da.getComputedStyle(a);if(!b)return document.body.removeChild(a),!1;b=b.getPropertyValue(c[d])}document.body.removeChild(a);return xb=
b!=="none"}var xb;function yb(a,b){b=a.indexOf(b);if(b==-1)return!1;a.splice(b,1);return!0}function zb(a,b){var c=Object.create(null),d=Ab(a,!0);b&&(a=Bb(a))&&(a=d.indexOf(a),d.splice(a,d.length-a));for(a=0;b=d[a];a++)c[b.type]?c[b.type]++:c[b.type]=1;return c}
function Cb(a){var b=typeof a=="string"?sb(a):a,c=Number(b);if(!isNaN(c)&&0<=c&&c<=360){var d=b=a=0,e=Math.floor(c/60),f=c/60-e,h=165.75*.55,k=165.75*(1-.45*f);f=165.75*(1-.45*(1-f));switch(e){case 1:a=k;b=165.75;d=h;break;case 2:a=h;b=165.75;d=f;break;case 3:a=h;b=k;d=165.75;break;case 4:a=f;b=h;d=165.75;break;case 5:a=165.75;b=h;d=k;break;case 6:case 0:a=165.75,b=f,d=h}a=Ga(Math.floor(a),Math.floor(b),Math.floor(d));return{Xr:c,kh:a}}if(c=Ea(b))return{Xr:null,kh:c};c='Invalid colour: "'+b+'"';a!=
b&&(c+=' (from "'+a+'")');throw Error(c);};var Db="ontouchstart"in Da||!!(Da.document&&document.documentElement&&"ontouchstart"in document.documentElement)||!(!Da.navigator||!Da.navigator.maxTouchPoints&&!Da.navigator.msMaxTouchPoints),Eb=null,Fb={};
Da.PointerEvent?Fb={mousedown:["pointerdown"],mouseenter:["pointerenter"],mouseleave:["pointerleave"],mousemove:["pointermove"],mouseout:["pointerout"],mouseover:["pointerover"],mouseup:["pointerup","pointercancel"],touchend:["pointerup"],touchcancel:["pointercancel"]}:Db&&(Fb={mousedown:["touchstart"],mousemove:["touchmove"],mouseup:["touchend","touchcancel"]});var Gb=0;
function Hb(a,b){Ib();a.changedTouches&&a.changedTouches.length!=1||(Gb=setTimeout(function(){a.changedTouches&&(a.button=2,a.clientX=a.changedTouches[0].clientX,a.clientY=a.changedTouches[0].clientY);b&&Jb(b,a)},750))}function Ib(){Gb&&(clearTimeout(Gb),Gb=0)}function Kb(a){return a.pointerId!=void 0?a.pointerId:a.changedTouches&&a.changedTouches[0]&&a.changedTouches[0].identifier!==void 0&&a.changedTouches[0].identifier!==null?a.changedTouches[0].identifier:"mouse"}
function Lb(a){var b=Kb(a);return Eb!==void 0&&Eb!==null?Eb==b:a.type=="mousedown"||a.type=="touchstart"||a.type=="pointerdown"?(Eb=b,!0):!1}function Mb(a){return a.type.lastIndexOf("touch",0)==0||a.type.lastIndexOf("mouse",0)==0||a.type.lastIndexOf("pointer",0)==0}function Nb(a){return a.type.lastIndexOf("touch",0)==0||a.type.lastIndexOf("pointer",0)==0}
function Ob(a){var b=[];if(a.changedTouches)for(var c=0;c<a.changedTouches.length;c++)b[c]={type:a.type,changedTouches:[a.changedTouches[c]],target:a.target,stopPropagation:function(){a.stopPropagation()},preventDefault:function(){a.preventDefault()}};else b.push(a);return b};function z(a,b,c,d,e,f){function h(p){var t=!e;p=Ob(p);for(var A=0,y;y=p[A];A++)if(!t||!Mb(y)||Lb(y)){var C=y;if(C.type.lastIndexOf("touch",0)==0){var U=C.changedTouches[0];C.clientX=U.clientX;C.clientY=U.clientY}c?d.call(c,y):d(y);k=!0}}var k=!1,l=[];if(Da.PointerEvent&&b in Fb)for(var m=0,q;q=Fb[b][m];m++)a.addEventListener(q,h,!1),l.push([a,q,h]);else if(a.addEventListener(b,h,!1),l.push([a,b,h]),b in Fb){var n=function(p){h(p);var t=!f;k&&t&&p.preventDefault()};for(m=0;q=Fb[b][m];m++)a.addEventListener(q,
n,!1),l.push([a,q,n])}return l}function Pb(a,b,c,d){function e(m){c?d.call(c,m):d(m)}var f=[];if(Da.PointerEvent&&b in Fb)for(var h=0,k;k=Fb[b][h];h++)a.addEventListener(k,e,!1),f.push([a,k,e]);else if(a.addEventListener(b,e,!1),f.push([a,b,e]),b in Fb){var l=function(m){if(m.changedTouches&&m.changedTouches.length==1){var q=m.changedTouches[0];m.clientX=q.clientX;m.clientY=q.clientY}e(m);m.preventDefault()};for(h=0;k=Fb[b][h];h++)a.addEventListener(k,l,!1),f.push([a,k,l])}return f}
function B(a){for(;a.length;){var b=a.pop();b[0].removeEventListener(b[1],b[2],!1)}};
function Qb(){this.Ed=Object.create(null);this.Cf=Object.create(null)}function Rb(a,b){var c=b.component.id;if(a.Ed[c])throw Error('Plugin "'+c+'" with capabilities "'+a.Ed[c].$c+'" already added.');a.Ed[c]=b;for(var d=[],e=0;e<b.$c.length;e++){var f=String(b.$c[e]).toLowerCase();d.push(f);a.Cf[f]===void 0?a.Cf[f]=[c]:a.Cf[f].push(c)}a.Ed[c].$c=d}
function Sb(a,b){var c=a.Ed[b];if(c){for(var d=0;d<c.$c.length;d++){var e=String(c.$c[d]).toLowerCase();a.Cf[e].splice(a.Cf[e].indexOf(b),1)}delete a.Ed[b]}}function Tb(a,b){var c=Ub;c=String(c).toLowerCase();return a.Ed[b].$c.indexOf(c)!==-1}function Vb(a,b){b=String(b).toLowerCase();b=a.Cf[b];if(!b)return[];var c=[],d=[],e=a.Ed;b.forEach(function(f){d.push(e[f])});d.sort(function(f,h){return f.weight-h.weight});d.forEach(function(f){c.push(f.component)});return c}function Wb(a){this.Bh=a}
Wb.prototype.toString=function(){return this.Bh};var Xb=new Wb("positionable"),Yb=new Wb("drag_target"),Ub=new Wb("delete_area"),Zb=new Wb("autohideable");
function $b(a){this.Zs=a}$b.prototype.toString=function(){return this.Zs};var ac=new $b("animate"),bc=new $b("circle"),cc=new $b("clipPath"),dc=new $b("defs"),ec=new $b("feComposite"),fc=new $b("feGaussianBlur"),gc=new $b("fePointLight"),hc=new $b("feSpecularLighting"),kc=new $b("filter"),lc=new $b("g"),mc=new $b("image"),nc=new $b("line"),oc=new $b("path"),pc=new $b("pattern"),qc=new $b("rect"),rc=new $b("svg"),sc=new $b("text"),tc=new $b("tspan");var uc=null,vc=0,wc=null;function D(a,b,c){a=document.createElementNS("http://www.w3.org/2000/svg",String(a));for(var d in b)a.setAttribute(d,b[d]);document.body.runtimeStyle&&(a.runtimeStyle=a.currentStyle=a.style);c&&c.appendChild(a);return a}function xc(a,b){var c=a.getAttribute("class")||"";a.setAttribute("class",c+" "+b)}
function yc(a,b){for(var c=(a.getAttribute("class")||"").split(/\s+/),d=0;d<c.length;d++)c[d]&&c[d]!=b||(c.splice(d,1),d--);c.length?a.setAttribute("class",c.join(" ")):a.removeAttribute("class")}function zc(a,b){return(" "+(a.getAttribute("class")||"")+" ").indexOf(" "+b+" ")!=-1}function Ac(a){a&&a.parentNode&&a.parentNode.removeChild(a)}function Bc(a,b){var c=b.nextSibling;b=b.parentNode;if(!b)throw Error("Reference node has no parent.");c?b.insertBefore(a,c):b.appendChild(a)}
function Cc(a,b){a.style.transform=b;a.style["-webkit-transform"]=b}function Dc(){vc++;uc||(uc=Object.create(null))}function Ec(){vc--;vc||(uc=null)}function Fc(a,b,c,d){var e=a.textContent;a=e+"\n"+a.className.baseVal;var f;if(uc&&(f=uc[a]))return f;wc||(f=document.createElement("canvas"),f.className="blocklyComputeCanvas",document.body.appendChild(f),wc=f.getContext("2d"));wc.font=c+" "+b+" "+d;f=wc.measureText(e).width;uc&&(uc[a]=f);return f}
function Gc(a,b,c,d){var e=document.createElement("span");e.style.font=c+" "+b+" "+d;e.textContent=a;a=document.createElement("div");a.style.width="1px";a.style.height=0;b=document.createElement("div");b.style.display="flex";b.style.position="fixed";b.style.top=0;b.style.left=0;b.appendChild(e);b.appendChild(a);document.body.appendChild(b);try{c={},b.style.alignItems="baseline",c.Tb=a.offsetTop-e.offsetTop,b.style.alignItems="flex-end",c.height=a.offsetTop-e.offsetTop}finally{document.body.removeChild(b)}return c}
;function Hc(a,b,c){if(c<a){var d=c;c=a;a=d}return Math.max(a,Math.min(b,c))};

var Ic,Jc,Kc,Lc=null,Mc=null,Nc=null,Oc=null,Pc="",Qc="";
function Rc(){if(!Ic){var a=document.createElement("div");a.className="blocklyDropDownDiv";(Sc||document.body).appendChild(a);Ic=a;var b=document.createElement("div");b.className="blocklyDropDownContent";a.appendChild(b);Jc=b;b=document.createElement("div");b.className="blocklyDropDownArrow";a.appendChild(b);Kc=b;Ic.style.opacity=0;Ic.style.transition="transform 0.25s, opacity 0.25s";a.addEventListener("focusin",function(){xc(a,"blocklyFocused")});a.addEventListener("focusout",function(){yc(a,"blocklyFocused")})}}
function Tc(a,b,c,d){a=Uc(a,c.left,c.right,d.width);return{Dl:a.Kf,El:b,jl:a.Kf,kl:b+16,Af:a.Af,Ck:-9,Ak:!0,Bk:!0}}function Vc(a,b,c,d){a=Uc(a,c.left,c.right,d.width);return{Dl:a.Kf,El:b-d.height,jl:a.Kf,kl:b-d.height-16,Af:a.Af,Ck:d.height-2-8,Ak:!1,Bk:!0}}function Uc(a,b,c,d){var e=a;a=Hc(b,a-d/2,c-d);b=Hc(12,e-8-a,d-12-16);return{Af:b,Kf:a}}function Wc(){var a=Ic;a.style.transform="translate(0, 0)";a.style.opacity=0;Nc=setTimeout(function(){Xc()},250);Oc&&(Oc(),Oc=null)}
function Xc(){if(Mc){Nc&&clearTimeout(Nc);var a=Ic;a.style.transform="";a.style.left="";a.style.top="";a.style.opacity=0;a.style.display="none";a.style.backgroundColor="";a.style.borderColor="";Oc&&(Oc(),Oc=null);Jc.textContent="";Jc.style.width="";Mc=null;Pc&&(yc(a,Pc),Pc="");Qc&&(yc(a,Qc),Qc="");Yc(Zc)}};var $c=Object.create(null);function ad(a){this.Bh=a}ad.prototype.toString=function(){return this.Bh};var bd=new ad("connectionChecker"),cd=new ad("cursor"),dd=new ad("event"),ed=new ad("field"),fd=new ad("renderer"),gd=new ad("toolbox"),hd=new ad("theme"),id=new ad("flyoutsVerticalToolbox"),jd=new ad("metricsManager"),kd=new ad("blockDragger");
function E(a,b,c){if(!(a instanceof ad)&&typeof a!="string"||String(a).trim()=="")throw Error('Invalid type "'+a+'". The type must be a non-empty string or a Blockly.registry.Type.');a=String(a).toLowerCase();if(typeof b!="string"||b.trim()=="")throw Error('Invalid name "'+b+'". The name must be a non-empty string.');b=b.toLowerCase();if(!c)throw Error("Can not register a null value");var d=$c[a];d||(d=$c[a]=Object.create(null));switch(a){case String(ed):if(typeof c.L!="function")throw Error('Type "'+
a+'" must have a fromJson function');}if(d[b])throw Error('Name "'+b+'" with type "'+a+'" already registered.');d[b]=c}function ld(a,b,c){a=String(a).toLowerCase();b=b.toLowerCase();var d=$c[a];if(!d||!d[b]){b="Unable to find ["+b+"]["+a+"] in the registry.";if(c)throw Error(b+" You must require or register a "+a+" plugin.");console.warn(b);return null}return d[b]}function md(a,b,c){b=b.plugins[a.toString()]||"default";return typeof b=="function"?b:ld(a,b,c)};var nd="",od=!0,F=0,pd=["create","move"],qd=[];function G(a){F==0&&(qd.length||setTimeout(rd,0),qd.push(a))}function rd(){for(var a=sd(qd,!0),b=qd.length=0,c;c=a[b];b++)if(c.Za){var d=td[c.Za]||null;if(d){var e=c;if(e.fb)for(d.ff.push(e),d.Lh.length=0;d.ff.length>d.tn&&d.tn>=0;)d.ff.shift();for(var f=0;c=d.Ka[f];f++)c(e)}}}
function sd(a,b){a=a.slice();b||a.reverse();for(var c=[],d=Object.create(null),e=0,f;f=a[e];e++)if(!f.xj()){var h=[f.Yo?"ui":f.type,f.ma,f.Za].join(" "),k=d[h],l=k?k.event:null;if(!k)d[h]={event:f,index:e},c.push(f);else if(f.type=="move"&&k.index==e-1)l.Ue=f.Ue,l.Te=f.Te,l.Sd=f.Sd,k.index=e;else if(f.type=="change"&&f.element==l.element&&f.name==l.name)l.newValue=f.newValue;else if(f.type=="viewport_change")l.hc=f.hc,l.fc=f.fc,l.scale=f.scale,l.Dh=f.Dh;else if(f.type!="click"||l.type!="bubble_open")d[h]=
{event:f,index:e},c.push(f)}a=c.filter(function(m){return!m.xj()});b||a.reverse();for(e=1;f=a[e];e++)f.type=="change"&&f.element=="mutation"&&a.unshift(a.splice(e,1)[0]);return a}function H(a){nd=typeof a=="boolean"?a?ub():"":a}function ud(a){var b=[];a=Ab(a,!1);for(var c=0,d;d=a[c];c++)b[c]=d.id;return b}function I(a){return ld(dd,a)}
function vd(a){if((a.type=="move"||a.type=="create")&&a.Za){var b=td[a.Za]||null,c=b.Gb(a.ma);if(c){a=od;try{od=!1;var d=c.getParent();if(d&&d.isEnabled()){var e=Ab(c,!1);b=0;for(var f;f=e[b];b++)f.Tc(!0)}else if((c.s||c.C)&&!b.Jb()){do c.Tc(!1),c=Bb(c);while(c)}}finally{od=a}}}};
function wd(){this.Oc=null;this.Za=void 0;this.group=nd;this.fb=od}g=wd.prototype;g.Yo=!1;g.P=function(){var a={type:this.type};this.group&&(a.group=this.group);return a};g.L=function(a){this.Oc=!1;this.group=a.group};g.xj=function(){return!1};g.run=function(){};function xd(a){if(a.Za)var b=td[a.Za]||null;if(!b)throw Error("Workspace is null. Event must have been generated from real Blockly events.");return b};function L(a,b){a.i=b.prototype;a.prototype=Object.create(b.prototype);a.prototype.constructor=a}function yd(a,b){for(var c in b)a[c]=b[c]}function zd(a){return Object.values?Object.values(a):Object.keys(a).map(function(b){return a[b]})};function M(a){return document.createElementNS("https://developers.google.com/blockly/xml",a)};function Ad(a,b){if(a.Lb()&&(a=Bd(a,!1)[0],!a))return new DocumentFragment;var c;a.j.o&&(c=a.j.ih());b=Cd(a,b);var d=a.na();b.setAttribute("x",Math.round(a.j.o?c-d.x:d.x));b.setAttribute("y",Math.round(d.y));return b}
function Cd(a,b){if(a.Lb())return(a=Bd(a,!1)[0])?Cd(a):new DocumentFragment;var c=M(a.T?"shadow":"block");c.setAttribute("type",a.type);b||c.setAttribute("id",a.id);if(a.Rd){var d=a.Rd();d&&(d.hasChildNodes()||d.hasAttributes())&&c.appendChild(d)}d=0;for(var e;e=a.v[d];d++)for(var f=0,h;h=e.ea[f];f++){var k=!1;h.name&&(h.Bn?k=!0:h.vg&&(console.warn("Detected an editable field that was not serializable. Please define SERIALIZABLE property as true on all editable custom fields. Proceeding with serialization."),
k=!0));k?(k=M("field"),k.setAttribute("name",h.name||""),k.textContent=h.Ab,h=k):h=null;h&&c.appendChild(h)}if(d=a.lc.text)e=a.lc.size,f=a.lc.Ap,h=M("comment"),h.appendChild(document.createTextNode(d)),h.setAttribute("pinned",f),h.setAttribute("h",e.height),h.setAttribute("w",e.width),c.appendChild(h);a.data&&(d=M("data"),d.appendChild(document.createTextNode(a.data)),c.appendChild(d));for(d=0;e=a.v[d];d++){var l;f=!0;e.type!=5&&(k=e.connection.G(),e.type==1?l=M("value"):e.type==3&&(l=M("statement")),
h=e.connection.Of(),!h||k&&k.T||l.appendChild(Dd(h,b)),k&&(h=Cd(k,b),h.nodeType==Node.ELEMENT_NODE&&(l.appendChild(h),f=!1)),l.setAttribute("name",e.name),f||c.appendChild(l))}a.jd!=void 0&&a.jd!=a.bs&&c.setAttribute("inline",a.jd);a.isCollapsed()&&c.setAttribute("collapsed",!0);a.isEnabled()||c.setAttribute("disabled",!0);Ed(a)||a.T||c.setAttribute("deletable",!1);a.Na()||a.T||c.setAttribute("movable",!1);a.Zb()||c.setAttribute("editable",!1);if(d=Bb(a))h=Cd(d,b),h.nodeType==Node.ELEMENT_NODE&&(l=
M("next"),l.appendChild(h),c.appendChild(l));h=a.B&&a.B.Of();!h||d&&d.T||l.appendChild(Dd(h,b));return c}function Dd(a,b){for(var c=a=a.cloneNode(!0),d;c;)if(b&&c.nodeName=="shadow"&&c.removeAttribute("id"),c.firstChild)c=c.firstChild;else{for(;c&&!c.nextSibling;)d=c,c=c.parentNode,d.nodeType==Node.TEXT_NODE&&d.data.trim()==""&&c.firstChild!=d&&Ac(d);c&&(d=c,c=c.nextSibling,d.nodeType==Node.TEXT_NODE&&d.data.trim()==""&&Ac(d))}return a}
function Fd(a){return(new XMLSerializer).serializeToString(a).replace(/<(\w+)([^<]*)\/>/g,"<$1$2></$1>")}function Gd(a){var b=(new DOMParser).parseFromString(a,"text/xml");if(!b||!b.documentElement||b.getElementsByTagName("parsererror").length)throw Error("textToDom was unable to parse: "+a);return b.documentElement}
function Hd(a,b){var c;b.o&&(c=b.ih());var d=[];Dc();var e=nd;e||H(!0);b.gb&&b.gb(!1);var f=!0;try{for(var h=0,k;k=a.childNodes[h];h++){var l=k.nodeName.toLowerCase(),m=k;if(l=="block"||l=="shadow"&&!od){var q=Id(m,b);d.push(q.id);var n=m.hasAttribute("x")?parseInt(m.getAttribute("x"),10):10,p=m.hasAttribute("y")?parseInt(m.getAttribute("y"),10):10;isNaN(n)||isNaN(p)||q.moveBy(b.o?c-n:n,p);f=!1}else{if(l=="shadow")throw TypeError("Shadow block cannot be a top-level block.");if(l=="variables"){if(f)for(var t=
void 0,A=b,y=0;t=m.childNodes[y];y++){if(t.nodeType==Node.ELEMENT_NODE){var C=t.getAttribute("type"),U=t.getAttribute("id");A.Hd(t.textContent,C,U)}}else throw Error("'variables' tag must exist once before block and shadow tag elements in the workspace XML, but it was found in another location.");f=!1}}}}finally{e||H(!1),Ec()}b.gb&&b.gb(!0);G(new (I("finished_loading"))(b))}
function Id(a,b){if(a instanceof Jd){var c=a;a=b;b=c;console.warn("Deprecated call to Blockly.Xml.domToBlock, swap the arguments.")}F++;c=b.Lf();try{var d=Kd(a,b),e=Ab(d,!1);if(b.I){Ld(d,!1);for(var f=e.length-1;f>=0;f--)e[f].nh();for(f=e.length-1;f>=0;f--)e[f].X(!1);setTimeout(function(){d.disposed||Ld(d,!0)},1);Md(d);Nd(b)}else for(f=e.length-1;f>=0;f--);}finally{F--}if(F==0){a=Od(b,c);for(f=0;f<a.length;f++)b=a[f],G(new (I("var_create"))(b));G(new (I("create"))(d))}return d}
function Pd(a,b){for(var c=0,d;d=a[c];c++){var e=d.textContent,f=d.getAttribute("pinned")=="true",h=parseInt(d.getAttribute("w"),10);d=parseInt(d.getAttribute("h"),10);b.hg(e);b.lc.Ap=f;isNaN(h)||isNaN(d)||(b.lc.size=new Ua(h,d));f&&b.Ir&&!b.Kb&&setTimeout(function(){b.kc.Da(!0)},1)}}function Qd(a){for(var b={Lg:null,Mg:null},c=0,d;d=a.childNodes[c];c++)d.nodeType==Node.ELEMENT_NODE&&(d.nodeName.toLowerCase()=="block"?b.Lg=d:d.nodeName.toLowerCase()=="shadow"&&(b.Mg=d));return b}
function Kd(a,b,c,d){var e=a.getAttribute("type");if(!e)throw TypeError("Block type unspecified: "+a.outerHTML);var f=a.getAttribute("id");f=b.Zl(e,f);for(var h=[],k=[],l=[],m=[],q=[],n=[],p=0,t;t=a.childNodes[p];p++)if(t.nodeType!=Node.TEXT_NODE)switch(t.nodeName.toLowerCase()){case "mutation":h.push(t);break;case "comment":if(!Aa.Comment){console.warn("Missing require for Blockly.Comment, ignoring block comment.");break}k.push(t);break;case "data":l.push(t);break;case "title":case "field":m.push(t);
break;case "value":case "statement":q.push(t);break;case "next":n.push(t);break;default:console.warn("Ignoring unknown tag: "+t.nodeName)}p=!1;t=0;for(var A;A=h[t];t++)f.ye&&(f.ye(A),f.nh&&(p=!0));h=p;Pd(k,f);for(k=0;p=l[k];k++)f.data=p.textContent;if(c)if(d)if(f.C)c.connect(f.C);else throw TypeError("Next block does not have previous statement.");else if(f.s)c.connect(f.s);else if(f.C)c.connect(f.C);else throw TypeError("Child block does not have output or previous statement.");for(c=0;k=m[c];c++)l=
k.getAttribute("name"),d=f,(p=Rd(d,l))?p.ol(k):console.warn("Ignoring non-existent field "+l+" in block "+d.type);for(m=0;d=q[m];m++){l=d.getAttribute("name");c=Sd(f,l);if(!c){console.warn("Ignoring non-existent input "+l+" in block "+e);break}d=Qd(d);if(d.Lg){if(!c.connection)throw TypeError("Input connection does not exist.");Kd(d.Lg,b,c.connection,!1)}d.Mg&&c.connection.Sh(d.Mg)}for(e=0;q=n[e];e++){q=Qd(q);if(q.Lg){if(!f.B)throw TypeError("Next statement does not exist.");if(f.B.isConnected())throw TypeError("Next statement is already connected.");
Kd(q.Lg,b,f.B,!0)}q.Mg&&f.B&&f.B.Sh(q.Mg)}h&&f.nh();(b=a.getAttribute("inline"))&&f.bf(b=="true");(b=a.getAttribute("disabled"))&&f.Tc(b!="true"&&b!="disabled");if(b=a.getAttribute("deletable"))f.lo=b=="true";(b=a.getAttribute("movable"))&&f.Nm(b=="true");(b=a.getAttribute("editable"))&&f.Mm(b=="true");(b=a.getAttribute("collapsed"))&&f.Ze(b=="true");if(a.nodeName.toLowerCase()=="shadow"){a=Bd(f,!1);for(b=0;n=a[b];b++)if(!n.T)throw TypeError("Shadow block not allowed non-shadow child.");if(Td(f).length)throw TypeError("Shadow blocks cannot have variable references.");
f.Sm(!0)}return f};function Ud(a){Ud.i.constructor.call(this);this.ma=(this.Oc=typeof a=="undefined")?"":a.id;this.Za=this.Oc?"":a.j.id}L(Ud,wd);Ud.prototype.P=function(){var a=Ud.i.P.call(this);a.blockId=this.ma;return a};Ud.prototype.L=function(a){Ud.i.L.call(this,a);this.ma=a.blockId};function Vd(a,b,c,d,e){Vd.i.constructor.call(this,a);a&&(this.element=typeof b=="undefined"?"":b,this.name=typeof c=="undefined"?"":c,this.oldValue=typeof d=="undefined"?"":d,this.newValue=typeof e=="undefined"?"":e)}L(Vd,Ud);g=Vd.prototype;
g.type="change";g.P=function(){var a=Vd.i.P.call(this);a.element=this.element;this.name&&(a.name=this.name);a.oldValue=this.oldValue;a.newValue=this.newValue;return a};g.L=function(a){Vd.i.L.call(this,a);this.element=a.element;this.name=a.name;this.oldValue=a.oldValue;this.newValue=a.newValue};g.xj=function(){return this.oldValue==this.newValue};
g.run=function(a){var b=xd(this).Gb(this.ma);if(b)switch(b.Se&&b.Se.Da(!1),a=a?this.newValue:this.oldValue,this.element){case "field":(b=Rd(b,this.name))?Wd(b,a):console.warn("Can't set non-existent field: "+this.name);break;case "comment":b.hg(a||null);break;case "collapsed":b.Ze(!!a);break;case "disabled":b.Tc(!a);break;case "inline":b.bf(!!a);break;case "mutation":var c="";b.Rd&&(c=(c=b.Rd())&&Fd(c));if(b.ye){var d=Gd(a||"<mutation/>");b.ye(d)}G(new Vd(b,"mutation",null,c,a));break;default:console.warn("Unknown change type: "+
this.element)}else console.warn("Can't change non-existent block: "+this.ma)};function Xd(a){Xd.i.constructor.call(this,a);a&&(a.T&&(this.fb=!1),this.xml=a.j.I?Ad(a):Cd(a),this.He=ud(a))}L(Xd,Ud);Xd.prototype.type="create";Xd.prototype.P=function(){var a=Xd.i.P.call(this);a.xml=Fd(this.xml);a.ids=this.He;this.fb||(a.recordUndo=this.fb);return a};Xd.prototype.L=function(a){Xd.i.L.call(this,a);this.xml=Gd(a.xml);this.He=a.ids;a.recordUndo!==void 0&&(this.fb=a.recordUndo)};
Xd.prototype.run=function(a){var b=xd(this);if(a)a=M("xml"),a.appendChild(this.xml),Hd(a,b);else{a=0;for(var c;c=this.He[a];a++){var d=b.Gb(c);d?d.dispose(!1):c==this.ma&&console.warn("Can't uncreate non-existent block: "+c)}}};function Yd(a){Yd.i.constructor.call(this,a);if(a){if(a.getParent())throw Error("Connected blocks cannot be deleted.");a.T&&(this.fb=!1);this.ag=a.j.I?Ad(a):Cd(a);this.He=ud(a)}}L(Yd,Ud);Yd.prototype.type="delete";
Yd.prototype.P=function(){var a=Yd.i.P.call(this);a.oldXml=Fd(this.ag);a.ids=this.He;this.fb||(a.recordUndo=this.fb);return a};Yd.prototype.L=function(a){Yd.i.L.call(this,a);this.ag=Gd(a.oldXml);this.He=a.ids;a.recordUndo!==void 0&&(this.fb=a.recordUndo)};Yd.prototype.run=function(a){var b=xd(this);if(a){a=0;for(var c;c=this.He[a];a++){var d=b.Gb(c);d?d.dispose(!1):c==this.ma&&console.warn("Can't delete non-existent block: "+c)}}else a=M("xml"),a.appendChild(this.ag),Hd(a,b)};
function Zd(a){Zd.i.constructor.call(this,a);a&&(a.T&&(this.fb=!1),a=$d(this),this.sp=a.xp,this.pp=a.So,this.cm=a.bo)}L(Zd,Ud);g=Zd.prototype;g.type="move";g.P=function(){var a=Zd.i.P.call(this);this.Ue&&(a.newParentId=this.Ue);this.Te&&(a.newInputName=this.Te);this.Sd&&(a.newCoordinate=Math.round(this.Sd.x)+","+Math.round(this.Sd.y));this.fb||(a.recordUndo=this.fb);return a};
g.L=function(a){Zd.i.L.call(this,a);this.Ue=a.newParentId;this.Te=a.newInputName;if(a.newCoordinate){var b=a.newCoordinate.split(",");this.Sd=new x(Number(b[0]),Number(b[1]))}a.recordUndo!==void 0&&(this.fb=a.recordUndo)};function ae(a){var b=$d(a);a.Ue=b.xp;a.Te=b.So;a.Sd=b.bo}function $d(a){var b=xd(a).Gb(a.ma);a={};var c=b.getParent();if(c){if(a.xp=c.id,b=be(c,b))a.So=b.name}else a.bo=b.na();return a}g.xj=function(){return this.sp==this.Ue&&this.pp==this.Te&&Ja(this.cm,this.Sd)};
g.run=function(a){var b=xd(this),c=b.Gb(this.ma);if(c){var d=a?this.Ue:this.sp,e=a?this.Te:this.pp,f=a?this.Sd:this.cm;a=null;if(d&&(a=b.Gb(d),!a)){console.warn("Can't connect to non-existent block: "+d);return}c.getParent()&&ce(c);if(f)e=c.na(),c.moveBy(f.x-e.x,f.y-e.y);else{c=c.s||c.C;b=c.type;if(e){if(a=Sd(a,e))var h=a.connection}else b==4&&(h=a.B);h?c.connect(h):console.warn("Can't connect to non-existent input: "+e)}}else console.warn("Can't move non-existent block: "+this.ma)};
E(dd,"create",Xd);E(dd,"delete",Yd);E(dd,"change",Vd);E(dd,"move",Zd);function de(a){this.Oc=typeof a=="undefined";this.Za=a?a.id:"";this.group=nd;this.fb=!1}L(de,wd);de.prototype.type="finished_loading";de.prototype.P=function(){var a={type:this.type};this.group&&(a.group=this.group);this.Za&&(a.workspaceId=this.Za);return a};de.prototype.L=function(a){this.Oc=!1;this.Za=a.workspaceId;this.group=a.group};E(dd,"finished_loading",de);function ee(a){ee.i.constructor.call(this);this.Oc=typeof a=="undefined";this.Za=a?a:"";this.fb=!1}L(ee,wd);ee.prototype.Yo=!0;function fe(a,b,c,d){fe.i.constructor.call(this,a?a.j.id:void 0);this.ma=a?a.id:null;this.element=typeof b=="undefined"?"":b;this.oldValue=typeof c=="undefined"?"":c;this.newValue=typeof d=="undefined"?"":d}L(fe,ee);fe.prototype.type="ui";
fe.prototype.P=function(){var a=fe.i.P.call(this);a.element=this.element;this.newValue!==void 0&&(a.newValue=this.newValue);this.ma&&(a.blockId=this.ma);return a};fe.prototype.L=function(a){fe.i.L.call(this,a);this.element=a.element;this.newValue=a.newValue;this.ma=a.blockId};E(dd,"ui",fe);function ge(a){ge.i.constructor.call(this);this.ie=(this.Oc=typeof a=="undefined")?"":a.cb();this.Za=this.Oc?"":a.j.id}L(ge,wd);ge.prototype.P=function(){var a=ge.i.P.call(this);a.varId=this.ie;return a};ge.prototype.L=function(a){ge.i.P.call(this);this.ie=a.varId};function he(a){he.i.constructor.call(this,a);a&&(this.hf=a.type,this.gf=a.name)}L(he,ge);he.prototype.type="var_create";he.prototype.P=function(){var a=he.i.P.call(this);a.varType=this.hf;a.varName=this.gf;return a};
he.prototype.L=function(a){he.i.L.call(this,a);this.hf=a.varType;this.gf=a.varName};he.prototype.run=function(a){var b=xd(this);a?b.Hd(this.gf,this.hf,this.ie):b.Jf(this.ie)};function ie(a){ie.i.constructor.call(this,a);a&&(this.hf=a.type,this.gf=a.name)}L(ie,ge);ie.prototype.type="var_delete";ie.prototype.P=function(){var a=ie.i.P.call(this);a.varType=this.hf;a.varName=this.gf;return a};ie.prototype.L=function(a){ie.i.L.call(this,a);this.hf=a.varType;this.gf=a.varName};
ie.prototype.run=function(a){var b=xd(this);a?b.Jf(this.ie):b.Hd(this.gf,this.hf,this.ie)};function je(a,b){je.i.constructor.call(this,a);a&&(this.dm=a.name,this.$l=typeof b=="undefined"?"":b)}L(je,ge);je.prototype.type="var_rename";je.prototype.P=function(){var a=je.i.P.call(this);a.oldName=this.dm;a.newName=this.$l;return a};je.prototype.L=function(a){je.i.L.call(this,a);this.dm=a.oldName;this.$l=a.newName};je.prototype.run=function(a){var b=xd(this);a?b.eg(this.ie,this.$l):b.eg(this.ie,this.dm)};
E(dd,"var_create",he);E(dd,"var_delete",ie);E(dd,"var_rename",je);function ke(a){this.Sg=a;this.xa()}g=ke.prototype;g.la=null;g.Ic=null;g.Sg=null;g.Zd=1;g.Yh=null;g.Yn=new x(0,0);g.xa=function(){this.la||(this.la=D(rc,{xmlns:"http://www.w3.org/2000/svg","xmlns:html":"http://www.w3.org/1999/xhtml","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1","class":"blocklyBlockDragSurface"},this.Sg),this.Ic=D(lc,{},this.la))};
function le(a,b){if(a.Ic.childNodes.length)throw Error("Already dragging a block.");a.Ic.appendChild(b);a.la.style.display="block";a.Yh=new x(0,0)}g.qg=function(a,b){this.Yh=new x(a*this.Zd,b*this.Zd);a=this.Yh.x;b=this.Yh.y;a=a.toFixed(0);b=b.toFixed(0);this.la.style.display="block";Cc(this.la,"translate3d("+a+"px, "+b+"px, 0px)")};g.ul=function(){var a=lb(this.la);return new x(a.x/this.Zd,a.y/this.Zd)};g.N=function(){return this.la};
g.Ui=function(a){a?a.appendChild(this.Ic.firstChild):this.Ic.removeChild(this.Ic.firstChild);this.la.style.display="none";if(this.Ic.childNodes.length)throw Error("Drag group was not cleared.");this.Yh=null};var me=!1;function oe(a){if(me)throw Error("CSS already injected");Array.prototype.push.apply(pe,a);a.length=0}
var pe=[".blocklySvg {","background-color: #fff;","outline: none;","overflow: hidden;","position: absolute;","display: block;","}",".blocklyWidgetDiv {","display: none;","position: absolute;","z-index: 99999;","}",".injectionDiv {","height: 100%;","position: relative;","overflow: hidden;","touch-action: none;","}",".blocklyNonSelectable {","user-select: none;","-ms-user-select: none;","-webkit-user-select: none;","}",".blocklyWsDragSurface {","display: none;","position: absolute;","top: 0;","left: 0;",
"}",".blocklyWsDragSurface.blocklyOverflowVisible {","overflow: visible;","}",".blocklyBlockDragSurface {","display: none;","position: absolute;","top: 0;","left: 0;","right: 0;","bottom: 0;","overflow: visible !important;","z-index: 50;","}",".blocklyBlockCanvas.blocklyCanvasTransitioning,",".blocklyBubbleCanvas.blocklyCanvasTransitioning {","transition: transform .5s;","}",".blocklyTooltipDiv {","background-color: #ffffc7;","border: 1px solid #ddc;","box-shadow: 4px 4px 20px 1px rgba(0,0,0,.15);",
"color: #000;","display: none;","font: 9pt sans-serif;","opacity: .9;","padding: 2px;","position: absolute;","z-index: 100000;","}",".blocklyDropDownDiv {","position: absolute;","left: 0;","top: 0;","z-index: 1000;","display: none;","border: 1px solid;","border-color: #dadce0;","background-color: #fff;","border-radius: 2px;","padding: 4px;","box-shadow: 0 0 3px 1px rgba(0,0,0,.3);","}",".blocklyDropDownDiv.blocklyFocused {","box-shadow: 0 0 6px 1px rgba(0,0,0,.3);","}",".blocklyDropDownContent {",
"max-height: 300px;","overflow: auto;","overflow-x: hidden;","position: relative;","}",".blocklyDropDownArrow {","position: absolute;","left: 0;","top: 0;","width: 16px;","height: 16px;","z-index: -1;","background-color: inherit;","border-color: inherit;","}",".blocklyDropDownButton {","display: inline-block;","float: left;","padding: 0;","margin: 4px;","border-radius: 4px;","outline: none;","border: 1px solid;","transition: box-shadow .1s;","cursor: pointer;","}",".blocklyArrowTop {","border-top: 1px solid;",
"border-left: 1px solid;","border-top-left-radius: 4px;","border-color: inherit;","}",".blocklyArrowBottom {","border-bottom: 1px solid;","border-right: 1px solid;","border-bottom-right-radius: 4px;","border-color: inherit;","}",".blocklyResizeSE {","cursor: se-resize;","fill: #aaa;","}",".blocklyResizeSW {","cursor: sw-resize;","fill: #aaa;","}",".blocklyResizeLine {","stroke: #515A5A;","stroke-width: 1;","}",".blocklyHighlightedConnectionPath {","fill: none;","stroke: #fc3;","stroke-width: 4px;",
"}",".blocklyPathLight {","fill: none;","stroke-linecap: round;","stroke-width: 1;","}",".blocklySelected>.blocklyPathLight {","display: none;","}",".blocklyDraggable {",'cursor: url("<<<PATH>>>/handopen.cur"), auto;',"cursor: grab;","cursor: -webkit-grab;","}",".blocklyDragging {",'cursor: url("<<<PATH>>>/handclosed.cur"), auto;',"cursor: grabbing;","cursor: -webkit-grabbing;","}",".blocklyDraggable:active {",'cursor: url("<<<PATH>>>/handclosed.cur"), auto;',"cursor: grabbing;","cursor: -webkit-grabbing;",
"}",".blocklyBlockDragSurface .blocklyDraggable {",'cursor: url("<<<PATH>>>/handclosed.cur"), auto;',"cursor: grabbing;","cursor: -webkit-grabbing;","}",".blocklyDragging.blocklyDraggingDelete {",'cursor: url("<<<PATH>>>/handdelete.cur"), auto;',"}",".blocklyDragging>.blocklyPath,",".blocklyDragging>.blocklyPathLight {","fill-opacity: .8;","stroke-opacity: .8;","}",".blocklyDragging>.blocklyPathDark {","display: none;","}",".blocklyDisabled>.blocklyPath {","fill-opacity: .5;","stroke-opacity: .5;",
"}",".blocklyDisabled>.blocklyPathLight,",".blocklyDisabled>.blocklyPathDark {","display: none;","}",".blocklyInsertionMarker>.blocklyPath,",".blocklyInsertionMarker>.blocklyPathLight,",".blocklyInsertionMarker>.blocklyPathDark {","fill-opacity: .2;","stroke: none;","}",".blocklyMultilineText {","font-family: monospace;","}",".blocklyNonEditableText>text {","pointer-events: none;","}",".blocklyFlyout {","position: absolute;","z-index: 20;","}",".blocklyText text {","cursor: default;","}",".blocklySvg text,",
".blocklyBlockDragSurface text {","user-select: none;","-ms-user-select: none;","-webkit-user-select: none;","cursor: inherit;","}",".blocklyHidden {","display: none;","}",".blocklyFieldDropdown:not(.blocklyHidden) {","display: block;","}",".blocklyIconGroup {","cursor: default;","}",".blocklyIconGroup:not(:hover),",".blocklyIconGroupReadonly {","opacity: .6;","}",".blocklyIconShape {","fill: #00f;","stroke: #fff;","stroke-width: 1px;","}",".blocklyIconSymbol {","fill: #fff;","}",".blocklyMinimalBody {",
"margin: 0;","padding: 0;","}",".blocklyHtmlInput {","border: none;","border-radius: 4px;","height: 100%;","margin: 0;","outline: none;","padding: 0;","width: 100%;","text-align: center;","display: block;","box-sizing: border-box;","}",".blocklyHtmlInput::-ms-clear {","display: none;","}",".blocklyMainBackground {","stroke-width: 1;","stroke: #c6c6c6;","}",".blocklyMutatorBackground {","fill: #fff;","stroke: #ddd;","stroke-width: 1;","}",".blocklyFlyoutBackground {","fill: #ddd;","fill-opacity: .8;",
"}",".blocklyMainWorkspaceScrollbar {","z-index: 20;","}",".blocklyFlyoutScrollbar {","z-index: 30;","}",".blocklyScrollbarHorizontal,",".blocklyScrollbarVertical {","position: absolute;","outline: none;","}",".blocklyScrollbarBackground {","opacity: 0;","}",".blocklyScrollbarHandle {","fill: #ccc;","}",".blocklyScrollbarBackground:hover+.blocklyScrollbarHandle,",".blocklyScrollbarHandle:hover {","fill: #bbb;","}",".blocklyFlyout .blocklyScrollbarHandle {","fill: #bbb;","}",".blocklyFlyout .blocklyScrollbarBackground:hover+.blocklyScrollbarHandle,",
".blocklyFlyout .blocklyScrollbarHandle:hover {","fill: #aaa;","}",".blocklyInvalidInput {","background: #faa;","}",".blocklyVerticalMarker {","stroke-width: 3px;","fill: rgba(255,255,255,.5);","pointer-events: none;","}",".blocklyComputeCanvas {","position: absolute;","width: 0;","height: 0;","}",".blocklyNoPointerEvents {","pointer-events: none;","}",".blocklyContextMenu {","border-radius: 4px;","max-height: 100%;","}",".blocklyDropdownMenu {","border-radius: 2px;","padding: 0 !important;","}",
".blocklyDropdownMenu .blocklyMenuItem {","padding-left: 28px;","}",".blocklyDropdownMenu .blocklyMenuItemRtl {","padding-left: 5px;","padding-right: 28px;","}",".blocklyWidgetDiv .blocklyMenu {","background: #fff;","border: 1px solid transparent;","box-shadow: 0 0 3px 1px rgba(0,0,0,.3);","font: normal 13px Arial, sans-serif;","margin: 0;","outline: none;","padding: 4px 0;","position: absolute;","overflow-y: auto;","overflow-x: hidden;","max-height: 100%;","z-index: 20000;","}",".blocklyWidgetDiv .blocklyMenu.blocklyFocused {",
"box-shadow: 0 0 6px 1px rgba(0,0,0,.3);","}",".blocklyDropDownDiv .blocklyMenu {","background: inherit;","border: inherit;",'font: normal 13px "Helvetica Neue", Helvetica, sans-serif;',"outline: none;","position: relative;","z-index: 20000;","}",".blocklyMenuItem {","border: none;","color: #000;","cursor: pointer;","list-style: none;","margin: 0;","min-width: 7em;","padding: 6px 15px;","white-space: nowrap;","}",".blocklyMenuItemDisabled {","color: #ccc;","cursor: inherit;","}",".blocklyMenuItemHighlight {",
"background-color: rgba(0,0,0,.1);","}",".blocklyMenuItemCheckbox {","height: 16px;","position: absolute;","width: 16px;","}",".blocklyMenuItemSelected .blocklyMenuItemCheckbox {","background: url(<<<PATH>>>/sprites.png) no-repeat -48px -16px;","float: left;","margin-left: -24px;","position: static;","}",".blocklyMenuItemRtl .blocklyMenuItemCheckbox {","float: right;","margin-right: -24px;","}"];function qe(a,b){this.Qf=a;this.Wm=b.spacing;this.cp=b.length;this.fs=(this.Ol=a.firstChild)&&this.Ol.nextSibling;this.Rs=b.snap}qe.prototype.Zd=1;qe.prototype.dispose=function(){this.Qf=null};qe.prototype.update=function(a){this.Zd=a;var b=this.Wm*a||100;this.Qf.setAttribute("width",b);this.Qf.setAttribute("height",b);b=Math.floor(this.Wm/2)+.5;var c=b-this.cp/2,d=b+this.cp/2;b*=a;c*=a;d*=a;re(this.Ol,a,c,d,b,b);re(this.fs,a,b,b,c,d)};
function re(a,b,c,d,e,f){a&&(a.setAttribute("stroke-width",b),a.setAttribute("x1",c),a.setAttribute("y1",e),a.setAttribute("x2",d),a.setAttribute("y2",f))}qe.prototype.moveTo=function(a,b){this.Qf.setAttribute("x",a);this.Qf.setAttribute("y",b);(Ya||Za)&&this.update(this.Zd)};function se(){this.name="classic";E(hd,"classic",this)}se.prototype.pc=function(){return this.name+"-theme"};var te={};te=new se;function ue(a){if(!a)return null;if(a instanceof Element||typeof a=="string"){if(a){if(typeof a!="string"&&(Ya&&a.outerHTML?a=a.outerHTML:a instanceof Element||(a=null)),typeof a=="string"&&(a=Gd(a),a.nodeName.toLowerCase()!="xml"))throw TypeError("Toolbox should be an <xml> document.");}else a=null;var b={contents:ve(a)};a instanceof Node&&we(a,b);a=b}b=a.kind;var c=a.contents;if(b&&b!="flyoutToolbox"&&b!="categoryToolbox")throw Error("Invalid toolbox kind "+b+". Please supply either flyoutToolbox or categoryToolbox");
if(!c)throw Error("Toolbox must have a contents attribute.");return a}function xe(a){return a?a.contents?a.contents:Array.isArray(a)&&a.length>0&&!a[0].nodeType?a:ve(a):[]}function ye(a){if(!a)return!1;var b=a.kind;return b?b=="categoryToolbox":!!a.contents.filter(function(c){return c.kind.toUpperCase()=="CATEGORY"}).length}
function ve(a){var b=[],c=a.childNodes;c||(c=a);a=0;for(var d;d=c[a];a++)if(d.tagName){var e={},f=d.tagName.toUpperCase();e.kind=f;f=="BLOCK"?e.blockxml=d:d.childNodes&&d.childNodes.length>0&&(e.contents=ve(d));we(d,e);b.push(e)}return b}function we(a,b){for(var c=0;c<a.attributes.length;c++){var d=a.attributes[c];d.nodeName.indexOf("css-")>-1?(b.cssconfig=b.cssconfig||{},b.cssconfig[d.nodeName.replace("css-","")]=d.value):b[d.nodeName]=d.value}};function ze(a){var b=!!a.readOnly;if(b)var c=null,d=!1,e=!1,f=!1,h=!1,k=!1,l=!1;else{c=ue(a.toolbox);d=ye(c);e=a.trashcan;e===void 0&&(e=d);var m=a.maxTrashcanContents;e?m===void 0&&(m=32):m=0;f=a.collapse;f===void 0&&(f=d);h=a.comments;h===void 0&&(h=d);k=a.disable;k===void 0&&(k=d);l=a.sounds;l===void 0&&(l=!0)}var q=!!a.rtl;var n=a.toolboxPosition!=="end"==q?3:2;var p=a.css;p===void 0&&(p=!0);var t="https://blockly-demo.appspot.com/static/media/";a.media?t=a.media:a.path&&(t=a.path+"media/");var A=
a.oneBasedIndex===void 0?!0:!!a.oneBasedIndex,y=a.renderer||"geras",C=a.plugins||{};this.o=q;this.Mj=A;this.collapse=f;this.kr=h;this.disable=k;this.readOnly=b;this.Wl=a.maxBlocks||Infinity;this.Ej=a.maxInstances;this.We=t;this.Jo=d;b=a.move||{};f={};b.scrollbars===void 0&&a.scrollbars===void 0?f.scrollbars=d:typeof b.scrollbars=="object"?(f.scrollbars={},f.scrollbars.mh=!!b.scrollbars.horizontal,f.scrollbars.vertical=!!b.scrollbars.vertical,f.scrollbars.mh&&f.scrollbars.vertical?f.scrollbars=!0:
f.scrollbars.mh||f.scrollbars.vertical||(f.scrollbars=!1)):f.scrollbars=!!b.scrollbars||!!a.scrollbars;f.sg=f.scrollbars&&b.wheel!==void 0?!!b.wheel:typeof f.scrollbars=="object";f.fd=f.scrollbars?b.drag===void 0?!0:!!b.drag:!1;this.eb=f;this.Mo=e;this.Fj=m;this.Wr=l;this.Ur=p;this.Le=c;c=a.grid||{};d={};d.spacing=Number(c.spacing)||0;d.Kk=c.colour||"#888";d.length=c.length===void 0?1:Number(c.length);d.vu=d.spacing>0&&!!c.snap;this.Ho=d;c=a.zoom||{};d={};d.controls=c.controls===void 0?!1:!!c.controls;
d.sg=c.wheel===void 0?!1:!!c.wheel;d.Rp=c.startScale===void 0?1:Number(c.startScale);d.zh=c.maxScale===void 0?3:Number(c.maxScale);d.Ah=c.minScale===void 0?.3:Number(c.minScale);d.Jp=c.scaleSpeed===void 0?1.2:Number(c.scaleSpeed);d.zp=c.pinch===void 0?d.sg||d.controls:!!c.pinch;this.ra=d;this.Rb=n;this.Hm=y;this.Im=a.rendererOverrides;this.yl=null;this.zb=a.parentWorkspace;this.plugins=C};
function Ae(a,b,c,d,e){this.g=a;b=b===void 0?!0:b;c=c===void 0?!0:c;var f=b&&c;b&&(this.oa=new Be(a,!0,f,d,e));c&&(this.Z=new Be(a,!1,f,d,e));f&&(this.Tg=D(qc,{height:Ce,width:Ce,"class":"blocklyScrollbarBackground"},null),Bc(this.Tg,a.Vc));this.$=null}g=Ae.prototype;g.dispose=function(){Ac(this.Tg);this.$=this.g=this.Tg=null;this.oa&&(this.oa.dispose(),this.oa=null);this.Z&&(this.Z.dispose(),this.Z=null)};
g.resize=function(){var a=this.g.Hb();if(a){var b=!1,c=!1;this.$&&this.$.Oa==a.Oa&&this.$.Ya==a.Ya&&this.$.kb==a.kb&&this.$.ab==a.ab?(this.$&&this.$.scrollWidth==a.scrollWidth&&this.$.fc==a.fc&&this.$.scrollLeft==a.scrollLeft||(b=!0),this.$&&this.$.scrollHeight==a.scrollHeight&&this.$.hc==a.hc&&this.$.scrollTop==a.scrollTop||(c=!0)):c=b=!0;if(b||c){try{F++,this.oa&&b&&this.oa.resize(a),this.Z&&c&&this.Z.resize(a)}finally{F--}De(this.g)}this.oa&&this.Z&&(this.$&&this.$.Oa==a.Oa&&this.$.ab==a.ab||this.Tg.setAttribute("x",
this.Z.position.x),this.$&&this.$.Ya==a.Ya&&this.$.kb==a.kb||this.Tg.setAttribute("y",this.oa.position.y));this.$=a}};g.Vj=function(a,b){this.oa&&this.oa.Vj(a,b);this.Z&&this.Z.Vj(a,b)};g.set=function(a,b,c){this.oa&&this.oa.set(a,!1);this.Z&&this.Z.set(b,!1);if(c||c===void 0)a={},this.oa&&(a.x=Ee(this.oa)),this.Z&&(a.y=Ee(this.Z)),this.g.Qh(a)};g.$e=function(a){this.oa&&this.oa.$e(a);this.Z&&this.Z.$e(a)};
g.isVisible=function(){var a=!1;this.oa&&(a=this.oa.isVisible());this.Z&&(a=a||this.Z.isVisible());return a};
function Be(a,b,c,d,e){this.g=a;this.Vd=c||!1;this.Fe=b;this.Ne=e!==void 0?e:.5;this.ratio=this.$=null;a="blocklyScrollbar"+(this.Fe?"Horizontal":"Vertical");d&&(a+=" "+d);this.Rc=D(rc,{"class":a},null);this.l=D(lc,{},this.Rc);this.Wa=D(qc,{"class":"blocklyScrollbarBackground"},this.l);d=Math.floor((Ce-5)/2);this.Qb=D(qc,{"class":"blocklyScrollbarHandle",rx:d,ry:d},this.l);this.g.La.subscribe(this.Qb,"scrollbarColour","fill");this.g.La.subscribe(this.Qb,"scrollbarOpacity","fill-opacity");Bc(this.Rc,
Fe(this.g));this.position=new x(0,0);d=Ce;b?(this.Wa.setAttribute("height",d),this.Rc.setAttribute("height",d),this.Qb.setAttribute("height",d-5),this.Qb.setAttribute("y",2.5),this.Aj="width",this.Cp="x"):(this.Wa.setAttribute("width",d),this.Rc.setAttribute("width",d),this.Qb.setAttribute("width",d-5),this.Qb.setAttribute("x",2.5),this.Aj="height",this.Cp="y");this.vp=z(this.Wa,"mousedown",this,this.vs);this.wp=z(this.Qb,"mousedown",this,this.ws)}var Ge,He;g=Be.prototype;g.qm=new x(0,0);g.Qp=0;
g.cc=0;g.Jd=0;g.jh=0;g.ld=!0;g.we=!0;var Ce=15;Db&&(Ce=25);g=Be.prototype;g.dispose=function(){Ie();B(this.vp);this.vp=null;B(this.wp);this.wp=null;Ac(this.Rc);this.Wa=this.l=this.Rc=null;this.Qb&&(this.g.La.unsubscribe(this.Qb),this.Qb=null);this.g=null};function Je(a,b){return b=b<=0||isNaN(b)?0:Math.min(b,a.cc)}function Ke(a,b){a.Jd=b;a.Qb.setAttribute(a.Aj,a.Jd)}function Le(a,b){return b=b<=0||isNaN(b)?0:Math.min(b,a.cc-a.Jd)}function Me(a,b){a.jh=b;a.Qb.setAttribute(a.Cp,a.jh)}
function Ne(a,b){a.cc=b;a.Rc.setAttribute(a.Aj,a.cc);a.Wa.setAttribute(a.Aj,a.cc)}g.setPosition=function(a,b){this.position.x=a;this.position.y=b;Cc(this.Rc,"translate("+(this.position.x+this.qm.x)+"px,"+(this.position.y+this.qm.y)+"px)")};
g.resize=function(a){if(!a&&(a=this.g.Hb(),!a))return;var b;if(!(b=!this.$)){b=a;var c=this.$;b=!(b.Oa==c.Oa&&b.Ya==c.Ya&&b.fc==c.fc&&b.hc==c.hc&&b.kb==c.kb&&b.ab==c.ab&&b.scrollWidth==c.scrollWidth&&b.scrollHeight==c.scrollHeight&&b.scrollLeft==c.scrollLeft&&b.scrollTop==c.scrollTop)}b&&(this.Fe?(b=a,Oe(this,b)?Pe(this,b):Qe(this,b)):(b=a,Oe(this,b)?Re(this,b):Se(this,b)),this.$=a,Te(this))};function Oe(a,b){return a.$?a.$.Oa!==b.Oa||a.$.Ya!==b.Ya||a.$.ab!==b.ab||a.$.kb!==b.kb:!0}
function Pe(a,b){var c=b.Oa-a.Ne*2;a.Vd&&(c-=Ce);Ne(a,Math.max(0,c));c=b.ab+a.Ne;a.Vd&&a.g.o&&(c+=Ce);a.setPosition(c,b.kb+b.Ya-Ce-a.Ne);Qe(a,b)}function Qe(a,b){if(b.Oa>=b.scrollWidth)Ke(a,a.cc),Me(a,0),a.Vd||a.Da(!1);else{a.Vd||a.Da(!0);var c=a.cc*b.Oa/b.scrollWidth;c=Je(a,c);Ke(a,c);c=b.scrollWidth-b.Oa;var d=a.cc-a.Jd;b=(b.fc-b.scrollLeft)/c*d;b=Le(a,b);Me(a,b);a.ratio=d/c}}
function Re(a,b){var c=b.Ya-a.Ne*2;a.Vd&&(c-=Ce);Ne(a,Math.max(0,c));a.setPosition(a.g.o?b.ab+a.Ne:b.ab+b.Oa-Ce-a.Ne,b.kb+a.Ne);Se(a,b)}function Se(a,b){if(b.Ya>=b.scrollHeight)Ke(a,a.cc),Me(a,0),a.Vd||a.Da(!1);else{a.Vd||a.Da(!0);var c=a.cc*b.Ya/b.scrollHeight;c=Je(a,c);Ke(a,c);c=b.scrollHeight-b.Ya;var d=a.cc-a.Jd;b=(b.hc-b.scrollTop)/c*d;b=Le(a,b);Me(a,b);a.ratio=d/c}}g.isVisible=function(){return this.ld};g.$e=function(a){var b=a!=this.we;this.we=a;b&&this.ii()};
g.Da=function(a){var b=a!=this.isVisible();if(this.Vd)throw Error("Unable to toggle visibility of paired scrollbars.");this.ld=a;b&&this.ii()};g.ii=function(){this.we&&this.isVisible()?this.Rc.setAttribute("display","block"):this.Rc.setAttribute("display","none")};
g.vs=function(a){Yc(this.g);Eb=null;Ie();if(pb(a))a.stopPropagation();else{var b=qb(a,Fe(this.g),Ue(this.g));b=this.Fe?b.x:b.y;var c=ob(this.Qb);c=this.Fe?c.x:c.y;var d=this.jh,e=this.Jd*.95;b<=c?d-=e:b>=c+this.Jd&&(d+=e);Me(this,Le(this,d));Te(this);a.stopPropagation();a.preventDefault()}};
g.ws=function(a){Yc(this.g);Ie();pb(a)?a.stopPropagation():(this.Ts=this.jh,Ve(this.g),this.Qp=this.Fe?a.clientX:a.clientY,Ge=z(document,"mouseup",this,this.ys),He=z(document,"mousemove",this,this.xs),a.stopPropagation(),a.preventDefault())};g.xs=function(a){Me(this,Le(this,this.Ts+((this.Fe?a.clientX:a.clientY)-this.Qp)));Te(this)};g.ys=function(){We(this.g);Eb=null;Ie()};function Ie(){Xe(!0);Ge&&(B(Ge),Ge=null);He&&(B(He),He=null)}function Ee(a){a=a.jh/(a.cc-a.Jd);isNaN(a)&&(a=0);return a}
function Te(a){var b=Ee(a),c={};a.Fe?c.x=b:c.y=b;a.g.Qh(c)}g.set=function(a,b){Me(this,Le(this,a*this.ratio));(b||b===void 0)&&Te(this)};g.Vj=function(a,b){this.qm=new x(a,b)};var Ye=!1,Ze=!1,$e=0,af=0,bf=0,cf=0,df=null,ef=null,ff=null;function gf(a){for(;a&&a.ec;){if(typeof a.ec=="string"||typeof a.ec=="function")return a;a=a.ec}return null}function hf(a){a.js=Pb(a,"mouseover",null,jf);a.gs=Pb(a,"mouseout",null,kf);a.addEventListener("mousemove",lf,!1)}function mf(a){a&&(B(a.js),B(a.gs),a.removeEventListener("mousemove",lf))}function jf(a){Ze||(a=gf(a.currentTarget),df!=a&&(nf(),ef=null,df=a),clearTimeout($e))}
function kf(){Ze||($e=setTimeout(function(){ef=df=null;nf()},1),clearTimeout(af))}function lf(a){if(df&&df.ec&&!Ze)if(Ye){var b=bf-a.pageX;a=cf-a.pageY;Math.sqrt(b*b+a*a)>10&&nf()}else ef!=df&&(clearTimeout(af),bf=a.pageX,cf=a.pageY,af=setTimeout(of,750))}function nf(){Ye&&(Ye=!1,ff&&(ff.style.display="none"));af&&clearTimeout(af)}
function of(){if(!Ze&&(ef=df,ff)){ff.textContent="";var a;if(a=gf(df)){for(a=a.ec;typeof a=="function";)a=a();if(typeof a!="string")throw Error("Tooltip function must return a string.");}else a="";a=Ra(a,50);a=a.split("\n");for(var b=0;b<a.length;b++){var c=document.createElement("div");c.appendChild(document.createTextNode(a[b]));ff.appendChild(c)}a=df.o;b=document.documentElement.clientWidth;c=document.documentElement.clientHeight;ff.style.direction=a?"rtl":"ltr";ff.style.display="block";Ye=!0;
var d=bf;d=a?d-(0+ff.offsetWidth):d+0;var e=cf+10;e+ff.offsetHeight>c+window.scrollY&&(e-=ff.offsetHeight+20);a?d=Math.max(5-window.scrollX,d):d+ff.offsetWidth>b+window.scrollX-10&&(d=b-ff.offsetWidth-10);ff.style.top=e+"px";ff.style.left=d+"px"}};function pf(a,b,c){Array.isArray(c)&&(c=c.join(" "));a.setAttribute("aria-"+b,c)};function qf(a,b){this.m=a;this.type=b}g=qf.prototype;g.J=null;g.disposed=!1;g.Ef=null;g.Xj=null;g.x=0;g.y=0;
g.Wi=function(a){var b=this.A(),c=a.A();a.isConnected()&&a.disconnect();if(this.isConnected()){var d=this.Of(!0);this.Xj=null;var e=this.G();if(e.T)e.dispose(!1);else{this.disconnect();var f=e}this.Xj=d}var h;F==0&&(h=new (I("move"))(c));if(!this||!a)throw Error("Cannot connect null connections.");this.J=a;a.J=this;c.Wj(b);h&&(ae(h),G(h));f&&(a=this.type===1?f.s:f.C,(c=rf(c,a))?a.connect(c):a.im(this))};
g.dispose=function(){if(this.isConnected()){this.Sh(null);var a=this.G();a&&ce(a)}this.disposed=!0};g.A=function(){return this.m};function sf(a){return a.type==1||a.type==3}g.isConnected=function(){return!!this.J};g.im=function(){};g.connect=function(a){if(this.J!=a&&tf(this,a,!1)==0){var b=nd;b||H(!0);sf(this)?this.Wi(a):a.Wi(this);b||H(!1)}};function uf(a,b){var c=null;b=b.s;for(var d=0,e;e=a.v[d];d++)if((e=e.connection)&&tf(b,e,!1)==0){if(c)return null;c=e}return c}
function rf(a,b){if(b.type===2){a:{b=b.A();for(var c;c=uf(a,b);)if(a=c.G(),!a||a.T){b=c;break a}b=null}return b}return(a=a.yj(!0))&&tf(b,a,!1)==0?a:null}g.disconnect=function(){var a=this.J;if(!a)throw Error("Source connection not connected.");if(a.J!=this)throw Error("Target connection not connected to source connection.");if(sf(this)){var b=this.m;var c=a.A();a=this}else b=a.A(),c=this.m;var d=nd;d||H(!0);this.Uk(b,c);c.T||a.Nh();d||H(!1)};
g.Uk=function(a,b){var c;F==0&&(c=new (I("move"))(b));this.J=this.J.J=null;b.Wj(null);c&&(ae(c),G(c))};g.Nh=function(){var a=this.A(),b=this.Of();if(a.j&&b)if(a=Id(b,a.j),a.s)this.connect(a.s);else if(a.C)this.connect(a.C);else throw Error("Child block does not have output or previous statement.");};g.G=function(){return this.isConnected()?this.J.A():null};g.up=function(){!this.isConnected()||this.J&&tf(this,this.J,!1)==0||ce(sf(this)?this.G():this.m)};
g.gg=function(a){a?(Array.isArray(a)||(a=[a]),this.Ef=a,this.up()):this.Ef=null};g.Sh=function(a){this.Xj=a;a=this.G();a?a.T&&(a.dispose(!1),this.Nh()):this.Nh()};g.Of=function(a){return a&&this.G().T?Cd(this.G()):this.Xj};g.lp=function(){return[]};g.Lc=function(){for(var a=null,b=this.m.v,c=0;c<b.length;c++)if(b[c].connection===this){a=b[c];break}return a};function tf(a,b,c,d){if(a&&b){if(sf(a)){var e=a.A();var f=b.A()}else f=a.A(),e=b.A();e=e==f?1:b.type!=Ca[a.type]?2:e.j!==f.j?5:e.T&&!f.T?6:0}else e=3;if(e!=0)a=e;else{a:if(e=a.Ef,f=b.Ef,e&&f){for(var h=0;h<e.length;h++)if(f.indexOf(e[h])!=-1){e=!0;break a}e=!1}else e=!0;a=e?c&&!vf(a,b,d||0)?7:0:4}return a}
function vf(a,b,c){if(wf(a,b)>c||b.A().Lb())return!1;switch(b.type){case 4:return a.J||xf.indexOf(b)!=-1?a=!1:b.J?(a=b.G(),a=a.Lb()?!(a.C&&a.C.G()):!1):a=!0,a;case 2:if(b.isConnected()&&!b.G().Lb()||a.isConnected())return!1;break;case 1:if(b.isConnected()&&!b.G().Na()&&!b.G().T)return!1;break;case 3:if(b.isConnected()&&!a.A().B&&!b.G().T&&b.G().B)return!1;break;default:return!1}return xf.indexOf(b)!=-1?!1:!0}E(bd,"default",function(){});function yf(a){this.aa=Object.create(null);this.j=a}g=yf.prototype;g.clear=function(){this.aa=Object.create(null)};g.eg=function(a,b){var c=this.Pf(a);if(!c)throw Error("Tried to rename a variable that didn't exist. ID: "+a);var d=this.lj(b,c.type);a=zf(this.j);H(!0);try{if(d&&d.cb()!=c.cb()){var e=c.type;b!=d.name&&Af(d,b,a);for(b=0;b<a.length;b++){var f,h=a[b];for(d=0;f=h.v[d];d++)for(var k=0;f.ea[k];k++);}G(new (I("var_delete"))(c));this.aa[e].splice(this.mj(e).indexOf(c),1)}else Af(c,b,a)}finally{H(!1)}};
function Af(a,b,c){G(new (I("var_rename"))(a,b));a.name=b;for(a=0;a<c.length;a++)for(var d=c[a],e=0;b=d.v[e];e++)for(var f=0;b.ea[f];f++);}
g.Hd=function(a,b,c){var d=this.lj(a,b);if(d){if(c&&d.cb()!=c)throw Error('Variable "'+a+'" is already in use and its id is "'+d.cb()+'" which conflicts with the passed in id, "'+c+'".');return d}if(c&&this.Pf(c))throw Error('Variable id, "'+c+'", is already in use.');b=b||"";d=new Bf(this.j,a,b,c||ub());a=this.aa[b]||[];a.push(d);delete this.aa[b];this.aa[b]=a;return d};
g.Jf=function(a){var b=this.Pf(a);if(b){var c=b.name,d=this.wl(a);a=0;for(var e;e=d[a];a++)if(e.type=="procedures_defnoreturn"||e.type=="procedures_defreturn"){a=Cf(e,"NAME");c=w.CANNOT_DELETE_VARIABLE_PROCEDURE.replace("%1",c).replace("%2",a);Df(c);return}var f=this;d.length>1?(c=w.DELETE_VARIABLE_CONFIRMATION.replace("%1",String(d.length)).replace("%2",c),Ef(c,function(h){h&&b&&Ff(f,b,d)})):Ff(f,b,d)}else console.warn("Can't delete non-existent variable: "+a)};
function Ff(a,b,c){var d=nd;d||H(!0);try{for(var e=0;e<c.length;e++)c[e].dispose(!0);var f=a.aa[b.type];a=0;for(var h;h=f[a];a++)if(h.cb()==b.cb()){f.splice(a,1);G(new (I("var_delete"))(b));break}}finally{d||H(!1)}}g.lj=function(a,b){if(b=this.aa[b||""])for(var c=0,d;d=b[c];c++)if(d.name.toLowerCase()==a.toLowerCase())return d;return null};g.Pf=function(a){for(var b=Object.keys(this.aa),c=0;c<b.length;c++)for(var d=b[c],e=0,f;f=this.aa[d][e];e++)if(f.cb()==a)return f;return null};
g.mj=function(a){return(a=this.aa[a||""])?a.slice():[]};g.Lf=function(){var a=[],b;for(b in this.aa)a=a.concat(this.aa[b]);return a};g.wl=function(a){for(var b=[],c=zf(this.j),d=0;d<c.length;d++){var e=Td(c[d]);if(e)for(var f=0;f<e.length;f++)e[f].cb()==a&&b.push(c[d])}return b};function Jd(a){this.id=ub();td[this.id]=this;this.options=a||new ze({});this.o=!!this.options.o;this.Rb=this.options.Rb;new (md(bd,this.options,!0))(this);this.ci=[];this.ek=[];Object.create(null);this.Ka=[];this.ff=[];this.Lh=[];this.Dk=Object.create(null);this.vd=Object.create(null);this.aa=new yf(this);this.Oj=null}g=Jd.prototype;g.I=!1;g.Il=!1;g.tn=1024;g.Yi=null;g.dispose=function(){this.Ka.length=0;this.clear();delete td[this.id]};
g.Uc=function(a,b){a=a.na();b=b.na();return a.y+Jd.prototype.Uc.offset*a.x-(b.y+Jd.prototype.Uc.offset*b.x)};g.Li=function(a){this.ci.push(a)};g.Rj=function(a){if(!yb(this.ci,a))throw Error("Block not present in workspace's list of top-most blocks.");};g.Ja=function(a){var b=[].concat(this.ci);a&&b.length>1&&(this.Uc.offset=Math.sin(3*Math.PI/180),this.o&&(this.Uc.offset*=-1),b.sort(this.Uc));return b};function Gf(a,b){return a.vd[b]?a.vd[b].slice(0):[]}
function zf(a){var b=a.Ja(!1);for(a=0;a<b.length;a++)b.push.apply(b,Bd(b[a],!1));return b.filter(function(c){return!c.Lb()})}g.clear=function(){this.Il=!0;try{var a=nd;for(a||H(!0);this.ci.length;)this.ci[0].dispose(!1);for(;this.ek.length;)this.ek[this.ek.length-1].dispose(!1);a||H(!1);this.aa.clear();this.Oj&&this.Oj.clear()}finally{this.Il=!1}};g.eg=function(a,b){this.aa.eg(a,b)};g.Hd=function(a,b,c){return this.aa.Hd(a,b,c)};g.wl=function(a){return this.aa.wl(a)};g.Jf=function(a){this.aa.Jf(a)};
g.lj=function(a,b){return this.aa.lj(a,b)};g.Pf=function(a){return this.aa.Pf(a)};g.mj=function(a){return this.aa.mj(a)};g.Lf=function(){return this.aa.Lf()};g.ih=function(){return 0};g.Zl=function(a,b){return new Hf(this,a,b)};function If(a){return isNaN(a.options.Wl)?Infinity:a.options.Wl-zf(a).length}function Jf(a,b){if(!Kf(a))return!0;var c=0,d;for(d in b){if(b[d]>(a.options.Ej?(a.options.Ej[d]!==void 0?a.options.Ej[d]:Infinity)-Gf(a,d).length:Infinity))return!1;c+=b[d]}return c>If(a)?!1:!0}
function Kf(a){return a.options.Wl!=Infinity||!!a.options.Ej}function Lf(a,b){var c=b?a.Lh:a.ff;a=b?a.ff:a.Lh;var d=c.pop();if(d){for(var e=[d];c.length&&d.group&&d.group==c[c.length-1].group;)e.push(c.pop());for(c=0;d=e[c];c++)a.push(d);e=sd(e,b);od=!1;try{for(c=0;d=e[c];c++)d.run(b)}finally{od=!0}}}function Mf(a,b){a.Ka.push(b)}g.Gb=function(a){return this.Dk[a]||null};g.Tm=function(a){this.aa=a};var td=Object.create(null);function Nf(){var a=[],b;for(b in td)a.push(td[b]);return a};function Of(a){this.Sg=a;this.xa()}g=Of.prototype;g.la=null;g.Sg=null;g.xa=function(){this.la||(this.la=D(rc,{xmlns:"http://www.w3.org/2000/svg","xmlns:html":"http://www.w3.org/1999/xhtml","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1","class":"blocklyWsDragSurface blocklyOverflowVisible"},null),this.Sg.appendChild(this.la))};g.qg=function(a,b){a=a.toFixed(0);b=b.toFixed(0);this.la.style.display="block";Cc(this.la,"translate3d("+a+"px, "+b+"px, 0px)")};g.ul=function(){return lb(this.la)};
g.Ui=function(a){if(!a)throw Error("Couldn't clear and hide the drag surface: missing new surface.");var b=this.la.childNodes[0],c=this.la.childNodes[1];if(!(b&&c&&zc(b,"blocklyBlockCanvas")&&zc(c,"blocklyBubbleCanvas")))throw Error("Couldn't clear and hide the drag surface. A node was missing.");this.Am!=null?Bc(b,this.Am):a.insertBefore(b,a.firstChild);Bc(c,b);this.la.style.display="none";if(this.la.childNodes.length)throw Error("Drag surface was not cleared.");Cc(this.la,"");this.Am=null};function Pf(a,b,c){if(!b)throw Error("Cannot create a node without a location.");this.gi=a;this.M=b;this.iq=null;(a=c||null)&&a.hq&&(this.iq=a.hq)}var Qf=!1;function Rf(a){return a?new Pf("field",a):null}function Sf(a){if(!a)return null;var b=a.type;return b==1||b==3&&a.Lc()?Tf(a.Lc()):b==3?new Pf("next",a):b==2?new Pf("output",a):b==4?new Pf("previous",a):null}function Tf(a){return a&&a.connection?new Pf("input",a.connection):null}function Uf(a){return a?new Pf("block",a):null}
function Vf(a){return a?new Pf("stack",a):null}g=Pf.prototype;g.getType=function(){return this.gi};function Wf(a,b){a=a.M;a instanceof Hf||(a=a.A());if(!a||!a.j)return null;var c=a.rc();a=c.j.Ja(!0);for(var d=0,e;e=a[d];d++)if(c.id==e.id)return b=d+(b?1:-1),b==-1||b==a.length?null:Vf(a[b]);throw Error("Couldn't find "+(b?"next":"previous")+" stack?!");}function Xf(a){if(!a)return null;do var b=a.C&&a.C.G();while(b&&Bb(b)==a&&(a=b));return(b=a.C||a.s)&&b.J&&b.J.Lc()?Tf(b.J.Lc()):Vf(a)}
g.A=function(){return this.getType()==="block"?this.M:this.getType()==="stack"?this.M:this.getType()==="workspace"?null:this.M.A()};
g.next=function(){switch(this.gi){case "stack":return Wf(this,!0);case "output":var a=this.M;return Uf(a.A());case "field":a:{var b=this.M,c=b.Lc();a=b.A();b=c.ea.indexOf(b)+1;c=a.v.indexOf(c);for(var d;d=a.v[c];c++){for(var e=d.ea;b<e.length;){if(Yf(e[b])||Qf){a=Rf(e[b]);break a}b++}b=0;if(d.connection){a=Tf(d);break a}}a=null}return a;case "input":a:{b=this.M.Lc();a=b.A();for(b=a.v.indexOf(b)+1;c=a.v[b];b++){d=c.ea;e=0;for(var f;f=d[e];e++)if(Yf(f)||Qf){a=Rf(f);break a}if(c.connection){a=Tf(c);
break a}}a=null}return a;case "block":return Sf(this.M.B);case "previous":return a=this.M,Uf(a.A());case "next":return a=this.M,Sf(a.J)}return null};g.Ld=function(){switch(this.gi){case "workspace":var a=this.M.Ja(!0);if(a.length>0)return Vf(a[0]);break;case "stack":a=this.M;var b=a.C||a.s;return b?Sf(b):Uf(a);case "block":a=this.M;a:{a=a.v;b=0;for(var c;c=a[b];b++){for(var d=c.ea,e=0,f;f=d[e];e++)if(Yf(f)||Qf){a=Rf(f);break a}if(c.connection){a=Tf(c);break a}}a=null}return a;case "input":return Sf(this.M.J)}return null};
g.Xd=function(){switch(this.gi){case "stack":return Wf(this,!1);case "field":a:{var a=this.M;var b=a.Lc();var c=a.A();a=b.ea.indexOf(a)-1;for(var d=c.v.indexOf(b),e;e=c.v[d];d--){if(e.connection&&e!==b){b=Tf(e);break a}for(e=e.ea;a>-1;){if(Yf(e[a])||Qf){b=Rf(e[a]);break a}a--}d-1>=0&&(a=c.v[d-1].ea.length-1)}b=null}return b;case "input":a:{b=this.M.Lc();c=b.A();for(a=c.v.indexOf(b);d=c.v[a];a--){if(d.connection&&d!==b){b=Tf(d);break a}d=d.ea;e=d.length-1;for(var f;f=d[e];e--)if(Yf(f)||Qf){b=Rf(f);
break a}}b=null}return b;case "block":return b=this.M,Sf(b.C||b.s);case "previous":b=this.M;if((b=b.J)&&!b.Lc())return Sf(b);break;case "next":return b=this.M,Uf(b.A())}return null};
g.Ud=function(){switch(this.gi){case "stack":var a=this.M,b=a.na();a=a.j;return(b=new x(b.x,b.y+-20),a)?new Pf("workspace",a,{hq:b}):null;case "output":return b=this.M,(a=b.J)?Sf(a):Vf(b.A());case "field":return Uf(this.M.A());case "input":return b=this.M,Uf(b.A());case "block":return a=this.M,Xf(a);case "previous":return b=this.M,Xf(b.A());case "next":return b=this.M,Xf(b.A())}return null};var Zf=Object.create(null);var $f=Object.create(null);function ag(a,b){if(typeof a!="string"||a.trim()=="")throw Error('Error: Invalid extension name "'+a+'"');if($f[a])throw Error('Error: Extension "'+a+'" is already registered.');if(typeof b!="function")throw Error('Error: Extension "'+a+'" must be a function');$f[a]=b}
function bg(a,b,c){var d=$f[a];if(typeof d!="function")throw Error('Error: Extension "'+a+'" not found.');if(c){if(cg(b).length)throw Error('Error: tried to apply mutation "'+a+'" to a block that already has mutator functions.  Block id: '+b.id);}else var e=cg(b);d.apply(b);if(c){a='Error after applying mutator "'+a+'": ';if(typeof b.ye!="function")throw Error(a+'Applying a mutator didn\'t add "domToMutation"');if(typeof b.Rd!="function")throw Error(a+'Applying a mutator didn\'t add "mutationToDom"');
c=b.Mk!==void 0;d=b.Qk!==void 0;if(c&&d){if(typeof b.Mk!="function")throw Error(a+"compose must be a function.");if(typeof b.Qk!="function")throw Error(a+"decompose must be a function.");}else if(c||d)throw Error(a+'Must have both or neither of "compose" and "decompose"');}else{a:if(c=e,b=cg(b),b.length!=c.length)b=!1;else{for(d=0;d<b.length;d++)if(c[d]!=b[d]){b=!1;break a}b=!0}if(!b)throw Error('Error when applying extension "'+a+'": mutation properties changed when applying a non-mutator extension.');
}}function cg(a){var b=[];a.ye!==void 0&&b.push(a.ye);a.Rd!==void 0&&b.push(a.Rd);a.Mk!==void 0&&b.push(a.Mk);a.Qk!==void 0&&b.push(a.Qk);return b}ag("parent_tooltip_when_inline",function(){this.dt=this.ec;this.Uh(function(){var a=this.getParent();return a&&dg(a)&&a.ec||this.dt}.bind(this))});function eg(a){var b=ld(ed,a.type);return b?b.L(a):(console.warn("Blockly could not create a field of type "+a.type+". The field is probably not being registered. This could be because the file is not loaded, the field does not register itself (Issue #1584), or the registration is not being reached."),null)};var fg=0,gg=null;function hg(a,b,c,d){var e=(new Date-c)/150;e>1?Ac(a):(a.setAttribute("transform","translate("+(a.ft+(b?-1:1)*a.Tn.width*d/2*e)+","+(a.gt+a.Tn.height*d*e)+") scale("+(1-e)*d+")"),setTimeout(hg,10,a,b,c,d))}function ig(a,b,c){var d=(new Date-b)/150;d>1?Ac(a):(a.setAttribute("r",d*25*c),a.style.opacity=1-d,fg=setTimeout(ig,10,a,b,c))}
function jg(a,b,c){var d=(new Date-c)/200;d>1?a.Vh="":(a.Vh="skewX("+Math.round(Math.sin(d*Math.PI*3)*(1-d)*b)+")",gg=a,fg=setTimeout(jg,10,a,b,c));a.setAttribute("transform",a.ei+a.Vh)}function kg(){if(gg){clearTimeout(fg);var a=gg;a.Vh="";a.setAttribute("transform",a.ei);gg=null}};function lg(a,b,c){lg.i.constructor.call(this,a?a.j.id:void 0);this.ma=a?a.id:null;this.Xo=b;this.Vn=c}L(lg,ee);lg.prototype.type="drag";lg.prototype.P=function(){var a=lg.i.P.call(this);a.isStart=this.Xo;a.blockId=this.ma;a.blocks=this.Vn;return a};lg.prototype.L=function(a){lg.i.L.call(this,a);this.Xo=a.isStart;this.ma=a.blockId;this.Vn=a.blocks};E(dd,"drag",lg);function mg(a){this.fe=N=a;this.g=a.j;this.Od=this.Ll=null;this.dh=ng(this,this.fe);this.sb=this.Ca=null;this.Cc=!1;this.ah=this.Cl=this.Oe=null;this.Ni=og(this)}mg.prototype.dispose=function(){this.Ni.length=0;F++;try{this.dh&&this.dh.dispose(),this.Od&&this.Od.dispose()}finally{F--}};
mg.prototype.update=function(a,b){var c=28;for(var d=null,e=null,f=0;f<this.Ni.length;f++){var h=this.Ni[f],k=h.closest(c,a);k.connection&&(d=k.connection,e=h,c=k.Pj)}c={closest:d,local:e,Pj:c};if((this.Cc=this.Um(c,b))||pg(this,c,a)){F++;c.closest?(a=this.Ca!=c.closest,b=this.sb!=c.local,this.Ca&&this.sb&&(a||b||this.Cc)&&qg(this)):qg(this);this.sb=this.Ca=this.Oe=null;if(!this.Cc&&(a=c.closest,b=c.local,a))if(a==this.Ca||a.A().Lb())console.log("Trying to connect to an insertion marker");else{this.Ca=
a;this.sb=b;a=this.Ca;b=this.sb;c=this.fe;b.type==2||b.type==4?((d=!a.isConnected())||(d=a.G(),d=!!rf(c,b.type===2?d.s:d.C)),b=d?0:2):b=0;switch(b){case 1:this.Cl=this.Ca.A();break;case 0:d=this.sb;b=this.Ca;c=this.Ll&&d==this.Ll?this.Od:this.dh;d=c.tl(d.A(),d);if(d==this.Oe)throw Error("Made it to showInsertionMarker_ even though the marker isn't changing");c.X();c.I=!0;c.N().setAttribute("visibility","visible");d&&b&&(d.type!=3&&d.type!=1||c.moveBy(b.x-d.x,b.y-d.y));b&&d.connect(b);this.Oe=d;break;
case 2:this.ah=this.Ca.G(),rg(this.ah.za,"blocklyReplaceable",!0)}a&&(c=a.m.j.ya.D(),b=sg(c,a),a.type==1||a.type==2?(c=c.uf,b=tg(0,-c)+O("v",c)+b.ac+O("v",c)):(c=c.Ag-c.sa,b=tg(-c,0)+O("h",c)+b.Wd+O("h",c)),c=a.m.na(),qf.Qo=D(oc,{"class":"blocklyHighlightedConnectionPath",d:b,transform:"translate("+(a.x-c.x)+","+(a.y-c.y)+")"+(a.m.o?" scale(-1 1)":"")},a.m.N()))}F--}};
function ng(a,b){var c=b.type;F++;try{var d=a.g.Zl(c);d.Mp(!0);if(b.Rd){var e=b.Rd();e&&d.ye(e)}for(a=0;a<b.v.length;a++){var f=b.v[a];if(f.name!="_TEMP_COLLAPSED_INPUT"){var h=d.v[a];if(!h)throw Error("The insertion marker manager tried to create a marker but the result is missing an input. If you are using a mutator, make sure your domToMutation method is properly defined.");for(c=0;c<f.ea.length;c++){var k=f.ea[c],l=h.ea[c];if(!l)throw Error("The insertion marker manager tried to create a marker but the result is missing a field. If you are using a mutator, make sure your domToMutation method is properly defined.");
Wd(l,k.Ab)}}}d.Ze(b.isCollapsed());d.bf(dg(b));d.nh();d.N().setAttribute("visibility","hidden")}finally{F--}return d}function og(a){var b=a.fe.qc(!1),c=a.fe.yj(!0);if(c&&c!=a.fe.B){b.push(c);a.Ll=c;if(a.Od){F++;try{a.Od.dispose()}finally{F--}}a.Od=ng(a,c.A())}return b}
function pg(a,b,c){var d=b.local,e=b.closest;b=b.Pj;if(d&&e){if(a.sb&&a.Ca){if(a.Ca==e&&a.sb==d)return!1;d=a.sb.x+c.x-a.Ca.x;a=a.sb.y+c.y-a.Ca.y;a=Math.sqrt(d*d+a*a);return!(e&&b>a-8)}if(a.sb||a.Ca)console.error("Only one of localConnection_ and closestConnection_ was set.");else return!0}else return!(!a.sb||!a.Ca);console.error("Returning true from shouldUpdatePreviews, but it's not clear why.");return!0}mg.prototype.Um=function(a,b){return b&&Tb(this.g.mc,b.id)?ug(b,this.fe,a&&!!a.closest):!1};
function qg(a){a.Ca&&a.Ca.G()&&(Ac(qf.Qo),delete qf.Qo);if(a.ah)rg(a.ah.za,"blocklyReplaceable",!1),a.ah=null;else if(a.Cl)a.Cl=null;else if(a.Oe)if(a.Oe){var b=a.Oe,c=b.A(),d=c.B,e=c.C,f=c.s;f=b.type==1&&!(f&&f.J);!(b!=d||e&&e.J)||f?ce(b.G(),!1):b.type==3&&b!=d?(d=b.J,ce(d.A(),!1),e=e?e.J:null,ce(c,!0),e&&e.connect(d)):ce(c,!0);if(b.J)throw Error("markerConnection_ still connected at the end of disconnectInsertionMarker");a.Oe=null;(a=c.N())&&a.setAttribute("visibility","hidden")}else console.log("No insertion marker connection to disconnect")}
mg.prototype.Nf=function(){var a=[];this.dh&&a.push(this.dh);this.Od&&a.push(this.Od);return a};function vg(a,b){this.pa=a;this.g=b;this.Jc=new mg(this.pa);this.Ta=null;this.Cc=!1;this.ae=this.pa.na();b=[];a=Ab(a,!1);for(var c=0,d;d=a[c];c++){d=wg(d);for(var e=0;e<d.length;e++){var f={location:d[e].ku(),icon:d[e]};b.push(f)}}this.gj=b}g=vg.prototype;g.dispose=function(){this.gj.length=0;this.Jc&&this.Jc.dispose()};
g.$j=function(a,b){nd||H(!0);var c=new (I("drag"))(this.pa,!0,Ab(this.pa,!1));G(c);this.g.wj&&xg(this.pa);Dc();this.g.gb(!1);kg();if(this.pa.getParent()||b&&this.pa.B&&this.pa.B.G())ce(this.pa,b),a=this.dg(a),a=Ma(this.ae,a),this.pa.translate(a.x,a.y),a=this.pa,a.j.Ad.play("disconnect"),a.j.scale<1||(b=yg(a).height,b=Math.atan(10/b)/Math.PI*180,a.o||(b*=-1),jg(a.N(),b,new Date)),a=this.Jc,a.Ni=og(a);this.pa.af(!0);a=this.pa;a.ki&&(b=a.na(),a.N().removeAttribute("transform"),a.j.Bb.qg(b.x,b.y),(b=
a.N())&&le(a.j.Bb,b))};g.fd=function(a,b){b=this.dg(b);zg(this.pa,Ma(this.ae,b));for(var c=0;c<this.gj.length;c++){var d=this.gj[c];d.icon.uu(Ma(d.location,b))}c=this.Ta;this.Ta=Ag(this.g,a);this.Jc.update(b,this.Ta);a=this.Cc;this.Cc=this.Jc.Cc;a!=this.Cc&&rg(this.pa.za,"blocklyDraggingDelete",this.Cc);this.Ta!==c&&c&&c.fm();this.Ta&&this.Ta.gm()};
g.Zg=function(a,b){this.fd(a,b);this.gj=[];a=new (I("drag"))(this.pa,!1,Ab(this.pa,!1));G(a);Ec();kg();b=this.dg(b);a=Ma(this.ae,b);var c=this.pa;c.ki&&(c.translate(a.x,a.y),c.j.Bb.Ui(c.j.va));this.Ta&&this.Ta.hm();this.Cc?(Bg(this),this.pa.dispose(!1,!0),xf=[],a=!0):a=!1;if(!a)if(this.pa.af(!1),b){Cg(this.pa,b.x,b.y);Bg(this);if(this.Jc.Ca){if(b=this.Jc,b.Ca&&(F++,qg(b),F--,b.sb.connect(b.Ca),b.fe.I)){c=(sf(b.sb)?b.Ca:b.sb).A();var d=c.j;a=d.scale;d.Ad.play("click");if(!(a<1)){var e=Dg(d,c.N());
c.s?(e.x+=(c.o?3:-3)*a,e.y+=13*a):c.C&&(e.x+=(c.o?-23:23)*a,e.y+=3*a);c=D(bc,{cx:e.x,cy:e.y,r:0,fill:"none",stroke:"#888","stroke-width":10},Fe(d));ig(c,new Date,a)}xg(b.fe.rc())}}else this.pa.X();Eg(this.pa)}else Fg(this.pa.j,this.g.Mb.Ce(!0),this.pa);this.g.gb(!0);H(!1)};function Bg(a){var b=new (I("move"))(a.pa);b.cm=a.ae;ae(b);G(b)}g.dg=function(a){a=new x(a.x/this.g.scale,a.y/this.g.scale);this.g.wj&&a.scale(1/this.g.options.zb.scale);return a};
g.Nf=function(){return this.Jc&&this.Jc.Nf?this.Jc.Nf():[]};E(kd,"default",vg);function Gg(a,b){this.ub=a;this.g=b;this.Ta=null;this.li=!1;this.ae=this.ub.na();this.ze=wb()&&b.Bb?b.Bb:null}Gg.prototype.dispose=function(){this.ze=this.g=this.ub=null};function Hg(a,b,c){a.dg(c);zg(a.ub,a.ze);c=a.Ta;a.Ta=Ag(a.g,b);b=a.li;a.li=a.Um(a.Ta);b!=a.li&&rg(a.ub.za,"blocklyDraggingDelete",a.li);a.Ta!==c&&c&&c.fm();a.Ta&&a.Ta.gm()}Gg.prototype.Um=function(a){return a&&Tb(this.g.mc,a.id)?ug(a,this.ub,!1):!1};
function Ig(a,b,c){Hg(a,b,c);b=a.dg(c);b=Ma(a.ae,b);a.ub.moveTo(b.x,b.y);a.Ta&&a.Ta.hm();a.li?a.ub.dispose(!1,!0):(a.ze&&a.ze.Ui(a.g.Vc),a.ub.af&&a.ub.af(!1));a.g.gb(!0);H(!1)}Gg.prototype.dg=function(a){a=new x(a.x/this.g.scale,a.y/this.g.scale);this.g.wj&&a.scale(1/this.g.options.zb.scale);return a};function Jg(a,b,c){Jg.i.constructor.call(this,a?a.j.id:b);this.ma=a?a.id:null;this.Up=c}L(Jg,ee);Jg.prototype.type="click";Jg.prototype.P=function(){var a=Jg.i.P.call(this);a.targetType=this.Up;this.ma&&(a.blockId=this.ma);return a};Jg.prototype.L=function(a){Jg.i.L.call(this,a);this.Up=a.targetType;this.ma=a.blockId};E(dd,"click",Jg);function Kg(a){this.g=a;this.Ro=Lg(this.g);this.eq=Mg(this.g);this.Vs=new x(a.scrollX,a.scrollY)}Kg.prototype.dispose=function(){this.g=null};Kg.prototype.$j=function(){N&&Ng(N);Ve(this.g)};Kg.prototype.Zg=function(a){this.fd(a);We(this.g)};Kg.prototype.fd=function(a){a=Ma(this.Vs,a);if(this.Ro&&this.eq)this.g.scroll(a.x,a.y);else if(this.Ro)this.g.scroll(a.x,this.g.scrollY);else if(this.eq)this.g.scroll(this.g.scrollX,a.y);else throw new TypeError("Invalid state.");};function Og(a,b){this.jp=null;this.mb=new x(0,0);this.Ea=this.Xa=this.kg=this.lg=this.Ac=null;this.Pk=b;this.qh=this.Je=this.rh=this.De=!1;this.vc=a;this.K=this.kf=this.Fc=this.Cd=this.Lj=this.Kj=null;this.No=this.sj=this.Uf=this.Wn=!1}g=Og.prototype;g.dispose=function(){Eb=null;Ze=!1;this.Pk.bb=null;this.Kj&&B(this.Kj);this.Lj&&B(this.Lj);this.Fc&&this.Fc.dispose();this.kf&&this.kf.dispose();this.Cd&&this.Cd.dispose()};
function Pg(a,b){a.mb=La(new x(b.clientX,b.clientY),a.jp);if(a.De)var c=!1;else c=a.mb,a.De=Math.sqrt(c.x*c.x+c.y*c.y)>(a.K?10:5),c=a.De;if(c){if(a.Wn)throw Error("updateIsDragging_ should only be called once per gesture.");a.Wn=!0;a.Ac?(a.qh=!0,a.Cd=new Gg(a.Ac,a.Ea),c=a.Cd,nd||H(!0),c.g.gb(!1),c.ub.tu(!1),c.ze&&(c.ub.moveTo(0,0),c.ze.qg(c.ae.x,c.ae.y),le(c.ze,c.ub.N())),c.ub.af&&c.ub.af(!0),Hg(a.Cd,a.vc,a.mb),c=!0):c=!1;if(!c){if(a.Xa){if(a.K){if(a.Xa&&a.Xa.isEnabled()){if(!(c=!Qg(a.K))){c=a.mb;
c=Math.atan2(c.y,c.x)/Math.PI*180;var d=a.K.wr;c=c<d&&c>-d||c<-180+d||c>180-d?!0:!1}c?(a.Ea=a.K.O,Rg(a.Ea),nd||H(!0),a.kg=null,a.Xa=Sg(a.K,a.Xa),a.Xa.select(),c=!0):c=!1}else c=!1;a.Je=c}else a.Xa.Na()&&(a.Je=!0);a.Je?(a.Fc=new (md(kd,a.Pk.options,!0))(a.Xa,a.Ea),a.Fc.$j(a.mb,a.No),a.Fc.fd(a.vc,a.mb),c=!0):c=!1}else c=!1;if(c=!c)if(a.K)c=Qg(a.K);else if(c=a.Ea)c=a.Ea,c=c.options.eb&&c.options.eb.fd;c&&(a.kf=new Kg(a.Ea),a.rh=!0,a.kf.$j())}Ib()}a.vc=b}
g.Vk=function(a){jb(a)?this.cancel():(this.Uf=!0,kg(),Rg(this.Ea),this.Ea.wj&&this.Ea.resize(),Xe(!!this.K),Yc(this.Ea),this.vc=a,nf(),Ze=!0,this.Xa&&this.Xa.select(),pb(a)?Jb(this,a):(a.type.toLowerCase()!="touchstart"&&a.type.toLowerCase()!="pointerdown"||a.pointerType=="mouse"||Hb(a,this),this.jp=new x(a.clientX,a.clientY),this.No=a.altKey||a.ctrlKey||a.metaKey,this.Un(a)))};
g.Un=function(a){this.Kj=z(document,"mousemove",null,this.Sf.bind(this));this.Lj=z(document,"mouseup",null,this.nj.bind(this));a.preventDefault();a.stopPropagation()};g.Sf=function(a){Pg(this,a);this.rh?this.kf.fd(this.mb):this.Je?this.Fc.fd(this.vc,this.mb):this.qh&&Hg(this.Cd,this.vc,this.mb);a.preventDefault();a.stopPropagation()};
g.nj=function(a){Pg(this,a);Ib();if(this.sj)console.log("Trying to end a gesture recursively.");else{this.sj=!0;if(this.qh)Ig(this.Cd,a,this.mb);else if(this.Je)this.Fc.Zg(a,this.mb);else if(this.rh)this.kf.Zg(this.mb);else if(this.Ac&&!this.De)this.Ac.Ns&&this.Ac.Ns(),this.Ac.select&&this.Ac.select();else if(Tg(this)){var b=this.lg,c=this.vc;Yf(b)&&b.Zj(c);Ug(this)}else!this.kg||this.De||Tg(this)?this.kg||this.Ac||this.lg||this.De||(b=this.Pk,N&&Ng(N),b=this.Ea||b,G(new (I("click"))(null,b.id,"workspace"))):
(this.K&&this.K.se?this.Xa.isEnabled()&&(nd||H(!0),Eg(Sg(this.K,this.Xa))):(b=new (I("click"))(this.kg,this.Ea.id,"block"),G(b)),Ug(this),H(!1));a.preventDefault();a.stopPropagation();this.dispose()}};g.cancel=function(){this.sj||(Ib(),this.qh?Ig(this.Cd,this.vc,this.mb):this.Je?this.Fc.Zg(this.vc,this.mb):this.rh&&this.kf.Zg(this.mb),this.dispose())};
function Jb(a,b){a.Xa?(Ug(a),Xe(!!a.K),a.Xa.Yj(b)):a.Ac?a.Ac.Yj(b):a.Ea&&!a.K&&(Xe(),a.Ea.Yj(b));b.preventDefault();b.stopPropagation();a.dispose()}function Vg(a,b,c){if(a.Uf)throw Error("Tried to call gesture.handleWsStart, but the gesture had already been started.");a.Ea||(a.Ea=c);a.vc=b;a.Vk(b)}function Wg(a,b,c){if(a.Uf)throw Error("Tried to call gesture.handleFlyoutStart, but the gesture had already been started.");a.K||(a.K=c);Vg(a,b,c.g)}function Ug(a){a.Xa&&!a.K&&xg(a.Xa)}
function Xg(a,b){a.kg||a.Ac||(a.kg=b,b.Kb&&b!=b.rc()?Yg(a,b.rc()):Yg(a,b))}function Yg(a,b){b.T?Yg(a,b.getParent()):a.Xa=b}function Tg(a){return(a.lg?Yf(a.lg):!1)&&!a.De&&(!a.K||!a.K.se)}g.Jb=function(){return this.rh||this.Je||this.qh};g.Nf=function(){return this.Fc?this.Fc.Nf():[]};function Zg(){for(var a=Nf(),b=0,c;c=a[b];b++)if(c.bb)return!0;return!1};function $g(){this.Wb=this.nc=this.Kk=null;this.type="marker"}function ah(a,b){var c=a.nc;a.nc=b;a.Wb&&a.Wb.oc(c,a.nc)}$g.prototype.oc=function(){this.Wb&&this.Wb.oc(this.nc,this.nc)};$g.prototype.qb=function(){this.Wb&&this.Wb.qb()};$g.prototype.dispose=function(){this.Wb&&this.Wb.dispose()};function bh(){bh.i.constructor.call(this);this.type="cursor"}L(bh,$g);bh.prototype.next=function(){var a=this.nc;if(!a)return null;for(a=a.next();a&&a.next()&&(a.getType()=="next"||a.getType()=="block");)a=a.next();a&&ah(this,a);return a};bh.prototype.Ld=function(){var a=this.nc;if(!a)return null;if(a.getType()=="previous"||a.getType()=="output")a=a.next();(a=a.Ld())&&ah(this,a);return a};
bh.prototype.Xd=function(){var a=this.nc;if(!a)return null;for(a=a.Xd();a&&a.Xd()&&(a.getType()=="next"||a.getType()=="block");)a=a.Xd();a&&ah(this,a);return a};bh.prototype.Ud=function(){var a=this.nc;if(!a)return null;(a=a.Ud())&&a.getType()=="block"&&(a=a.Xd()||a);a&&ah(this,a);return a};E(cd,"default",bh);function ch(a){this.ed=this.Vb=null;this.yh=Object.create(null);this.g=a}g=ch.prototype;g.fh=function(){return this.Vb};g.hh=function(a){return this.yh[a]||null};g.rd=function(a){a?(this.g.va.appendChild(a),this.ed=a):this.ed=null};g.$d=function(a){a?this.g.va&&(this.ed?this.g.va.insertBefore(a,this.ed):this.g.va.appendChild(a)):this.od=null};
g.dispose=function(){for(var a=Object.keys(this.yh),b=0,c;c=a[b];b++){var d=this.yh[c];if(d)d.dispose(),delete this.yh[c];else throw Error("Marker with ID "+c+" does not exist. Can only unregister markers that exist.");}this.yh=null;this.Vb&&(this.Vb.dispose(),this.Vb=null)};var dh,eh=null,fh=null,gh="",hh="";function ih(a){var b=jh,c=jh.dispose;kh();eh=b;fh=c;b=dh;b.style.direction=a?"rtl":"ltr";b.style.display="block";a=Zc;gh=a.ya.pc();hh=a.gd().pc();xc(b,gh);xc(b,hh)}function kh(){if(eh){eh=null;var a=dh;a.style.display="none";a.style.left="";a.style.top="";fh&&fh();fh=null;a.textContent="";gh&&(yc(a,gh),gh="");hh&&(yc(a,hh),hh="");Yc(Zc)}}function lh(a,b,c){dh.style.left=a+"px";dh.style.top=b+"px";dh.style.height=c+"px"};function mh(a,b,c){this.Ab=this.ik;this.Xp=this.bq=null;this.hb=new Ua(0,0);this.h=this.Yl=this.ef=this.ib=this.Fa=this.vb=this.od=this.ed=null;c&&this.Og(c);Wd(this,a);b&&(this.bq=b)}g=mh.prototype;g.ik=null;g.name=void 0;g.disposed=!1;g.ip=50;g.m=null;g.Md=!0;g.je=!0;g.Zn=null;g.vg=!0;g.Bn=!1;g.Og=function(a){var b=a.tooltip;typeof b=="string"&&(b=sb(a.tooltip));b&&this.Uh(b)};g.D=function(){!this.h&&this.m&&this.m.j&&this.m.j.I&&(this.h=this.m.j.ya.D());return this.h};g.A=function(){return this.m};
g.S=function(){this.vb||(this.vb=D(lc,{},null),this.isVisible()||(this.vb.style.display="none"),this.m.N().appendChild(this.vb),this.pj(),nh(this),this.Uh(this.Xp),hf(oh(this)),this.Yl=z(oh(this),"mousedown",this,this.Td))};g.pj=function(){ph(this);qh(this)};function ph(a){a.Fa=D(qc,{rx:a.D().si,ry:a.D().si,x:0,y:0,height:a.hb.height,width:a.hb.width,"class":"blocklyFieldRect"},a.vb)}
function qh(a){a.ib=D(sc,{"class":"blocklyText"},a.vb);a.D().jk&&a.ib.setAttribute("dominant-baseline","central");a.ef=document.createTextNode("");a.ib.appendChild(a.ef)}g.ol=function(a){Wd(this,a.textContent)};g.dispose=function(){Mc===this&&Wc();eh==this&&kh();mf(oh(this));this.Yl&&B(this.Yl);Ac(this.vb);this.disposed=!0};
function nh(a){var b=a.vb;a.vg&&b&&(a.m.Zb()?(xc(b,"blocklyEditableText"),yc(b,"blocklyNonEditableText"),b.style.cursor=a.rq):(xc(b,"blocklyNonEditableText"),yc(b,"blocklyEditableText"),b.style.cursor=""))}function Yf(a){return!!a.m&&a.m.Zb()&&!!a.Zj&&typeof a.Zj==="function"}g.isVisible=function(){return this.je};g.Da=function(a){if(this.je!=a){this.je=a;var b=this.N();b&&(b.style.display=a?"block":"none")}};g.N=function(){return this.vb};g.Sa=function(){};
g.Gm=function(){this.ef&&(this.ef.nodeValue=rh(this));this.$p()};g.$p=function(){var a=this.D(),b=this.Fa?this.D().wg:0,c=b*2,d=a.ui,e=0;this.ib&&(e=Fc(this.ib,a.yg+"pt",a.mf,a.lf),c+=e);this.Fa&&(d=Math.max(d,a.nn));this.hb.height=d;this.hb.width=c;sh(this,b,e);th(this)};function sh(a,b,c){if(a.ib){var d=a.D(),e=a.hb.height/2;a.ib.setAttribute("x",a.m.o?a.hb.width-c-b:b);a.ib.setAttribute("y",d.jk?e:e-d.ui/2+d.qn)}}
function th(a){a.Fa&&(a.Fa.setAttribute("width",a.hb.width),a.Fa.setAttribute("height",a.hb.height),a.Fa.setAttribute("rx",a.D().si),a.Fa.setAttribute("ry",a.D().si))}g.getSize=function(){if(!this.isVisible())return new Ua(0,0);this.Md?(this.Gm(),this.Md=!1):this.je&&this.hb.width==0&&(console.warn("Deprecated use of setting size_.width to 0 to rerender a field. Set field.isDirty_ to true instead."),this.Gm());return this.hb};
function rh(a){var b=uh(a);if(!b)return"\u00a0";b.length>a.ip&&(b=b.substring(0,a.ip-2)+"\u2026");b=b.replace(/\s/g,"\u00a0");a.m&&a.m.o&&(b+="\u200f");return b}function uh(a){if(a.vl){var b=a.vl.call(a);if(b!==null)return String(b)}return String(a.Ab)}g.xh=function(){this.Md=!0;this.h=null};function vh(a){a.Md=!0;a.m&&a.m.I&&(a.m.X(),a.m.Cb(),a.hn())}
function Wd(a,b){if(b!==null){var c=a.fj(b);b=wh(a,b,c);if(!(b instanceof Error)){if(c=a.bq)if(c=c.call(a,b),b=wh(a,b,c),b instanceof Error)return;c=a.m;if(!c||!c.disposed){var d=a.Ab;d===b?a.Xg(b):(c&&F==0&&G(new (I("change"))(c,"field",a.name||null,d,b)),a.Xg(b),a.Md&&vh(a))}}}}function wh(a,b,c){if(c===null)return a.Md&&vh(a),Error();c!==void 0&&(b=c);return b}g.fj=function(a){return a===null||a===void 0?null:a};g.Xg=function(a){this.Ab=a;this.Md=!0};
g.Td=function(a){if(this.m&&this.m.j&&(a=this.m.j.Id(a))){if(a.Uf)throw Error("Tried to call gesture.setStartField, but the gesture had already been started.");a.lg||(a.lg=this)}};g.Uh=function(a){a||a===""||(a=this.m);var b=oh(this);b?b.ec=a:this.Xp=a};function oh(a){return a.Zn||a.N()}g.Lc=function(){for(var a=null,b=this.m,c=b.v,d=0;d<b.v.length;d++)for(var e=c[d],f=e.ea,h=0;h<f.length;h++)if(f[h]===this){a=e;break}return a};g.Do=function(){return!1};
g.rd=function(a){a?(this.vb.appendChild(a),this.ed=a):this.ed=null};g.$d=function(a){a?(this.vb.appendChild(a),this.od=a):this.od=null};g.hn=function(){var a=this.m.j;a.vh&&this.ed&&a.fh().oc();a.vh&&this.od&&a.hh("local_marker_1").oc()};function xh(a,b,c){this.Ti=null;xh.i.constructor.call(this,a,null,c);c||(this.Ti=b||null)}L(xh,mh);xh.prototype.ik="";xh.L=function(a){var b=sb(a.text);return new xh(b,void 0,a)};xh.prototype.vg=!1;xh.prototype.Og=function(a){xh.i.Og.call(this,a);this.Ti=a["class"]};xh.prototype.pj=function(){qh(this);this.Ti&&xc(this.ib,this.Ti)};xh.prototype.fj=function(a){return a===null||a===void 0?null:String(a)};E(ed,"field_label",xh);function yh(a,b,c,d){if(a!=5&&!b)throw Error("Value inputs and statement inputs must have non-empty name.");this.type=a;this.name=b;this.m=c;this.connection=d;this.ea=[]}g=yh.prototype;g.align=-1;g.je=!0;g.A=function(){return this.m};
function zh(a,b,c,d){if(b<0||b>a.ea.length)throw Error("index "+b+" out of bounds.");if(!(c||c==""&&d))return b;typeof c=="string"&&(c=eg({type:"field_label",text:c}));if(c.m)throw Error("Field already bound to a block.");c.m=a.m;a.m.I&&(c.S(),c.Sa());c.name=d;c.Da(a.isVisible());c.zm&&(b=zh(a,b,c.zm));a.ea.splice(b,0,c);++b;c.Ym&&(b=zh(a,b,c.Ym));a.m.I&&(a.m=a.m,a.m.X(),a.m.Cb());return b}g.isVisible=function(){return this.je};
g.Da=function(a){if(this.je!=a){this.je=a;for(var b=0,c;c=this.ea[b];b++)c.Da(a);if(this.connection){this.connection=this.connection;if(a)Ah(this.connection);else if(b=this.connection,Bh(b,!1),b.J)for(b=Ab(b.G(),!1),c=0;c<b.length;c++){for(var d=b[c],e=d.qc(!0),f=0;f<e.length;f++)Bh(e[f],!1);d=wg(d);for(f=0;f<d.length;f++)d[f].Da(!1)}if(b=this.connection.G())b.N().style.display=a?"block":"none"}}};g.xh=function(){for(var a=0,b;b=this.ea[a];a++)b.xh()};
g.gg=function(a){if(!this.connection)throw Error("This input does not have a connection.");this.connection.gg(a)};g.Sh=function(a){if(!this.connection)throw Error("This input does not have a connection.");this.connection.Sh(a)};g.Of=function(){if(!this.connection)throw Error("This input does not have a connection.");return this.connection.Of()};g.S=function(){if(this.m.j.I)for(var a=0;a<this.ea.length;a++)this.ea[a].S()};
g.dispose=function(){for(var a=0,b;b=this.ea[a];a++)b.dispose();this.connection&&this.connection.dispose();this.m=null};function Hf(a,b,c){if(Ch&&typeof Ch.prototype[b]!="undefined")throw Error('Block prototypeName "'+b+'" conflicts with Blockly.Generator members.');this.id=c&&!a.Gb(c)?c:ub();a.Dk[this.id]=this;this.C=this.B=this.s=null;this.v=[];this.jd=void 0;this.disabled=!1;this.ec="";this.contextMenu=!0;this.Sc=null;this.bd=[];this.so=this.kp=this.lo=!0;this.ue=this.T=!1;this.lc={text:null,Ap:!1,size:new Ua(160,80)};this.jq=new x(0,0);this.j=a;this.Kb=a.Nd;this.o=a.o;this.Yf=!1;this.Mc=void 0;this.I=null;if(b){this.type=
b;c=Zf[b];if(!c||typeof c!="object")throw TypeError("Unknown block type: "+b);yd(this,c)}a.Li(this);a.vd[this.type]||(a.vd[this.type]=[]);a.vd[this.type].push(this);(a=nd)||H(!0);b=od;try{typeof this.S=="function"&&(od=!1,this.S(),od=b),F==0&&G(new (I("create"))(this))}finally{a||H(!1),od=b}this.bs=this.jd;if(typeof this.onchange=="function"){if((a=this.onchange)&&typeof a!="function")throw Error("onchange must be a function.");this.Eh&&yb(this.j.Ka,this.Eh);if(this.onchange=a)this.Eh=a.bind(this),
Mf(this.j,this.Eh)}}g=Hf.prototype;g.data=null;g.disposed=!1;g.Ub="#000000";g.Wh="";
g.dispose=function(a){if(this.j){this.Eh&&yb(this.j.Ka,this.Eh);ce(this,a);F==0&&G(new (I("delete"))(this));F++;try{if(this.j){this.j.Rj(this);var b=this.j;b.vd[this.type].splice(b.vd[this.type].indexOf(this),1);b.vd[this.type].length||delete b.vd[this.type];delete this.j.Dk[this.id];this.j=null}N==this&&(N=null);for(var c=this.bd.length-1;c>=0;c--)this.bd[c].dispose(!1);c=0;for(var d;d=this.v[c];c++)d.dispose();this.v.length=0;var e=this.qc(!0);c=0;for(var f;f=e[c];c++)f.dispose()}finally{F--,this.disposed=
!0}}};function ce(a,b){if(a.s){var c=null;a.s.isConnected()&&(c=a.s.J,a.s.disconnect());if(c&&b){a:{b=null;for(var d=0;d<a.v.length;d++){var e=a.v[d].connection;if(e&&e.type==1&&e.J){if(b){a=null;break a}b=e}}a=b}a&&a.isConnected()&&!a.G().T&&(a=a.J,a.disconnect(),tf(a,c,!1)==0?c.connect(a):a.im(c))}}else a.C&&(c=null,a.C.isConnected()&&(c=a.C.J,a.C.disconnect()),d=Bb(a),b&&d&&!d.T&&(a=a.B.J,a.disconnect(),c&&tf(c,a,!1)==0&&c.connect(a)))}
g.qc=function(){var a=[];this.s&&a.push(this.s);this.C&&a.push(this.C);this.B&&a.push(this.B);for(var b=0,c;c=this.v[b];b++)c.connection&&a.push(c.connection);return a};g.yj=function(a){for(var b=this.B;b;){var c=b.G();if(!c||a&&c.T)return b;b=c.B}return null};g.Cb=function(){};g.getParent=function(){return this.Sc};function be(a,b){for(var c=0,d;d=a.v[c];c++)if(d.connection&&d.connection.G()==b)return d;return null}
function Dh(a){do{var b=a;a=a.getParent();if(!a)return null}while(Bb(a)==b);return a}function Bb(a){return a.B&&a.B.G()}g.rc=function(){var a=this;do{var b=a;a=b.Sc}while(a);return b};function Bd(a,b){if(!b)return a.bd;b=[];for(var c=0,d;d=a.v[c];c++)d.connection&&(d=d.connection.G())&&b.push(d);(a=Bb(a))&&b.push(a);return b}
g.Wj=function(a){if(a!=this.Sc){if(this.Sc){yb(this.Sc.bd,this);if(this.C&&this.C.isConnected())throw Error("Still connected to previous block.");if(this.s&&this.s.isConnected())throw Error("Still connected to parent block.");this.Sc=null}else this.j.Rj(this);(this.Sc=a)?a.bd.push(this):this.j.Li(this)}};function Ab(a,b){var c=[a];a=Bd(a,b);for(var d,e=0;d=a[e];e++)c.push.apply(c,Ab(d,b));return c}function Ed(a){return a.lo&&!a.T&&!(a.j&&a.j.options.readOnly)}
g.Na=function(){return this.kp&&!this.T&&!(this.j&&this.j.options.readOnly)};g.Nm=function(a){this.kp=a};g.Sm=function(a){this.T=a};g.Lb=function(){return this.Yf};g.Mp=function(a){this.Yf=a};g.Zb=function(){return this.so&&!(this.j&&this.j.options.readOnly)};g.Mm=function(a){this.so=a;a=0;for(var b;b=this.v[a];a++)for(var c=0,d;d=b.ea[c];c++)nh(d)};
g.tl=function(a,b){var c=this.qc(!0);a=a.qc(!0);if(c.length!=a.length)throw Error("Connection lists did not match in length.");for(var d=0;d<a.length;d++)if(a[d]==b)return c[d];return null};g.Uh=function(a){this.ec=a};g.rl=function(){return this.Ub};g.Uj=function(a){this.Ub=Cb(a).kh};g.cf=function(a){this.Wh=a};
function Rd(a,b){if(typeof b!=="string")throw TypeError("Blockly.Block.prototype.getField expects a string with the field name but received "+(b===void 0?"nothing":b+" of type "+typeof b)+" instead");for(var c=0,d;d=a.v[c];c++)for(var e=0,f;f=d.ea[e];e++)if(f.name===b)return f;return null}function Td(a){for(var b=0,c;c=a.v[b];b++)for(var d=0;c.ea[d];d++);return[]}function Cf(a,b){return(a=Rd(a,b))?a.Ab:null}
g.Rm=function(a,b){if(a){b===void 0&&(b=null);if(!this.C){if(this.s)throw Error("Remove output connection prior to adding previous connection.");this.C=this.wh(4)}this.C.gg(b)}else if(this.C){if(this.C.isConnected())throw Error("Must disconnect previous statement before removing connection.");this.C.dispose();this.C=null}};
g.Om=function(a,b){if(a)b===void 0&&(b=null),this.B||(this.B=this.wh(3)),this.B.gg(b);else if(this.B){if(this.B.isConnected())throw Error("Must disconnect next statement before removing connection.");this.B.dispose();this.B=null}};
g.Pm=function(a,b){if(a){b===void 0&&(b=null);if(!this.s){if(this.C)throw Error("Remove previous connection prior to adding output connection.");this.s=this.wh(2)}this.s.gg(b)}else if(this.s){if(this.s.isConnected())throw Error("Must disconnect output value before removing connection.");this.s.dispose();this.s=null}};g.bf=function(a){this.jd!=a&&(G(new (I("change"))(this,"inline",null,this.jd,a)),this.jd=a)};
function dg(a){if(a.jd!=void 0)return a.jd;for(var b=1;b<a.v.length;b++)if(a.v[b-1].type==5&&a.v[b].type==5)return!1;for(b=1;b<a.v.length;b++)if(a.v[b-1].type==1&&a.v[b].type==5)return!0;return!1}g.isEnabled=function(){return!this.disabled};g.Tc=function(a){this.isEnabled()!=a&&(G(new (I("change"))(this,"disabled",null,this.disabled,!a)),this.disabled=!a)};function Eh(a){for(a=Dh(a);a;){if(a.disabled)return!0;a=Dh(a)}return!1}g.isCollapsed=function(){return this.ue};
g.Ze=function(a){this.ue!=a&&(G(new (I("change"))(this,"collapsed",null,this.ue,a)),this.ue=a)};
g.toString=function(a,b){function c(m){var q=m.Ef;!q&&m.J&&(q=m.J.Ef);return!!q&&(q.indexOf("Boolean")!=-1||q.indexOf("Number")!=-1)}function d(){h&&h.getType()==k.getType()&&h.M==k.M&&(h=null)}var e=[];b=b||"?";var f=Qf;Qf=!0;for(var h=Uf(this),k=h;h;){switch(h.getType()){case "input":var l=h.M;h.Ld()?c(l)&&e.push("("):e.push(b);break;case "field":l=h.M,l.name!="_TEMP_COLLAPSED_FIELD"&&e.push(uh(l))}l=h;h=l.Ld()||l.next();if(!h){h=l.Ud();for(d();h&&!h.next();)h=h.Ud(),d(),h&&h.getType()=="input"&&
c(h.M)&&e.push(")");h&&(h=h.next())}}Qf=f;for(b=2;b<e.length;b++)e[b-2]=="("&&e[b]==")"&&(e[b-2]=e[b-1],e.splice(b-1,2));e=e.reduce(function(m,q){return m+(m.substr(-1)=="("||q==")"?"":" ")+q},"");e=e.trim()||"???";a&&e.length>a&&(e=e.substring(0,a-3)+"...");return e};function Fh(a,b){var c=eg(b);return!c&&b.alt?typeof b.alt=="string"?(b=Gh(b.alt))?Fh(a,b):null:Fh(a,b.alt):c}function Hh(a){return a=="input_value"||a=="input_statement"||a=="input_dummy"}
function Gh(a){return(a=a.trim())?{type:"field_label",text:a}:null}g.zf=function(a,b){var c=null;if(a==1||a==3)c=this.wh(a);a=new yh(a,b,this,c);this.v.push(a);return a};g.Em=function(a,b){for(var c=0,d;d=this.v[c];c++)if(d.name==a)return d.dispose(),this.v.splice(c,1),!0;if(b)return!1;throw Error("Input not found: "+a);};function Sd(a,b){for(var c=0,d;d=a.v[c];c++)if(d.name==b)return d;return null}function Ih(a,b){return(a=Sd(a,b))&&a.connection&&a.connection.G()}
g.hg=function(a){this.lc.text!=a&&(G(new (I("change"))(this,"comment",null,this.lc.text,a)),this.lc.text=a)};g.na=function(){return this.jq};g.moveBy=function(a,b){if(this.Sc)throw Error("Block has parent.");var c=new (I("move"))(this);this.jq.translate(a,b);ae(c);G(c)};g.wh=function(a){return new qf(this,a)};function Jh(){this.uc=[];this.Ye=this.Ua=this.Jj=this.Hj=this.Gj=this.cd=this.Ij=this.Ee=this.om=null}g=Jh.prototype;
g.X=function(a){var b=document.createElement("div");b.className="blocklyMenu goog-menu blocklyNonSelectable";b.tabIndex=0;this.Ye&&b.setAttribute("role",this.Ye);this.Ua=b;for(var c=0,d;d=this.uc[c];c++)b.appendChild(d.xa());this.Ij=z(b,"mouseover",this,this.Qr,!0);this.cd=z(b,"click",this,this.Lr,!0);this.Gj=z(b,"mouseenter",this,this.Or,!0);this.Hj=z(b,"mouseleave",this,this.Pr,!0);this.Jj=z(b,"keydown",this,this.Mr);a.appendChild(b)};
g.focus=function(){var a=this.Ua;a&&(a.focus({preventScroll:!0}),xc(a,"blocklyFocused"))};g.Rh=function(a){this.Ye=a};g.dispose=function(){this.Ij&&(B(this.Ij),this.Ij=null);this.cd&&(B(this.cd),this.cd=null);this.Gj&&(B(this.Gj),this.Gj=null);this.Hj&&(B(this.Hj),this.Hj=null);this.Jj&&(B(this.Jj),this.Jj=null);for(var a=0,b;b=this.uc[a];a++)b.dispose();this.Ua=null};
function Kh(a,b){for(var c=a.Ua;b&&b!=c;){if(zc(b,"blocklyMenuItem"))for(var d=0,e;e=a.uc[d];d++)if(e.Ua==b)return e;b=b.parentElement}return null}
g.zc=function(a){var b=this.Ee;b&&(b.zc(!1),this.Ee=null);if(a){a.zc(!0);this.Ee=a;b=this.Ua;var c=a.Ua,d=Xa(c),e=Xa(b);var f=Wa(b,"borderLeftWidth");Wa(b,"borderRightWidth");var h=Wa(b,"borderTopWidth");Wa(b,"borderBottomWidth");f=d.x-e.x-parseFloat(f);d=d.y-e.y-parseFloat(h);c=new Ua(c.offsetWidth,c.offsetHeight);e=b.clientHeight-c.height;h=b.scrollLeft;var k=b.scrollTop;h+=Math.min(f,Math.max(f-(b.clientWidth-c.width),0));k+=Math.min(d,Math.max(d-e,0));f=new x(h,k);b.scrollLeft=f.x;b.scrollTop=
f.y;pf(b,"activedescendant",a.cb())}};function Lh(a,b,c){b+=c;for(var d;d=a.uc[b];){if(d.isEnabled()){a.zc(d);break}b+=c}}g.Qr=function(a){(a=Kh(this,a.target))&&(a.isEnabled()?this.Ee!=a&&this.zc(a):this.zc(null))};g.Lr=function(a){var b=this.om;this.om=null;b&&typeof a.clientX=="number"&&Ka(b,new x(a.clientX,a.clientY))<1||(a=Kh(this,a.target))&&a.isEnabled()&&a.Jg&&a.Jg(a)};g.Or=function(){this.focus()};g.Pr=function(){if(this.Ua){var a=this.Ua;a&&(a.blur(),yc(a,"blocklyFocused"));this.zc(null)}};
g.Mr=function(a){if(this.uc.length&&!(a.shiftKey||a.ctrlKey||a.metaKey||a.altKey)){var b=this.Ee;switch(a.keyCode){case 13:case 32:b&&b.isEnabled()&&b.Jg&&b.Jg(b);break;case 38:b=this.uc.indexOf(this.Ee);Lh(this,b<0?this.uc.length:b,-1);break;case 40:Lh(this,this.uc.indexOf(this.Ee),1);break;case 33:case 36:Lh(this,-1,1);break;case 34:case 35:Lh(this,this.uc.length,-1);break;default:return}a.preventDefault();a.stopPropagation()}};
g.getSize=function(){var a=this.Ua,b=Va(a);b.height=a.scrollHeight;return b};var Mh=0;function Nh(a,b){this.Nk=a;this.Ab=b;this.hj=!0;this.Ua=null;this.Km=!1;this.Ye=null;this.Po=this.Jk=this.Ik=!1;this.Jg=null}g=Nh.prototype;
g.xa=function(){var a=document.createElement("div");a.id="blockly-"+(Mh++).toString(36);this.Ua=a;a.className="blocklyMenuItem goog-menuitem "+(this.hj?"":"blocklyMenuItemDisabled goog-menuitem-disabled ")+(this.Jk?"blocklyMenuItemSelected goog-option-selected ":"")+(this.Po?"blocklyMenuItemHighlight goog-menuitem-highlight ":"")+(this.Km?"blocklyMenuItemRtl goog-menuitem-rtl ":"");var b=document.createElement("div");b.className="blocklyMenuItemContent goog-menuitem-content";if(this.Ik){var c=document.createElement("div");
c.className="blocklyMenuItemCheckbox goog-menuitem-checkbox";b.appendChild(c)}c=this.Nk;typeof this.Nk=="string"&&(c=document.createTextNode(this.Nk));b.appendChild(c);a.appendChild(b);this.Ye&&a.setAttribute("role",this.Ye);pf(a,"selected",this.Ik&&this.Jk||!1);pf(a,"disabled",!this.hj);return a};g.dispose=function(){this.Ua=null};g.cb=function(){return this.Ua.id};g.Rh=function(a){this.Ye=a};
g.zc=function(a){this.Po=a;var b=this.Ua;b&&this.isEnabled()&&(a?(xc(b,"blocklyMenuItemHighlight"),xc(b,"goog-menuitem-highlight")):(yc(b,"blocklyMenuItemHighlight"),yc(b,"goog-menuitem-highlight")))};g.isEnabled=function(){return this.hj};g.Tc=function(a){this.hj=a};function Oh(a,b,c){a.Jg=b.bind(c)};var jh={$i:null,tb:null,show:function(a,b,c){ih(c);if(b.length){var d=jh.Ds(b,c);jh.tb=d;jh.Xe(d,a,c);setTimeout(function(){d.focus()},1);jh.$i=null}else jh.qb()},Ds:function(a,b){var c=new Jh;c.Rh("menu");for(var d=0,e;e=a[d];d++){var f=new Nh(e.text);f.Km=b;f.Rh("menuitem");c.uc.push(f);f.Tc(e.enabled);e.enabled&&Oh(f,function(){jh.qb();this.wa(this.scope)},e)}return c},Xe:function(a,b,c){var d=document.body;var e=document.documentElement;d=new x(d.scrollLeft||e.scrollLeft,d.scrollTop||e.scrollTop);
d=new Na(d.y,document.documentElement.clientHeight+d.y,d.x,document.documentElement.clientWidth+d.x);var f=new Na(b.clientY+d.top,b.clientY+d.top,b.clientX+d.left,b.clientX+d.left);jh.pr(a);b=a.getSize();c&&(f.left+=b.width,f.right+=b.width,d.left+=b.width,d.right+=b.width);e=f.bottom+b.height>=d.bottom?f.top-b.height:f.bottom;c?(c=Math.max(f.right-b.width,d.left),c=Math.min(c,d.right-b.width)):(c=Math.min(f.left,d.right-b.width),c=Math.max(c,d.left));e<0?lh(c,0,b.height+e):lh(c,e,b.height);a.focus()},
pr:function(a){a.X(dh);var b=a.Ua;xc(b,"blocklyContextMenu");z(b,"contextmenu",null,ib);a.focus()},qb:function(){eh==jh&&kh();jh.$i=null},dispose:function(){jh.tb&&(jh.tb.dispose(),jh.tb=null)},Vt:function(a,b){return function(){F++;try{var c=Id(b,a.j),d=a.na();d.x=a.o?d.x-28:d.x+28;d.y+=56;c.moveBy(d.x,d.y)}finally{F--}F==0&&!c.T&&G(new (I("create"))(c));c.select()}}};function Ph(){Qh=this;this.bc=Object.create(null)}var Qh=null;Ph.prototype.register=function(a){if(this.bc[a.id])throw Error('Menu item with ID "'+a.id+'" is already registered.');this.bc[a.id]=a};Ph.prototype.unregister=function(a){if(!this.bc[a])throw Error('Menu item with ID "'+a+'" not found.');delete this.bc[a]};Ph.prototype.getItem=function(a){return this.bc[a]||null};
function Rh(a,b){var c=[],d=Qh.bc;Object.keys(d).forEach(function(e){e=d[e];if(a==e.Pb){var f=e.Ba(b);f!="hidden"&&(e={text:typeof e.ob=="function"?e.ob(b):e.ob,enabled:f=="enabled",wa:e.wa,scope:b,weight:e.weight},c.push(e))}});c.sort(function(e,f){return e.weight-f.weight});return c}new Ph;function Sh(a,b,c){Sh.i.constructor.call(this,c);this.op=a;this.mp=b}L(Sh,ee);Sh.prototype.type="selected";Sh.prototype.P=function(){var a=Sh.i.P.call(this);a.oldElementId=this.op;a.newElementId=this.mp;return a};Sh.prototype.L=function(a){Sh.i.L.call(this,a);this.op=a.oldElementId;this.mp=a.newElementId};E(dd,"selected",Sh);function Th(a,b){Th.i.constructor.call(this,a,b);this.Hc=a.j.Yi[b];this.ho=a.j.Yi[Ca[b]];this.Ve=new x(0,0);this.ud=Uh;this.J=null}L(Th,qf);var Uh=-1;g=Th.prototype;g.dispose=function(){Th.i.dispose.call(this);this.ud==1&&Vh(this.Hc,this,this.y)};g.A=function(){return Th.i.A.call(this)};g.G=function(){return Th.i.G.call(this)};function wf(a,b){var c=a.x-b.x;a=a.y-b.y;return Math.sqrt(c*c+a*a)}
function Wh(a,b){if(!a.m.j.Jb()){var c=a.m.rc();if(!c.Kb){var d=!1;if(!c.Na()){c=b.A().rc();if(!c.Na())return;b=a;d=!0}var e=N==c;e||c.Ki();var f=b.x+28+Math.floor(Math.random()*10)-a.x,h=b.y+28+Math.floor(Math.random()*10)-a.y;d&&(h=-h);c.o&&(f=b.x-28-Math.floor(Math.random()*10)-a.x);c.moveBy(f,h);e||c.Mh()}}}
g.moveTo=function(a,b){if(this.ud==Uh){var c=this.Hc;c.Aa.splice(Xh(c,b),0,this);this.ud=1}else this.ud==1&&(Vh(this.Hc,this,this.y),c=this.Hc,c.Aa.splice(Xh(c,b),0,this));this.x=a;this.y=b};g.moveBy=function(a,b){this.moveTo(this.x+a,this.y+b)};function Yh(a,b){a.moveTo(b.x+a.Ve.x,b.y+a.Ve.y)}function Zh(a,b,c){a.Ve.x=b;a.Ve.y=c}
function $h(a){var b=a.J.x-a.x,c=a.J.y-a.y;if(b!=0||c!=0){a=a.G();var d=a.N();if(!d)throw Error("block is not rendered.");d=lb(d);a.N().setAttribute("transform","translate("+(d.x-b)+","+(d.y-c)+")");Cg(a,-b,-c)}}
g.closest=function(a,b){var c=this.ho;if(c.Aa.length){var d=this.y,e=this.x;this.x=e+b.x;this.y=d+b.y;var f=Xh(c,this.y);b=null;for(var h=a,k,l=f-1;l>=0&&Math.abs(c.Aa[l].y-this.y)<=a;)k=c.Aa[l],tf(this,k,!0,h)==0&&(b=k,h=wf(k,this)),l--;for(;f<c.Aa.length&&Math.abs(c.Aa[f].y-this.y)<=a;)k=c.Aa[f],tf(this,k,!0,h)==0&&(b=k,h=wf(k,this)),f++;this.x=e;this.y=d;a={connection:b,Pj:h}}else a={connection:null,Pj:a};return a};
function Bh(a,b){b&&a.ud==1||!b&&a.ud==0||a.m.Kb||(b?(b=a.Hc,b.Aa.splice(Xh(b,a.y),0,a),a.ud=1):(a.ud==1&&Vh(a.Hc,a,a.y),a.ud=0))}function Ah(a){Bh(a,!0);var b=[];if(a.type!=1&&a.type!=3)return b;if(a=a.G()){if(a.isCollapsed()){var c=[];a.s&&c.push(a.s);a.B&&c.push(a.B);a.C&&c.push(a.C)}else c=a.qc(!0);for(var d=0;d<c.length;d++)b.push.apply(b,Ah(c[d]));b.length||(b[0]=a)}return b}
g.im=function(a){var b=this.A();if(od){var c=nd;setTimeout(function(){b.disposed||b.getParent()||(H(c),Wh(this,a),H(!1))}.bind(this),250)}};g.Uk=function(a,b){Th.i.Uk.call(this,a,b);a.I&&a.X();b.I&&(Md(b),b.X(),b.N().style.display="block")};g.Nh=function(){Th.i.Nh.call(this);var a=this.G();a&&(a.nh(),a.X(!1),a=this.A(),a.I&&a.X())};g.lp=function(a){return ai(this.ho,this,a)};
g.Wi=function(a){Th.i.Wi.call(this,a);var b=this.A();a=a.A();var c=b.I,d=a.I;c&&Md(b);d&&Md(a);c&&d&&(this.type==3||this.type==4?a.X():b.X());if(b=be(b,a))b=b.isVisible(),a.N().style.display=b?"block":"none"};g.up=function(){!this.isConnected()||this.J&&tf(this,this.J,!1)==0||(ce(sf(this)?this.G():this.m),this.m.Cb())};function bi(){bi.i.constructor.call(this)}L(bi,bh);g=bi.prototype;g.next=function(){var a=this.nc;if(!a)return null;(a=ci(this,a,this.aq))&&ah(this,a);return a};g.Ld=function(){return this.next()};g.Xd=function(){var a=this.nc;if(!a)return null;(a=di(this,a,this.aq))&&ah(this,a);return a};g.Ud=function(){return this.Xd()};function ci(a,b,c){if(!b)return null;var d=b.Ld()||b.next();if(c(d))return d;if(d)return ci(a,d,c);b=ei(a,b.Ud());return c(b)?b:b?ci(a,b,c):null}
function di(a,b,c){if(!b)return null;var d=b.Xd();d=d?fi(a,d):b.Ud();return c(d)?d:d?di(a,d,c):null}g.aq=function(a){var b=!1;a=a&&a.getType();if(a=="output"||a=="input"||a=="field"||a=="next"||a=="previous"||a=="workspace")b=!0;return b};function ei(a,b){if(!b)return null;var c=b.next();return c?c:ei(a,b.Ud())}function fi(a,b){if(!b.Ld())return b;for(b=b.Ld();b.next();)b=b.next();return fi(a,b)}E(cd,"basicCursor",bi);function gi(a,b,c){this.l=D(lc,{},null);this.l.ei="";this.style=hi(a.ya.D(),null);this.za=a.ya.gp(this.l,this.style);this.Fm=this.I=!1;this.j=a;this.C=this.B=this.s=null;this.ki=wb()&&!!a.Bb;var d=this.za.Ha;d.ec=this;hf(d);gi.i.constructor.call(this,a,b,c);this.l.dataset?this.l.dataset.id=this.id:Ya&&this.l.setAttribute("data-id",this.id)}L(gi,Hf);g=gi.prototype;g.height=0;g.width=0;g.gk=null;
g.nh=function(){if(!this.j.I)throw TypeError("Workspace is headless.");for(var a=0,b;b=this.v[a];a++)b.S();b=wg(this);for(a=0;a<b.length;a++)b[a].bu();this.Sa();rg(this.za,"blocklyDraggable",this.Na());a=this.N();this.j.options.readOnly||this.Ar||!a||z(a,"mousedown",this,this.Td);this.Ar=!0;a.parentNode||this.j.va.appendChild(a)};
g.select=function(){if(this.T&&this.getParent())this.getParent().select();else if(N!=this){var a=null;if(N){a=N.id;F++;try{Ng(N)}finally{F--}}a=new (I("selected"))(a,this.id,this.j.id);G(a);N=this;this.Ki()}};function Ng(a){if(N==a){var b=new (I("selected"))(a.id,null,a.j.id);b.Za=a.j.id;G(b);N=null;a.Mh()}}g.Se=null;g.kc=null;g.gq=null;function wg(a){var b=[];a.Se&&b.push(a.Se);a.kc&&b.push(a.kc);a.gq&&b.push(a.gq);return b}
g.Wj=function(a){var b=this.Sc;if(a!=b){Dc();gi.i.Wj.call(this,a);Ec();var c=this.N();if(!this.j.Il&&c){var d=this.na();a?(a.N().appendChild(c),a=this.na(),Cg(this,a.x-d.x,a.y-d.y)):b&&(this.j.va.appendChild(c),this.translate(d.x,d.y));this.Sa()}}};g.na=function(){var a=0,b=0,c=this.ki?this.j.Bb.Ic:null,d=this.N();if(d){do{var e=lb(d);a+=e.x;b+=e.y;this.ki&&this.j.Bb.Ic.firstChild==d&&(e=this.j.Bb.ul(),a+=e.x,b+=e.y);d=d.parentNode}while(d&&d!=this.j.va&&d!=c)}return new x(a,b)};
g.moveBy=function(a,b){if(this.Sc)throw Error("Block has parent.");var c=F==0;if(c)var d=new (I("move"))(this);var e=this.na();this.translate(e.x+a,e.y+b);Cg(this,a,b);c&&(ae(d),G(d));Nd(this.j)};g.translate=function(a,b){this.N().setAttribute("transform","translate("+a+","+b+")")};g.moveTo=function(a){var b=this.na();this.moveBy(a.x-b.x,a.y-b.y)};function zg(a,b){a.ki?a.j.Bb.qg(b.x,b.y):(a.l.ei="translate("+b.x+","+b.y+")",a.l.setAttribute("transform",a.l.ei+a.l.Vh))}
function ii(a){if(a.j&&!a.j.Jb()&&!a.getParent()&&!a.Kb){var b=a.j.Yb;if(b&&b.Rs){var c=b.Wm,d=c/2,e=a.na();b=Math.round((e.x-d)/c)*c+d-e.x;c=Math.round((e.y-d)/c)*c+d-e.y;b=Math.round(b);c=Math.round(c);b==0&&c==0||a.moveBy(b,c)}}}g.Mf=function(){var a=this.na(),b=yg(this);if(this.o){var c=a.x-b.width;var d=a.x}else c=a.x,d=a.x+b.width;return new Na(a.y,a.y+b.height,c,d)};g.xh=function(){this.za.Rg=this.j.ya.D();for(var a=0,b;b=this.v[a];a++)b.xh()};
g.Ze=function(a){this.ue!=a&&(gi.i.Ze.call(this,a),a?this.I&&this.X():ji(this))};function ji(a){for(var b=a.isCollapsed(),c=0,d;d=a.v[c];c++)d.name!="_TEMP_COLLAPSED_INPUT"&&d.Da(!b);if(b){d=wg(a);for(c=0;b=d[c];c++)b.Da(!1);c=a.toString(30);(d=Rd(a,"_TEMP_COLLAPSED_FIELD"))?Wd(d,c):(a=d=Sd(a,"_TEMP_COLLAPSED_INPUT")||a.zf(5,"_TEMP_COLLAPSED_INPUT"),c=new xh(c),zh(a,a.ea.length,c,"_TEMP_COLLAPSED_FIELD"))}else Md(a),a.Em("_TEMP_COLLAPSED_INPUT")}
g.Td=function(a){var b=this.j&&this.j.Id(a);if(b){if(b.Uf)throw Error("Tried to call gesture.handleBlockStart, but the gesture had already been started.");Xg(b,this);b.vc=a}};g.showHelp=function(){var a=typeof this.Vf=="function"?this.Vf():this.Vf;a&&window.open(a)};g.Yj=function(a){if(this.j.options.readOnly||!this.contextMenu)var b=null;else b=Rh("block",{block:this}),this.qr&&this.qr(b);b&&b.length&&(jh.show(a,b,this.o),jh.$i=this)};
function Cg(a,b,c){if(a.I){for(var d=a.qc(!1),e=0;e<d.length;e++)d[e].moveBy(b,c);d=wg(a);for(e=0;e<d.length;e++)d[e].lr();for(e=0;e<a.bd.length;e++)Cg(a.bd[e],b,c)}}g.af=function(a){if(a){var b=this.N();b.ei="";b.Vh="";xf=xf.concat(this.qc(!0));xc(this.l,"blocklyDragging")}else xf=[],yc(this.l,"blocklyDragging");for(b=0;b<this.bd.length;b++)this.bd[b].af(a)};g.Nm=function(a){gi.i.Nm.call(this,a);rg(this.za,"blocklyDraggable",a)};g.Mm=function(a){gi.i.Mm.call(this,a);a=wg(this);for(var b=0;b<a.length;b++)nh(a[b])};
g.Sm=function(a){gi.i.Sm.call(this,a);this.Sa()};g.Mp=function(a){this.Yf!=a&&(this.Yf=a)&&(this.Uj(this.j.ya.D().Jq),rg(this.za,"blocklyInsertionMarker",!0))};g.N=function(){return this.l};
g.dispose=function(a,b){if(this.j){ef=df=null;nf();mf(this.za.Ha);Dc();var c=this.j;N==this&&(Ng(this),ki(this.j));jh.$i==this&&jh.qb();if(b&&this.I){ce(this,a);b=this.j;var d=this.N();b.Ad.play("delete");var e=Dg(b,d);d=d.cloneNode(!0);d.ft=e.x;d.gt=e.y;d.setAttribute("transform","translate("+e.x+","+e.y+")");Fe(b).appendChild(d);d.Tn=d.getBBox();hg(d,b.o,new Date,b.scale)}this.I=!1;if(this.gk){for(var f in this.gk)clearTimeout(this.gk[f]);this.gk=null}f=wg(this);for(b=0;b<f.length;b++)f[b].dispose();
gi.i.dispose.call(this,!!a);Ac(this.l);Nd(c);this.l=null;Ec()}};g.Sa=function(){this.za.Sa(this);for(var a=wg(this),b=0;b<a.length;b++)a[b].Sa();for(a=0;b=this.v[a];a++)for(var c=0,d;d=b.ea[c];c++)d.Sa()};function Md(a){var b=Bd(a,!1);a.Sa();if(!a.isCollapsed()){a=0;for(var c;c=b[a];a++)c.I&&Md(c)}}g.Ir=function(){return this.kc};
g.hg=function(a){if(!Aa.Comment)throw Error("Missing require for Blockly.Comment");this.lc.text!=a&&(gi.i.hg.call(this,a),a=a!=null,!!this.kc==a?this.kc.Au():(a?this.kc=new Aa.Comment(this):(this.kc.dispose(),this.kc=null),this.I&&(this.X(),this.Cb())))};g.Tc=function(a){this.isEnabled()!=a&&(gi.i.Tc.call(this,a),this.I&&!Eh(this)&&Md(this))};g.zc=function(a){this.I&&this.za.Yp(a)};g.Ki=function(){rg(this.za,"blocklySelected",!0)};g.Mh=function(){rg(this.za,"blocklySelected",!1)};g.rl=function(){return this.style.ve};
g.Uj=function(a){gi.i.Uj.call(this,a);a=li(this.j.ya.D(),this.Ub);this.za.cf(a.style);this.style=a.style;this.Wh=a.name;this.Sa()};g.cf=function(a){var b=hi(this.j.ya.D(),a);this.Wh=a;if(b)this.Mc=b.Mc,this.za.cf(b),this.Ub=b.ve,this.style=b,this.Sa();else throw Error("Invalid style name: "+a);};function xg(a){do{var b=a.N(),c=b.parentNode,d=c.childNodes;d[d.length-1]!==b&&c.appendChild(b);a=a.getParent()}while(a)}g.Rm=function(a,b){gi.i.Rm.call(this,a,b);this.I&&(this.X(),this.Cb())};
g.Om=function(a,b){gi.i.Om.call(this,a,b);this.I&&(this.X(),this.Cb())};g.Pm=function(a,b){gi.i.Pm.call(this,a,b);this.I&&(this.X(),this.Cb())};g.bf=function(a){gi.i.bf.call(this,a);this.I&&(this.X(),this.Cb())};g.Em=function(a,b){a=gi.i.Em.call(this,a,b);this.I&&(this.X(),this.Cb());return a};g.zf=function(a,b){a=gi.i.zf.call(this,a,b);this.I&&(this.X(),this.Cb());return a};
function Ld(a,b){a.C&&Bh(a.C,b);a.s&&Bh(a.s,b);if(a.B){Bh(a.B,b);var c=a.B.G();c&&Ld(c,b)}if(!a.ue)for(c=0;c<a.v.length;c++){var d=a.v[c].connection;d&&(Bh(d,b),(d=d.G())&&Ld(d,b))}}g.qc=function(a){var b=[];if(a||this.I)if(this.s&&b.push(this.s),this.C&&b.push(this.C),this.B&&b.push(this.B),a||!this.ue){a=0;for(var c;c=this.v[a];a++)c.connection&&b.push(c.connection)}return b};g.yj=function(a){return gi.i.yj.call(this,a)};g.tl=function(a,b){return gi.i.tl.call(this,a,b)};
g.wh=function(a){return new Th(this,a)};g.Cb=function(){if(this.j&&!this.j.Jb()){var a=this.rc();if(!a.Kb)for(var b=this.qc(!1),c=0,d;d=b[c];c++){d.isConnected()&&sf(d)&&d.G().Cb();for(var e=d.lp(28),f=0,h;h=e[f];f++)d.isConnected()&&h.isConnected()||h.A().rc()!=a&&(sf(d)?Wh(h,d):Wh(d,h))}}};function Eg(a){var b=nd;setTimeout(function(){H(b);ii(a);H(!1)},125);setTimeout(function(){H(b);a.Cb();H(!1)},250)}g.getParent=function(){return gi.i.getParent.call(this)};g.rc=function(){return gi.i.rc.call(this)};
g.X=function(a){if(!this.Fm){this.Fm=!0;try{this.I=!0;Dc();this.isCollapsed()&&ji(this);this.j.ya.X(this);var b=this.na();this.C&&Yh(this.C,b);this.s&&Yh(this.s,b);for(var c=0;c<this.v.length;c++){var d=this.v[c].connection;d&&(Yh(d,b),d.isConnected()&&$h(d))}this.B&&(Yh(this.B,b),this.B.isConnected()&&$h(this.B));if(a!==!1){var e=this.getParent();e?e.X(!0):Nd(this.j)}Ec();this.hn()}finally{this.Fm=!1}}};g.hn=function(){this.j.vh&&this.za.Vg&&this.j.fh().oc();this.j.vh&&this.za.Ul&&this.j.hh("local_marker_1").oc()};
g.rd=function(a){this.za.rd(a)};g.$d=function(a){this.za.$d(a)};function yg(a){var b=a.height,c=a.width,d=Bb(a);d&&(d=yg(d),a=a.j.ya.D().lk,b+=d.height-a,c=Math.max(c,d.width));return{height:b,width:c}};function mi(){this.Aa=[]}function ni(a,b,c){if(!a.Aa.length)return-1;var d=Xh(a,c);if(d>=a.Aa.length)return-1;c=b.y;for(var e=d;e>=0&&a.Aa[e].y==c;){if(a.Aa[e]==b)return e;e--}for(e=d;e<a.Aa.length&&a.Aa[e].y==c;){if(a.Aa[e]==b)return e;e++}return-1}function Xh(a,b){if(!a.Aa.length)return 0;for(var c=0,d=a.Aa.length;c<d;){var e=Math.floor((c+d)/2);if(a.Aa[e].y<b)c=e+1;else if(a.Aa[e].y>b)d=e;else{c=e;break}}return c}
function Vh(a,b,c){b=ni(a,b,c);if(b==-1)throw Error("Unable to find connection in connectionDB.");a.Aa.splice(b,1)}function ai(a,b,c){function d(m){var q=f-e[m].x,n=h-e[m].y;Math.sqrt(q*q+n*n)<=c&&l.push(e[m]);return n<c}var e=a.Aa,f=b.x,h=b.y;a=0;for(var k=b=e.length-2;a<k;)e[k].y<h?a=k:b=k,k=Math.floor((a+b)/2);var l=[];b=a=k;if(e.length){for(;a>=0&&d(a);)a--;do b++;while(b<e.length&&d(b))}return l};function oi(a,b){oi.i.constructor.call(this,b);this.Vp=a}L(oi,ee);oi.prototype.type="theme_change";oi.prototype.P=function(){var a=oi.i.P.call(this);a.themeName=this.Vp;return a};oi.prototype.L=function(a){oi.i.L.call(this,a);this.Vp=a.themeName};E(dd,"theme_change",oi);function pi(a,b,c,d,e){pi.i.constructor.call(this,d);this.hc=a;this.fc=b;this.scale=c;this.Dh=e}L(pi,ee);pi.prototype.type="viewport_change";pi.prototype.P=function(){var a=pi.i.P.call(this);a.viewTop=this.hc;a.viewLeft=this.fc;a.scale=this.scale;a.oldScale=this.Dh;return a};pi.prototype.L=function(a){pi.i.L.call(this,a);this.hc=a.viewTop;this.fc=a.viewLeft;this.scale=a.scale;this.Dh=a.oldScale};E(dd,"viewport_change",pi);function qi(a){this.g=a}function ri(a){var b=0,c=0;a&&(b=a.ih(),c=a.Bl);return new Ua(b,c)}function si(a){var b=ri(ti(a.g,!0));return{width:b.width,height:b.height,position:a.g.Rb}}function ui(a){var b=ri(a.g.qa);return{width:b.width,height:b.height,position:a.g.Rb}}function vi(a){var b=0,c=ui(a),d=si(a),e=!!a.g.qa;a=!!ti(a.g,!0);var f=(e?c.position:d.position)==2;e&&f?b=c.width:a&&f&&(b=d.width);return{top:0,left:b}}
function wi(a,b){b=b?a.g.scale:1;var c=xi(a.g),d=ui(a),e=si(a),f=a.g.qa?d.position:e.position;if(a.g.qa){if(f==2||f==3)c.width-=d.width}else!ti(a.g,!0)||f!=2&&f!=3||(c.width-=e.width);return{height:c.height/b,width:c.width/b,top:-a.g.scrollY/b,left:-a.g.scrollX/b}}
qi.prototype.kj=function(){var a=this.g.scale;var b=[].concat(this.g.di);if(b.length){for(var c=b[0].Mf(),d=1;d<b.length;d++){var e=b[d];e.Lb&&e.Lb()||(e=e.Mf(),e.top<c.top&&(c.top=e.top),e.bottom>c.bottom&&(c.bottom=e.bottom),e.left<c.left&&(c.left=e.left),e.right>c.right&&(c.right=e.right))}b=c}else b=new Na(0,0,0,0);return{height:(b.bottom-b.top)*a,width:(b.right-b.left)*a,top:b.top*a,left:b.left*a}};
qi.prototype.Ce=function(a,b,c){a=a?this.g.scale:1;var d=b||wi(this,!1);c=c||this.kj();if(Lg(this.g)&&Mg(this.g))b={};else{b=Lg(this.g);var e=Mg(this.g),f=d||wi(this,!1);var h={};e||(h.top=f.top,h.bottom=f.top+f.height);b||(h.left=f.left,h.right=f.left+f.width);b=h}h=c.top+c.height;e=c.left+c.width;f=d.width;var k=d.height;var l=f/2,m=k/2;d=Math.min(c.top-m,h-k);h=Math.max(h+m,c.top+k);k=Math.min(c.left-l,e-f);c=Math.max(e+l,c.left+f);d=b.top!==void 0?b.top:d;e=b.left!==void 0?b.left:k;return{top:d/
a,left:e/a,width:((b.right!==void 0?b.right:c)-e)/a,height:((b.bottom!==void 0?b.bottom:h)-d)/a}};qi.prototype.Hb=function(){var a=ui(this),b=si(this),c=xi(this.g),d=vi(this),e=wi(this),f=this.kj(),h=this.Ce(!1,e,f);return{Yt:f.height,au:f.width,$t:f.top,Zt:f.left,scrollHeight:h.height,scrollWidth:h.width,scrollTop:h.top,scrollLeft:h.left,Ya:e.height,Oa:e.width,hc:e.top,fc:e.left,kb:d.top,ab:d.left,Sp:c.height,Tp:c.width,yu:a.width,xu:a.height,Rb:a.position,fu:b.width,du:b.height}};
E(jd,"default",qi);function yi(a,b){this.K=b;yi.i.constructor.call(this,a)}L(yi,qi);yi.prototype.kj=function(){try{var a=this.g.va.getBBox()}catch(c){a={height:0,y:0,width:0,x:0}}var b=this.g.scale;return{height:a.height*b,width:a.width*b,top:a.y*b,left:a.x*b}};yi.prototype.Ce=function(a,b,c){b=c||this.kj();c=this.K.rf*this.g.scale;a=a?this.g.scale:1;return{height:(b.height+2*c)/a,width:(b.width+b.left+c)/a,top:0,left:0}};function zi(a){var b=te;this.g=a;this.$h=b;this.Xh=[];this.Dd=Object.create(null)}g=zi.prototype;g.gd=function(){return this.$h};g.Th=function(a){var b=this.$h;this.$h=a;if(a=Ai(this.g))b&&yc(a,b.pc()),xc(a,this.$h.pc());for(b=0;a=this.Xh[b];b++)Bi(a);Xe()};g.subscribe=function(a,b,c){this.Dd[b]||(this.Dd[b]=[]);this.Dd[b].push({element:a,propertyName:c});a.style[c]=""};
g.unsubscribe=function(a){if(a)for(var b=Object.keys(this.Dd),c=0,d;d=b[c];c++){for(var e=this.Dd[d],f=e.length-1;f>=0;f--)e[f].element===a&&e.splice(f,1);this.Dd[d].length||delete this.Dd[d]}};g.dispose=function(){this.Dd=this.Xh=this.$h=null};function Ci(a,b){Ci.i.constructor.call(this,a,b);this.vj=!1;this.Db=Object.create(null);this.Pp=this.Ih=0;this.Vo=this.km=null}L(Ci,Og);g=Ci.prototype;g.Vk=function(a){this.Vo=this.Ea.options.ra&&this.Ea.options.ra.zp;Ci.i.Vk.call(this,a);!this.sj&&Nb(a)&&Di(this,a)};g.Un=function(a){this.km=z(document,"mousedown",null,this.Rr.bind(this),!0);this.Kj=z(document,"mousemove",null,this.Sf.bind(this),!0);this.Lj=z(document,"mouseup",null,this.nj.bind(this),!0);a.preventDefault();a.stopPropagation()};
g.Rr=function(a){!this.Jb()&&Nb(a)&&(Di(this,a),this.vj&&Ib())};g.Sf=function(a){if(this.Jb())Mb(a)&&!Lb(a)||Ci.i.Sf.call(this,a);else if(this.vj){if(Nb(a)){this.Db[Kb(a)]=Ei(this,a);var b=Object.keys(this.Db);if(this.Vo&&b.length===2){b=Object.keys(this.Db);b=Ka(this.Db[b[0]],this.Db[b[1]])/this.Pp;if(this.Ih>0&&this.Ih<Infinity){var c=b-this.Ih;c=c>0?c*5:c*6;var d=this.Ea,e=qb(a,Fe(d),Ue(d));d.zoom(e.x,e.y,c)}this.Ih=b;a.preventDefault()}else Ci.i.Sf.call(this,a)}Ib()}else Ci.i.Sf.call(this,a)};
g.nj=function(a){if(Nb(a)&&!this.Jb()){var b=Kb(a);this.Db[b]&&delete this.Db[b];Object.keys(this.Db).length<2&&(this.Db=Object.create(null),this.Ih=0)}!this.vj||this.Jb()?Mb(a)&&!Lb(a)||Ci.i.nj.call(this,a):(a.preventDefault(),a.stopPropagation(),this.dispose())};g.dispose=function(){Ci.i.dispose.call(this);this.km&&B(this.km)};function Di(a,b){a.Db[Kb(b)]=Ei(a,b);var c=Object.keys(a.Db);c.length==2&&(a.Pp=Ka(a.Db[c[0]],a.Db[c[1]]),a.vj=!0,b.preventDefault())}
function Ei(a,b){return a.Ea?new x(b.changedTouches?b.changedTouches[0].pageX:b.pageX,b.changedTouches?b.changedTouches[0].pageY:b.pageY):null};function Fi(a){this.tm=a;this.Dg=Object.create(null)}g=Fi.prototype;g.Ml=null;g.dispose=function(){this.Dg=this.tm=null};g.load=function(a,b){if(a.length){try{var c=new Da.Audio}catch(k){return}for(var d,e=0;e<a.length;e++){var f=a[e],h=f.match(/\.(\w+)$/);if(h&&c.canPlayType("audio/"+h[1])){d=new Da.Audio(f);break}}d&&d.play&&(this.Dg[b]=d)}};g.preload=function(){for(var a in this.Dg){var b=this.Dg[a];b.volume=.01;var c=b.play();c!==void 0?c.then(b.pause).catch(function(){}):b.pause();if(cb||eb)break}};
g.play=function(a,b){var c=this.Dg[a];c?(a=new Date,this.Ml!=null&&a-this.Ml<100||(this.Ml=a,c=cb||bb?c:c.cloneNode(),c.volume=b===void 0?1:b,c.play())):this.tm&&this.tm.Ad.play(a,b)};
function Gi(a,b,c){Gi.i.constructor.call(this,a);this.Mb=new (md(jd,a,!0))(this);this.Hb=a.Hb||this.Mb.Hb.bind(this.Mb);this.Qh=a.Qh||Hi;this.mc=new Qb;var d=[];d[1]=new mi;d[2]=new mi;d[3]=new mi;d[4]=new mi;this.Yi=d;b&&(this.Bb=b);c&&(this.jf=c);this.fk=!!this.jf&&wb();this.oj=[];this.Ad=new Fi(a.zb);this.Yb=this.options.yl?new qe(this.options.yl,a.Ho):null;this.tc=new ch(this);this.dn=Object.create(null);this.ml=Object.create(null);Ii&&Ji&&Ki(this,"VARIABLE",Ji);Li&&Mi&&(Ki(this,"PROCEDURE",Mi),
Mf(this,Ni));this.La=this.options.zb?this.options.zb.La:new zi(this);this.La.Xh.push(this);c=this.options.Hm||"geras";a=this.gd();b=this.options.Im;c=new (ld(fd,c))(c);c.S(a,b);this.ya=c;this.Gk=null;this.vh=!1;this.di=[];this.Wk=[];this.Fk=new Ua(0,0)}L(Gi,Jd);g=Gi.prototype;g.Sj=null;g.I=!0;g.ld=!0;g.Nd=!1;g.wj=!1;g.Jm=!0;g.scrollX=0;g.scrollY=0;g.scale=1;g.em=1;g.tp=0;g.qp=0;g.rg=null;g.Y=null;g.K=null;g.qa=null;g.bb=null;g.Bb=null;g.jf=null;g.fk=!1;g.rj=!1;g.Fl=null;g.bp=null;g.O=null;g.Uo=null;
g.Hl=!0;g.rd=function(a){this.tc.rd(a)};g.$d=function(a){this.tc.$d(a)};g.hh=function(a){return this.tc?this.tc.hh(a):null};g.fh=function(){return this.tc?this.tc.fh():null};g.gd=function(){return this.La.gd()};g.Th=function(a){a||(a=te);this.La.Th(a)};function Bi(a){a.l&&a.ya.Cm(a.l,a.gd());Oi(zf(a).filter(function(b){return!!b.Wh}));Pi(a);a.qa&&Bi(a.qa);a.isVisible()&&a.Da(!0);a=new (I("theme_change"))(a.gd().name,a.id);G(a)}
function Oi(a){for(var b=0,c;c=a[b];b++){var d=c.Wh;d&&(c.cf(d),c.Se&&c.Se.zu())}}function Ue(a){if(a.Hl){var b=Fe(a).getScreenCTM();b&&(a.Uo=b.inverse(),a.Hl=!1)}return a.Uo}g.ji=function(){this.Hl=!0};g.isVisible=function(){return this.ld};function Dg(a,b){var c=0,d=0,e=1;if(a.va.contains(b)||a.Vc.contains(b))e=a.scale;do{var f=lb(b);if(b==a.va||b==a.Vc)e=1;c+=f.x*e;d+=f.y*e;b=b.parentNode}while(b&&b!=Fe(a));return new x(c,d)}function xi(a){a=a.Fk;return new Ua(a.width,a.height)}
function Ai(a){if(!a.Fl)for(var b=a.l;b;){if((" "+(b.getAttribute("class")||"")+" ").indexOf(" injectionDiv ")!=-1){a.Fl=b;break}b=b.parentNode}return a.Fl}
g.xa=function(a){this.l=D(lc,{"class":"blocklyWorkspace"},null);a&&(this.Wa=D(qc,{height:"100%",width:"100%","class":a},this.l),a=="blocklyMainBackground"&&this.Yb?this.Wa.style.fill="url(#"+this.Yb.Qf.id+")":this.La.subscribe(this.Wa,"workspaceBackgroundColour","fill"));this.va=D(lc,{"class":"blocklyBlockCanvas"},this.l);this.Vc=D(lc,{"class":"blocklyBubbleCanvas"},this.l);this.Nd||(z(this.l,"mousedown",this,this.Td,!1,!0),z(this.l,"wheel",this,this.As));this.options.Jo&&(this.qa=new (md(gd,this.options,
!0))(this));this.Yb&&this.Yb.update(this.scale);Qi(this);var b=md(cd,this.options);b&&(a=this.tc,b=new b,a.Vb&&a.Vb.Wb&&a.Vb.Wb.dispose(),a.Vb=b,a.Vb&&(b=a.Vb,b=new Ri(a.g,a.g.ya.D(),b),a.Vb.Wb=b,a.rd(a.Vb.Wb.xa())));this.ya.xa(this.l,this.gd());return this.l};
g.dispose=function(){this.I=!1;this.bb&&this.bb.cancel();this.l&&(Ac(this.l),this.l=null);this.Vc=this.va=null;this.qa&&(this.qa.dispose(),this.qa=null);this.K&&(this.K.dispose(),this.K=null);this.rg&&(this.rg.dispose(),this.rg=null);this.Y&&(this.Y.dispose(),this.Y=null);this.mi&&(this.mi.dispose(),this.mi=null);this.Ad&&(this.Ad.dispose(),this.Ad=null);this.Yb&&(this.Yb.dispose(),this.Yb=null);this.ya.dispose();this.tc&&(this.tc.dispose(),this.tc=null);Gi.i.dispose.call(this);if(this.La){var a=
this.La,b=a.Xh.indexOf(this);if(b<0)throw Error("Cannot unsubscribe a workspace that hasn't been subscribed.");a.Xh.splice(b,1);this.La.unsubscribe(this.Wa);this.options.zb||(this.La.dispose(),this.La=null)}this.ml=this.dn=this.Yi=null;this.options.zb||(a=Fe(this))&&a.parentNode&&Ac(a.parentNode);this.Sj&&(B(this.Sj),this.Sj=null)};g.Zl=function(a,b){return new gi(this,a,b)};function ti(a,b){return a.K||b?a.K:a.qa?ti(a.qa):null}function Nd(a){a.Jm&&a.I&&(a.Y&&a.Y.resize(),a.ji())}
g.resize=function(){this.qa&&this.qa.position();this.K&&this.K.position();var a=Vb(this.mc,Xb);var b=this.Mb;b={fq:wi(b),Ji:vi(b),ct:ui(b)};for(var c=[],d=0,e;e=a[d];d++)e.position(b,c),(e=e.Mf())&&c.push(e);this.Y&&this.Y.resize();this.ji();Qi(this)};function Rg(a){var b=document.documentElement;var c=window;b=Ya&&c.pageYOffset!=b.scrollTop?new x(b.scrollLeft,b.scrollTop):new x(c.pageXOffset||b.scrollLeft,c.pageYOffset||b.scrollTop);Ja(a.bp,b)||(a.bp=b,a.ji(),Qi(a))}
function Si(a,b,c){Fe(a);b&&(a.Fk.width=b);c&&(a.Fk.height=c)}function Fe(a){if(!a.Gk)for(var b=a.l;b;){if(b.tagName=="svg"){a.Gk=b;break}b=b.parentNode}return a.Gk}function De(a){if(F==0){var b=a.scale,c=-a.scrollY,d=-a.scrollX;if(!(b==a.em&&Math.abs(c-a.tp)<1&&Math.abs(d-a.qp)<1)){var e=new (I("viewport_change"))(c,d,b,a.id,a.em);a.em=b;a.tp=c;a.qp=d;G(e)}}}
g.translate=function(a,b){if(this.fk&&this.rj)this.jf.qg(a,b);else{var c="translate("+a+","+b+") scale("+this.scale+")";this.va.setAttribute("transform",c);this.Vc.setAttribute("transform",c)}if(this.Bb){c=this.Bb;var d=this.scale;c.Zd=d;var e=a.toFixed(0),f=b.toFixed(0);c.Yn.x=parseInt(e,10);c.Yn.y=parseInt(f,10);c.Ic.setAttribute("transform","translate("+e+","+f+") scale("+d+")")}this.Yb&&this.Yb.moveTo(a,b);De(this)};
function We(a){if(a.fk){a.rj=!1;var b=a.jf.ul();a.jf.Ui(a.l);b="translate("+b.x+","+b.y+") scale("+a.scale+")";a.va.setAttribute("transform",b);a.Vc.setAttribute("transform",b)}}
function Ve(a){if(a.fk&&!a.rj){a.rj=!0;var b=a.va.previousSibling,c=parseInt(Fe(a).getAttribute("width"),10),d=parseInt(Fe(a).getAttribute("height"),10),e=lb(a.va),f=a.jf,h=a.va,k=a.Vc,l=a.scale;if(f.la.childNodes.length)throw Error("Already dragging a block.");f.Am=b;h.setAttribute("transform","translate(0, 0) scale("+l+")");k.setAttribute("transform","translate(0, 0) scale("+l+")");f.la.setAttribute("width",c);f.la.setAttribute("height",d);f.la.appendChild(h);f.la.appendChild(k);f.la.style.display=
"block";a.jf.qg(e.x,e.y)}}g.ih=function(){var a=this.Hb();return a?a.Oa/this.scale:0};g.Da=function(a){this.ld=a;if(this.l)if(this.Y&&this.Y.$e(a),ti(this)&&ti(this).$e(a),Fe(this).style.display=a?"block":"none",this.qa&&this.qa.Da(a),a){a=zf(this);for(var b=a.length-1;b>=0;b--)a[b].xh();this.X();this.qa&&this.qa.position()}else Xe(!0)};g.X=function(){for(var a=zf(this),b=a.length-1;b>=0;b--)a[b].X(!1);if(this.bb)for(a=this.bb.Nf(),b=0;b<a.length;b++)a[b].X(!1);b=this.tc;b.g.vh&&b.ed&&b.g.fh().oc()};
function Ti(a){for(var b=Ui,c=0,d;d=b.oj[c];c++)d.zc(!1);b.oj.length=0;if(d=a?b.Gb(a):null)b.oj.indexOf(d)==-1&&b.oj.push(d),d.zc(!0)}
function Vi(a){var b=Wi;if(a.I&&b.tagName&&!(b.getElementsByTagName("block").length>=If(a)))if(a.bb&&a.bb.cancel(),b.tagName.toLowerCase()=="comment"){F++;try{var c=Aa.Tt.ol(b),d=parseInt(b.getAttribute("x"),10),e=parseInt(b.getAttribute("y"),10);isNaN(d)||isNaN(e)||(a.o&&(d=-d),c.moveBy(d+50,e+50))}finally{F--}F==0&&Aa.St.cu(c);c.select()}else{F++;try{var f=Id(b,a),h=parseInt(b.getAttribute("x"),10),k=parseInt(b.getAttribute("y"),10);if(!isNaN(h)&&!isNaN(k)){a.o&&(h=-h);do{b=!1;var l=zf(a);c=0;for(var m;m=
l[c];c++){var q=m.na();if(Math.abs(h-q.x)<=1&&Math.abs(k-q.y)<=1){b=!0;break}}if(!b){var n=f.qc(!1);c=0;for(var p;p=n[c];c++)if(p.closest(28,new x(h,k)).connection){b=!0;break}}b&&(h=a.o?h-28:h+28,k+=56)}while(b);f.moveBy(h,k)}}finally{F--}F==0&&!f.T&&G(new (I("create"))(f));f.select()}}function Pi(a){(a=a.Nd?a.O:a)&&!a.bb&&a.qa&&ti(a.qa)&&a.qa.su()}g.eg=function(a,b){Gi.i.eg.call(this,a,b);Pi(this)};g.Jf=function(a){Gi.i.Jf.call(this,a);Pi(this)};
g.Hd=function(a,b,c){a=Gi.i.Hd.call(this,a,b,c);Pi(this);return a};function Qi(a){var b=Vb(a.mc,Yb);a.Wk=[];for(var c=0,d;d=b[c];c++){var e=d.Bo();e&&a.Wk.push({component:d,jr:e})}}function Ag(a,b){for(var c=0,d;d=a.Wk[c];c++)if(d.jr.contains(b.clientX,b.clientY))return d.component;return null}g.Td=function(a){var b=this.Id(a);b&&Vg(b,a,this)};g.$j=function(a){a=qb(a,Fe(this),Ue(this));a.x/=this.scale;a.y/=this.scale};g.Jb=function(){return this.bb!=null&&this.bb.Jb()};
g.Na=function(){return this.options.eb&&!!this.options.eb.scrollbars||this.options.eb&&this.options.eb.sg||this.options.eb&&this.options.eb.fd||this.options.ra&&this.options.ra.sg||this.options.ra&&this.options.ra.zp};function Lg(a){var b=!!a.Y;return a.Na()&&(!b||b&&!!a.Y.oa)}function Mg(a){var b=!!a.Y;return a.Na()&&(!b||b&&!!a.Y.Z)}
g.As=function(a){if(Zg())a.preventDefault(),a.stopPropagation();else{var b=this.options.ra&&this.options.ra.sg,c=this.options.eb&&this.options.eb.sg;if(b||c){var d=rb(a);!b||!a.ctrlKey&&c?(b=this.scrollX-d.x,c=this.scrollY-d.y,a.shiftKey&&!d.x&&(b=this.scrollX-d.y,c=this.scrollY),this.scroll(b,c)):(d=-d.y/50,b=qb(a,Fe(this),Ue(this)),this.zoom(b.x,b.y,d));a.preventDefault()}}};g.Yj=function(a){if(!this.options.readOnly&&!this.Nd){var b=Rh("workspace",{j:this});this.mr&&this.mr(b,a);jh.show(a,b,this.o)}};
function Yc(a){if(a.options.zb)Yc(a.options.zb);else{Zc=a;document.activeElement&&document.activeElement.blur&&document.activeElement.blur();try{Fe(a).focus({preventScroll:!0})}catch(b){try{Fe(a).parentNode.setActive()}catch(c){Fe(a).parentNode.focus({preventScroll:!0})}}}}
g.zoom=function(a,b,c){c=Math.pow(this.options.ra.Jp,c);var d=this.scale*c;if(this.scale!=d){d>this.options.ra.zh?c=this.options.ra.zh/this.scale:d<this.options.ra.Ah&&(c=this.options.ra.Ah/this.scale);var e=this.va.getCTM(),f=Fe(this).createSVGPoint();f.x=a;f.y=b;f=f.matrixTransform(e.inverse());a=f.x;b=f.y;e=e.translate(a*(1-c),b*(1-c)).scale(c);this.scrollX=e.e;this.scrollY=e.f;this.setScale(d)}};
function Xi(a,b){var c=a.Hb();if(a.K){var d=c.Tp?c.Tp/2:0;c=c.Sp?c.Sp/2:0}else d=c.Oa/2+c.ab,c=c.Ya/2+c.kb;a.zoom(d,c,b)}g.zr=function(){yc(this.va,"blocklyCanvasTransitioning");yc(this.Vc,"blocklyCanvasTransitioning")};
g.setScale=function(a){this.options.ra.zh&&a>this.options.ra.zh?a=this.options.ra.zh:this.options.ra.Ah&&a<this.options.ra.Ah&&(a=this.options.ra.Ah);this.scale=a;Xe(!1);this.K&&(this.K.Bm(),Qi(this));this.Yb&&this.Yb.update(this.scale);a=this.Hb();this.scrollX-=a.ab;this.scrollY-=a.kb;a.fc+=a.ab;a.hc+=a.kb;this.scroll(this.scrollX,this.scrollY);if(this.Y)if(this.K){var b=this.Y;b.oa&&Pe(b.oa,a);b.Z&&Re(b.Z,a)}else b=this.Y,b.oa&&Qe(b.oa,a),b.Z&&Se(b.Z,a)};
g.scroll=function(a,b){Xe(!0);var c=this.Hb();a=Math.min(a,-c.scrollLeft);b=Math.min(b,-c.scrollTop);var d=c.scrollTop+Math.max(0,c.scrollHeight-c.Ya);a=Math.max(a,-(c.scrollLeft+Math.max(0,c.scrollWidth-c.Oa)));b=Math.max(b,-d);this.scrollX=a;this.scrollY=b;this.Y&&this.Y.set(-(a+c.scrollLeft),-(b+c.scrollTop),!1);a+=c.ab;b+=c.kb;this.translate(a,b)};
function Hi(a){var b=this.Hb();typeof a.x=="number"&&(this.scrollX=-(b.scrollLeft+(b.scrollWidth-b.Oa)*a.x));typeof a.y=="number"&&(this.scrollY=-(b.scrollTop+(b.scrollHeight-b.Ya)*a.y));this.translate(this.scrollX+b.ab,this.scrollY+b.kb)}g.Gb=function(a){return Gi.i.Gb.call(this,a)};g.Ja=function(a){return Gi.i.Ja.call(this,a)};g.Li=function(a){this.di.push(a);Gi.i.Li.call(this,a)};g.Rj=function(a){yb(this.di,a);Gi.i.Rj.call(this,a)};g.gb=function(a){var b=!this.Jm&&a;this.Jm=a;b&&Nd(this)};
g.clear=function(){this.gb(!1);Gi.i.clear.call(this);this.di=[];this.gb(!0)};function Yi(a,b){if(typeof b!="function")throw TypeError("Button callbacks must be functions.");a.ml.CREATE_VARIABLE=b}function Zi(a,b){return(a=a.ml[b])?a:null}function Ki(a,b,c){if(typeof c!="function")throw TypeError("Toolbox category callbacks must be functions.");a.dn[b]=c}
g.Id=function(a){var b=a.type=="mousedown"||a.type=="touchstart"||a.type=="pointerdown",c=this.bb;return c?b&&c.Uf?(console.warn("Tried to start the same gesture twice."),c.cancel(),null):c:b?this.bb=new Ci(a,this):null};function ki(a){a.bb&&a.bb.cancel()};function $i(a){var b="blockly";typeof b=="string"&&(b=document.getElementById(b)||document.querySelector(b));if(!document.contains(b))throw Error("Error: container is not in current document");a=new ze(a||{});var c=document.createElement("div");c.className="injectionDiv";c.tabIndex=0;pf(c,"label",w.WORKSPACE_ARIA_LABEL);b.appendChild(c);b=aj(c,a);var d=new ke(c),e=new Of(c),f=bj(b,a,d,e);cj(f);Zc=f;dj(f);c.addEventListener("focusin",function(){Zc=f});return f}
function aj(a,b){a.setAttribute("dir","LTR");var c=b.Ur,d=b.We;if(!me){me=!0;var e=pe.join("\n");pe.length=0;c&&(c=d.replace(/[\\/]$/,""),e=e.replace(/<<<PATH>>>/g,c),c=document.createElement("style"),c.id="blockly-common-style",c.appendChild(document.createTextNode(e)),document.head.insertBefore(c,document.head.firstChild))}a=D(rc,{xmlns:"http://www.w3.org/2000/svg","xmlns:html":"http://www.w3.org/1999/xhtml","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1","class":"blocklySvg",tabindex:"0"},
a);c=D(dc,{},a);e=b.Ho;c=D(pc,{id:"blocklyGridPattern"+String(Math.random()).substring(2),patternUnits:"userSpaceOnUse"},c);e.length>0&&e.spacing>0?(D(nc,{stroke:e.colour},c),e.length>1&&D(nc,{stroke:e.colour},c)):D(nc,{},c);b.yl=c;return a}
function bj(a,b,c,d){b.zb=null;b=new Gi(b,c,d);c=b.options;b.scale=c.ra.Rp;a.appendChild(b.xa("blocklyMainBackground"));xc(Ai(b),b.ya.pc());xc(Ai(b),b.gd().pc());!c.Jo&&c.Le&&(d=new ze({parentWorkspace:b,rtl:b.o,oneBasedIndex:b.options.Mj,renderer:b.options.Hm,rendererOverrides:b.options.Im,move:{scrollbars:!0}}),d.Rb=b.options.Rb,b.K=new (md(id,b.options,!0))(d),b.K.se=!1,b.K.g.Da(!0),d=b.K.xa(rc),Bc(d,a));if(c.Mo){if(!ej)throw Error("Missing require for Blockly.Trashcan");b.rg=new ej(b);d=b.rg.xa();
b.l.insertBefore(d,b.va)}if(c.ra&&c.ra.controls){if(!fj)throw Error("Missing require for Blockly.ZoomControls");b.mi=new fj(b);c=b.mi.xa();b.l.appendChild(c)}b.La.subscribe(a,"workspaceBackgroundColour","background-color");b.translate(0,0);Mf(b,gj(b));dj(b);dh||(dh=document.createElement("div"),dh.className="blocklyWidgetDiv",(Sc||document.body).appendChild(dh));Rc();ff||(ff=document.createElement("div"),ff.className="blocklyTooltipDiv",(Sc||document.body).appendChild(ff));return b}
function hj(a){var b=a.Mb;if(!(Lg(b.g)&&Mg(b.g)||a.Jb())){b=b.Ce(!0);for(var c=[].concat(a.di),d=0,e;e=c[d];d++)Fg(a,b,e)}}
function gj(a){return function(b){var c=a.Mb;if(!(Lg(c.g)&&Mg(c.g)||a.Jb()))if(pd.indexOf(b.type)!==-1){c=c.Ce(!0);var d=null;switch(b.type){case "create":case "move":(d=a.Gb(b.ma))&&(d=d.rc())}if(d){var e=nd;H(b.group);Fg(a,c,d)&&!b.group&&console.warn("Moved object in bounds but there was no event group. This may break undo.");e!==null&&H(e)}}else b.type==="viewport_change"&&b.scale>b.Dh&&hj(a)}}
function Fg(a,b,c){var d=c.Mf(),e=Hc(b.top,d.top,b.top+b.height-(d.bottom-d.top))-d.top,f=b.left;b=b.left+b.width-(d.right-d.left);a.o?f=Math.min(b,f):b=Math.max(f,b);return(a=Hc(f,d.left,b)-d.left)||e?(c.moveBy(a,e),!0):!1}
function cj(a){var b=a.options,c=Fe(a);z(c.parentNode,"contextmenu",null,function(e){jb(e)||e.preventDefault()});c=z(window,"resize",null,function(){Xe(!0);dj(a);hj(a)});a.Sj=c;ij();if(b.Le){c=a.qa;var d=ti(a,!0);c?c.S():d&&(d.S(a),d.show(b.Le),typeof d.Kp=="function"&&d.Kp())}b.Mo&&a.rg.S();b.ra&&b.ra.controls&&a.mi.S();b.eb&&b.eb.scrollbars?(a.Y=new Ae(a,b.eb.scrollbars===!0||!!b.eb.scrollbars.mh,b.eb.scrollbars===!0||!!b.eb.scrollbars.vertical,"blocklyMainWorkspaceScrollbar"),a.Y.resize()):a.Qh({x:.5,
y:.5});b.Wr&&jj(b.We,a)}function ij(){Ba||(z(document,"scroll",null,function(){for(var a=Nf(),b=0,c;c=a[b];b++)c.ji&&c.ji()}),z(document,"keydown",null,kj),Pb(document,"touchend",null,Ib),Pb(document,"touchcancel",null,Ib),cb&&z(window,"orientationchange",document,function(){dj(Zc)}));Ba=!0}
function jj(a,b){function c(){for(;e.length;)B(e.pop());d.preload()}var d=b.Ad;d.load([a+"click.mp3",a+"click.wav",a+"click.ogg"],"click");d.load([a+"disconnect.wav",a+"disconnect.mp3",a+"disconnect.ogg"],"disconnect");d.load([a+"delete.mp3",a+"delete.ogg",a+"delete.wav"],"delete");var e=[];e.push(z(document,"mousemove",null,c,!0));e.push(z(document,"touchstart",null,c,!0))};function lj(a){this.cq="";this.Hp=Object.create(null);if(a){a=a.split(",");for(var b=0;b<a.length;b++)this.Hp[a[b]]=!0}this.reset()}lj.prototype.reset=function(){this.Hc=Object.create(null);this.io=Object.create(null);this.aa=null};lj.prototype.Tm=function(a){this.aa=a};
function mj(a,b,c){var d=b;c=="VARIABLE"&&(a.aa?b=(b=a.aa.Pf(b))?b.name:null:(console.warn("Deprecated call to Blockly.Names.prototype.getName without defining a variable map. To fix, add the following code in your generator's init() function:\nBlockly.YourGeneratorName.nameDB_.setVariableMap(workspace.getVariableMap());"),b=null),b&&(d=b));b=d.toLowerCase();var e=c=="VARIABLE"||c=="DEVELOPER_VARIABLE"?a.cq:"";c in a.Hc||(a.Hc[c]=Object.create(null));var f=a.Hc[c];if(b in f)return e+f[b];a=nj(a,d,
c);f[b]=a.substr(e.length);return a}function nj(a,b,c){b?(b=encodeURI(b.replace(/ /g,"_")).replace(/[^\w]/g,"_"),"0123456789".indexOf(b[0])!=-1&&(b="my_"+b)):b=w.UNNAMED_KEY||"unnamed";for(var d="";a.io[b+d]||b+d in a.Hp;)d=d?d+1:2;b+=d;a.io[b]=!0;return(c=="VARIABLE"||c=="DEVELOPER_VARIABLE"?a.cq:"")+b};var Li={};function oj(a){var b=Gf(a,"procedures_defnoreturn").map(function(c){return c.Kr()});a=Gf(a,"procedures_defreturn").map(function(c){return c.Kr()});b.sort(pj);a.sort(pj);return[b,a]}function pj(a,b){return a[0].localeCompare(b[0],void 0,{sensitivity:"base"})}
function Mi(a){function b(f,h){for(var k=0;k<f.length;k++){var l=f[k][0],m=f[k][1],q=M("block");q.setAttribute("type",h);q.setAttribute("gap",16);var n=M("mutation");n.setAttribute("name",l);q.appendChild(n);for(l=0;l<m.length;l++){var p=M("arg");p.setAttribute("name",m[l]);n.appendChild(p)}c.push(q)}}var c=[];if(Zf.procedures_defnoreturn){var d=M("block");d.setAttribute("type","procedures_defnoreturn");d.setAttribute("gap",16);var e=M("field");e.setAttribute("name","NAME");e.appendChild(document.createTextNode(w.PROCEDURES_DEFNORETURN_PROCEDURE));
d.appendChild(e);c.push(d)}Zf.procedures_defreturn&&(d=M("block"),d.setAttribute("type","procedures_defreturn"),d.setAttribute("gap",16),e=M("field"),e.setAttribute("name","NAME"),e.appendChild(document.createTextNode(w.PROCEDURES_DEFRETURN_PROCEDURE)),d.appendChild(e),c.push(d));Zf.procedures_ifreturn&&(d=M("block"),d.setAttribute("type","procedures_ifreturn"),d.setAttribute("gap",16),c.push(d));c.length&&c[c.length-1].setAttribute("gap",24);a=oj(a);b(a[0],"procedures_callnoreturn");b(a[1],"procedures_callreturn");
return c}
function qj(a){for(var b=[],c=Gf(a,"procedures_mutatorarg"),d=0,e;e=c[d];d++)b.push(Cf(e,"NAME"));c=M("xml");d=M("block");d.setAttribute("type","procedures_mutatorarg");e=M("field");e.setAttribute("name","NAME");a:if(b.length){for(var f="",h=14,k="x";;){for(var l=!1,m=0;m<b.length;m++)if(b[m].toLowerCase()==k){l=!0;break}if(!l){b=k;break a}h++;h==25&&(h=0,f=Number(f)+1);k="ijkmnopqrstuvwxyzabcdefgh".charAt(h)+f}b=void 0}else b="x";e.appendChild(document.createTextNode(b));d.appendChild(e);c.appendChild(d);
if(b=ue(c)){if(!a.options.Le)throw Error("Existing toolbox is null.  Can't create new toolbox.");if(ye(b)){if(!a.qa)throw Error("Existing toolbox has no categories.  Can't change mode.");a.options.Le=b;a.qa.X(b)}else{if(!a.K)throw Error("Existing toolbox has categories.  Can't change mode.");a.options.Le=b;a.K.show(b)}}else if(a.options.Le)throw Error("Can't nullify an existing toolbox.");}
function Ni(a){if(a.type=="bubble_open"&&a.Ut==="mutator"&&a.Jl){a=(td[a.Za]||null).Gb(a.ma);var b=a.type;if(b=="procedures_defnoreturn"||b=="procedures_defreturn")a=a.Se.g,qj(a),Mf(a,rj)}}function rj(a){a.type!="create"&&a.type!="delete"&&a.type!="change"||qj(td[a.Za]||null)};function sj(){tj=this;this.bc=Object.create(null);this.Zf=Object.create(null)}var tj,uj={Shift:16,Control:17,Alt:18,Meta:91};sj.prototype.register=function(a,b){if(this.bc[a.name]&&!b)throw Error('Shortcut with name "'+a.name+'" already exists.');this.bc[a.name]=a};
sj.prototype.unregister=function(a){if(!this.bc[a])return console.warn('Keyboard shortcut with name "'+a+'" not found.'),!1;for(var b in this.Zf){var c=b,d=this.Zf[c],e=d.indexOf(a);e>-1&&(d.splice(e,1),d.length==0&&delete this.Zf[c])}delete this.bc[a];return!0};function vj(a,b){var c=tj;a=String(a);var d=c.Zf[a];if(d)throw Error('Shortcut with name "'+b+'" collides with shortcuts '+d.toString());c.Zf[a]=[b]}
function wj(a,b){var c="";if(b){for(var d=zd(uj),e=0,f;f=b[e];e++)if(d.indexOf(f)<0)throw Error(f+" is not a valid modifier key.");for(var h in uj)b.indexOf(uj[h])>-1&&(c!=""&&(c+="+"),c+=h)}c!=""&&a?c=c+"+"+a:a&&(c=a.toString());return c}new sj;function Bf(a,b,c,d){this.j=a;this.name=b;this.type=c||"";this.Ge=d||ub();G(new (I("var_create"))(this))}Bf.prototype.cb=function(){return this.Ge};function xj(a,b){return a.name.localeCompare(b.name,void 0,{sensitivity:"base"})};var Ii={};function yj(a){var b=zf(a);a=Object.create(null);for(var c=0;c<b.length;c++){var d=Td(b[c]);if(d)for(var e=0;e<d.length;e++){var f=d[e],h=f.cb();h&&(a[h]=f)}}b=[];for(h in a)b.push(a[h]);return b}var zj={};function Ji(a){var b=[],c=document.createElement("button");c.setAttribute("text","%{BKY_NEW_VARIABLE}");c.setAttribute("callbackKey","CREATE_VARIABLE");Yi(a,function(d){Aj(d.dk)});b.push(c);a=Bj(a);return b=b.concat(a)}
function Bj(a){a=a.mj("");var b=[];if(a.length>0){var c=a[a.length-1];if(Zf.variables_set){var d=M("block");d.setAttribute("type","variables_set");d.setAttribute("gap",Zf.math_change?8:24);d.appendChild(Cj(c));b.push(d)}Zf.math_change&&(d=M("block"),d.setAttribute("type","math_change"),d.setAttribute("gap",Zf.variables_get?20:8),d.appendChild(Cj(c)),c=Gd('<value name="DELTA"><shadow type="math_number"><field name="NUM">1</field></shadow></value>'),d.appendChild(c),b.push(d));if(Zf.variables_get){a.sort(xj);
c=0;for(var e;e=a[c];c++)d=M("block"),d.setAttribute("type","variables_get"),d.setAttribute("gap",8),d.appendChild(Cj(e)),b.push(d)}}return b}function Aj(a){function b(c){Dj(c,function(d){if(d){var e=Ej(d,a);if(e){if(e.type=="")var f=w.VARIABLE_ALREADY_EXISTS.replace("%1",e.name);else f=w.VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE,f=f.replace("%1",e.name).replace("%2",e.type);Df(f,function(){b(d)})}else a.Hd(d,"")}})}b("")}
function Dj(a,b){Fj(a,function(c){c&&(c=c.replace(/[\s\xa0]+/g," ").trim(),c==w.RENAME_VARIABLE||c==w.NEW_VARIABLE)&&(c=null);b(c)})}function Ej(a,b){b=b.aa.Lf();a=a.toLowerCase();for(var c=0,d;d=b[c];c++)if(d.name.toLowerCase()==a)return d;return null}function Cj(a){var b=M("field");b.setAttribute("name","VAR");b.setAttribute("id",a.cb());b.setAttribute("variabletype",a.type);b.appendChild(document.createTextNode(a.name));return b}
function Od(a,b){a=a.Lf();var c=[];if(b.length!=a.length)for(var d=0;d<a.length;d++){var e=a[d];b.indexOf(e)==-1&&c.push(e)}return c};var Zc=null,N=null,xf=[],Wi=null,Gj=null,Hj=null,Sc=null;function dj(a){for(;a.options.zb;)a=a.options.zb;var b=Fe(a),c=xi(a),d=b.parentNode;if(d){var e=d.offsetWidth;d=d.offsetHeight;c.width!=e&&(b.setAttribute("width",e+"px"),Si(a,e,null));c.height!=d&&(b.setAttribute("height",d+"px"),Si(a,null,d));a.resize()}}
function kj(a){var b=Zc;if(b&&!(jb(a)||b.I&&!b.isVisible()))a:{var c=tj,d="";for(e in uj)a.getModifierState(e)&&(d!=""&&(d+="+"),d+=e);d!=""&&a.keyCode?d=d+"+"+a.keyCode:a.keyCode&&(d=a.keyCode.toString());d=c.Zf[d]||[];var e=0;for(var f;f=d[e];e++)if(f=c.bc[f],(!f.Ba||f.Ba(b))&&f.wa&&f.wa(b,a,f))break a}}function Ij(a){a.j.Nd||(H(!0),Xe(),a.s?a.dispose(!1,!0):a.dispose(!0,!0),H(!1))}
function Jj(a){if(a.Yf)a=null;else{for(var b=Cd(a,!0),c=0,d;d=b.childNodes[c];c++)if(d.nodeName.toLowerCase()=="next"){b.removeChild(d);break}c=a.na();b.setAttribute("x",a.o?-c.x:c.x);b.setAttribute("y",c.y);a={xml:b,source:a.j,kt:zb(a,!0)}}a&&(Wi=a.xml,Gj=a.source,Hj=a.kt)}function Kj(){if(!Wi)return!1;var a=Gj;a.Nd&&(a=a.O);return Hj&&Jf(a,Hj)?(H(!0),Vi(a),H(!1),!0):!1}
function Xe(a){nf();kh();Xc();var b=!!a;Vb(Zc.mc,Zb).forEach(function(c){!b&&c.Xb&&c.Xb&&c.Xb.isVisible()&&(c.Xb.qb(),Lj(c,!1))})}function Df(a,b){alert(a);b&&b()}function Ef(a,b){b(confirm(a))}function Fj(a,b){b(prompt(w.NEW_VARIABLE_TITLE,a))}
function Mj(a){return function(){var b=a.type?'Block "'+a.type+'": ':"";if(a.output&&a.previousStatement)throw Error(b+"Must not have both an output and a previousStatement.");a.style&&a.style.Mc&&(this.Mc=a.style.Mc,a.style=null);if(a.style&&a.colour)throw Error(b+"Must not have both a colour and a style.");if(a.style){var c=a.style;try{this.cf(c)}catch(p){console.warn(b+"Style does not exist: ",c)}}else if("colour"in a)if(a.colour===void 0)console.warn(b+"Undefined colour value.");else{c=a.colour;
try{this.Uj(c)}catch(p){console.warn(b+"Illegal colour value: ",c)}}for(c=0;a["message"+c]!==void 0;){var d=a["args"+c]||[],e=a["lastDummyAlign"+c],f=b;var h=tb(a["message"+c],!0);for(var k=d.length,l=[],m=0,q=0;q<h.length;q++){var n=h[q];if(typeof n=="number"){if(n<1||n>k)throw Error('Block "'+this.type+'": Message index %'+n+" out of range.");if(l[n])throw Error('Block "'+this.type+'": Message index %'+n+" duplicated.");l[n]=!0;m++}}if(m!=k)throw Error('Block "'+this.type+'": Message does not reference all '+
k+" arg(s).");k=[];for(l=0;l<h.length;l++){m=h[l];typeof m=="number"&&(m=d[m-1]);if(typeof m=="string"&&(m=Gh(m),!m))continue;k.push(m)}(d=k.length)&&!Hh(k[d-1].type)&&(d={type:"input_dummy"},e&&(d.align=e),k.push(d));e=[];for(d=0;h=k[d];d++)if(Hh(h.type)){l=h;m=f;q={LEFT:-1,RIGHT:1,CENTRE:0,CENTER:0};h=null;switch(l.type){case "input_value":h=this.zf(1,l.name);break;case "input_statement":h=this.zf(3,l.name);break;case "input_dummy":h=this.zf(5,l.name||"")}h?(l.check&&h.gg(l.check),l.align&&(q=q[l.align.toUpperCase()],
q===void 0?console.warn(m+"Illegal align value: ",l.align):(l=h,l.align=q,l.m.I&&(l.m=l.m,l.m.X())))):h=null;if(h){for(l=0;m=e[l];l++)q=h,zh(q,q.ea.length,m[0],m[1]);e.length=0}}else(l=Fh(this,h))&&e.push([l,h.name]);c++}a.inputsInline!==void 0&&this.bf(a.inputsInline);a.output!==void 0&&this.Pm(!0,a.output);a.previousStatement!==void 0&&this.Rm(!0,a.previousStatement);a.nextStatement!==void 0&&this.Om(!0,a.nextStatement);a.tooltip!==void 0&&(c=a.tooltip,c=sb(c),this.Uh(c));a.enableContextMenu!==
void 0&&(c=a.enableContextMenu,this.contextMenu=!!c);a.helpUrl!==void 0&&(c=a.helpUrl,this.Vf=sb(c));typeof a.extensions=="string"&&(console.warn(b+"JSON attribute 'extensions' should be an array of strings. Found raw string in JSON for '"+a.type+"' block."),a.extensions=[a.extensions]);a.mutator!==void 0&&bg(a.mutator,this,!0);b=a.extensions;if(Array.isArray(b))for(c=0;c<b.length;++c)bg(b[c],this,!1)}}
function Nj(a){for(var b=0;b<a.length;b++){var c=a[b];if(c){var d=c.type;d==null||d===""?console.warn("Block definition #"+b+" in JSON array is missing a type attribute. Skipping."):(Zf[d]&&console.warn("Block definition #"+b+' in JSON array overwrites prior definition of "'+d+'".'),Zf[d]={S:Mj(c)})}else console.warn("Block definition #"+b+" in JSON array is "+c+". Skipping.")}}function Oj(a){return/^\s*-?\d+(\.\d+)?\s*$/.test(a)};function Pj(a,b,c){typeof a!="function"&&(Qj(a),a=JSON.parse(JSON.stringify(a)));this.$f=a;this.Ym=this.zm=this.jj=null;a=this.$f;if(Array.isArray(a)){for(var d=!1,e=0;e<a.length;e++){var f=a[e][0];typeof f=="string"?a[e][0]=sb(f):(f.alt!=null&&(a[e][0].alt=sb(f.alt)),d=!0)}if(!(d||a.length<2)){f=[];for(e=0;e<a.length;e++)f.push(a[e][0]);var h=Oa(f);e=Pa(f,h);d=Qa(f,h);if((e||d)&&!(h<=e+d)){e&&(this.zm=f[0].substring(0,e-1));d&&(this.Ym=f[0].substr(1-d));f=[];for(h=0;h<a.length;h++){var k=a[h][0],
l=a[h][1];k=k.substring(e,k.length-d);f[h]=[k,l]}this.$f=f}}}this.fg=Rj(this,!1)[0];Pj.i.constructor.call(this,this.fg[1],b,c);this.og=this.re=this.rb=this.tb=this.Ph=null}L(Pj,mh);Pj.L=function(a){return new Pj(a.options,void 0,a)};Pj.prototype.ol=function(a){typeof this.$f=="function"&&Rj(this,!1);Wd(this,a.textContent)};Pj.prototype.Bn=!0;var Sj=bb?"\u25bc":"\u25be";g=Pj.prototype;g.rq="default";
g.pj=function(){!this.D().pn||this.D().pn&&!this.m.T?ph(this):this.Zn=this.m.N();qh(this);this.rb=D(mc,{},this.vb);this.D().Dq?(this.og=D(mc,{height:this.D().xg+"px",width:this.D().xg+"px"},this.vb),this.og.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",this.D().Eq)):(this.re=D(tc,{},this.ib),this.re.appendChild(document.createTextNode(this.m.o?Sj+" ":" "+Sj)),this.m.o?this.ib.insertBefore(this.re,this.ef):this.ib.appendChild(this.re));this.Fa&&xc(this.Fa,"blocklyDropdownRect")};
g.Zj=function(a){var b=new Jh;b.Rh("listbox");this.tb=b;var c=Rj(this,!1);this.Ph=null;for(var d=0;d<c.length;d++){var e=c[d][0],f=c[d][1];if(typeof e=="object"){var h=new Image(e.width,e.height);h.src=e.src;h.alt=e.alt||"";e=h}e=new Nh(e,f);e.Rh("option");e.Km=this.m.o;e.Ik=!0;b.uc.push(e);e.Jk=f==this.Ab;f==this.Ab&&(this.Ph=e);Oh(e,this.Nr,this)}this.tb.om=a&&typeof a.clientX==="number"?new x(a.clientX,a.clientY):null;this.tb.X(Jc);xc(this.tb.Ua,"blocklyDropdownMenu");this.D().Cq&&(a=this.m.T?
this.m.getParent().rl():this.m.rl(),b=this.m.T?this.m.getParent().style.Ff:this.m.style.Ff,Ic.style.backgroundColor=a,Ic.style.borderColor=b);a=this.yr.bind(this);this.Fa?(f=this.Fa.getBoundingClientRect(),c=Xa(this.Fa),d=f.width,f=f.height):(f=yg(this.m),b=this.m.j.scale,c=Xa(oh(this)),d=f.width*b,f=f.height*b,ab?(c.x+=1.5*b,c.y+=1.5*b):Za||Ya||(c.x-=.5*b,c.y-=.5*b),d+=1*b,f+=1*b);b=new Na(c.y,c.y+f,c.x,c.x+d);d=new Na(b.top,b.bottom,b.left,b.right);b=d.left+(d.right-d.left)/2;c=d.bottom;d=d.top;
f=this.A();for(e=f.j;e.options.zb;)e=e.options.zb;Lc=Fe(e).parentNode;f=f.o;Mc=this;Oc=a||null;a=Ic;a.style.direction=f?"rtl":"ltr";f=Zc;Pc=f.ya.pc();Qc=f.gd().pc();xc(a,Pc);xc(a,Qc);a=Xa(Lc);f=Va(Lc);a={left:a.x,right:a.x+f.width,top:a.y,bottom:a.y+f.height,width:f.width,height:f.height};f=Va(Ic);c+f.height<a.bottom?a=Tc(b,c,a,f):d-f.height>a.top?a=Vc(b,d,a,f):c+f.height<document.documentElement.clientHeight?a=Tc(b,c,a,f):d-f.height>document.documentElement.clientTop?a=Vc(b,d,a,f):(a=Uc(b,a.left,
a.right,f.width),a={Dl:a.Kf,El:0,jl:a.Kf,kl:0,Ak:null,Af:null,Ck:null,Bk:!1});d=a;d.Bk?(Kc.style.display="",Kc.style.transform="translate("+d.Af+"px,"+d.Ck+"px) rotate(45deg)",Kc.setAttribute("class",d.Ak?"blocklyDropDownArrow blocklyArrowTop":"blocklyDropDownArrow blocklyArrowBottom")):Kc.style.display="none";a=Math.floor(d.Dl);b=Math.floor(d.El);c=Math.floor(d.jl);d=Math.floor(d.kl);f=Ic;f.style.left=a+"px";f.style.top=b+"px";f.style.display="block";f.style.opacity=1;f.style.transform="translate("+
(c-a)+"px,"+(d-b)+"px)";this.tb.focus();this.Ph&&this.tb.zc(this.Ph);this.Sa()};g.yr=function(){this.tb&&this.tb.dispose();this.Ph=this.tb=null;this.Sa()};g.Nr=function(a){Mc===this&&Xc();Wd(this,a.Ab)};function Rj(a,b){return typeof a.$f=="function"?(a.jj&&b||(a.jj=a.$f.call(a),Qj(a.jj)),a.jj):a.$f}
g.fj=function(a){for(var b=!1,c=Rj(this,!0),d=0,e;e=c[d];d++)if(e[1]==a){b=!0;break}return b?a:(this.m&&console.warn("Cannot set the dropdown's value to an unavailable option. Block type: "+this.m.type+", Field name: "+this.name+", Value: "+a),null)};g.Xg=function(a){Pj.i.Xg.call(this,a);a=Rj(this,!0);for(var b=0,c;c=a[b];b++)c[1]==this.Ab&&(this.fg=c)};
g.Sa=function(){this.Fa&&(this.Fa.setAttribute("stroke",this.m.style.Ff),this.tb?this.Fa.setAttribute("fill",this.m.style.Ff):this.Fa.setAttribute("fill","transparent"));this.m&&this.re&&(this.re.style.fill=this.m.T?this.m.style.Vi:this.m.style.ve)};
g.Gm=function(){this.ef.nodeValue="";this.rb.style.display="none";var a=this.fg&&this.fg[0];if(a&&typeof a=="object"){this.rb.style.display="";this.rb.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a.src);this.rb.setAttribute("height",a.height);this.rb.setAttribute("width",a.width);var b=Number(a.height);a=Number(a.width);var c=!!this.Fa,d=Math.max(c?this.D().on:0,b+10);c=c?this.D().wg:0;if(this.og)var e=Tj(this,a+c,d/2-this.D().xg/2);else{e=this.re;var f=this.D().yg,h=this.D().mf,k=this.D().lf;
e=Fc(e,f+"pt",h,k)}this.hb.width=a+e+c*2;this.hb.height=d;f=0;this.m.o?this.rb.setAttribute("x",c+e):(f=a+e,this.ib.setAttribute("text-anchor","end"),this.rb.setAttribute("x",c));this.rb.setAttribute("y",d/2-b/2);sh(this,f+c,a+e)}else this.ef.nodeValue=rh(this),xc(this.ib,"blocklyDropdownText"),this.ib.setAttribute("text-anchor","start"),a=!!this.Fa,b=Math.max(a?this.D().on:0,this.D().ui),d=this.ib,c=this.D().yg,e=this.D().mf,f=this.D().lf,d=Fc(d,c+"pt",e,f),a=a?this.D().wg:0,c=0,this.og&&(c=Tj(this,
d+a,b/2-this.D().xg/2)),this.hb.width=d+c+a*2,this.hb.height=b,sh(this,a,d);th(this)};function Tj(a,b,c){if(!a.og)return 0;var d=a.Fa?a.D().wg:0,e=a.D().Fq,f=a.D().xg;a.og.setAttribute("transform","translate("+(a.m.o?d:b+e)+","+c+")");return f+e}g.vl=function(){if(!this.fg)return null;var a=this.fg[0];return typeof a=="object"?a.alt:a};
function Qj(a){if(!Array.isArray(a))throw TypeError("FieldDropdown options must be an array.");if(!a.length)throw TypeError("FieldDropdown options must not be an empty array.");for(var b=!1,c=0;c<a.length;++c){var d=a[c];Array.isArray(d)?typeof d[1]!="string"?(b=!0,console.error("Invalid option["+c+"]: Each FieldDropdown option id must be a string. Found "+d[1]+" in: ",d)):d[0]&&typeof d[0]!="string"&&typeof d[0].src!="string"&&(b=!0,console.error("Invalid option["+c+"]: Each FieldDropdown option must have a string label or image description. Found"+
d[0]+" in: ",d)):(b=!0,console.error("Invalid option["+c+"]: Each FieldDropdown option must be an array. Found: ",d))}if(b)throw TypeError("Found invalid FieldDropdown options.");}E(ed,"field_dropdown",Pj);function Uj(a,b,c,d){this.g=a;this.dk=b;this.$m=c.text;this.Xe=new x(0,0);this.kd=d;this.Qi=c.callbackKey||c.callbackkey;this.co=c["web-class"]||null;this.jm=null;this.info=c}g=Uj.prototype;g.width=0;g.height=0;
g.xa=function(){var a=this.kd?"blocklyFlyoutLabel":"blocklyFlyoutButton";this.co&&(a+=" "+this.co);this.l=D(lc,{"class":a},this.g.va);if(!this.kd)var b=D(qc,{"class":"blocklyFlyoutButtonShadow",rx:4,ry:4,x:1,y:1},this.l);a=D(qc,{"class":this.kd?"blocklyFlyoutLabelBackground":"blocklyFlyoutButtonBackground",rx:4,ry:4},this.l);var c=D(sc,{"class":this.kd?"blocklyFlyoutLabelText":"blocklyText",x:0,y:0,"text-anchor":"middle"},this.l),d=sb(this.$m);this.g.o&&(d+="\u200f");c.textContent=d;this.kd&&(this.Zm=
c,this.g.La.subscribe(this.Zm,"flyoutForegroundColour","fill"));var e=Wa(c,"fontSize"),f=Wa(c,"fontWeight"),h=Wa(c,"fontFamily");this.width=Fc(c,e,f,h);d=Gc(d,e,f,h);this.height=d.height;this.kd||(this.width+=10,this.height+=4,b.setAttribute("width",this.width),b.setAttribute("height",this.height));a.setAttribute("width",this.width);a.setAttribute("height",this.height);c.setAttribute("x",this.width/2);c.setAttribute("y",this.height/2-d.height/2+d.Tb);Vj(this);this.jm=z(this.l,"mouseup",this,this.zs);
return this.l};g.show=function(){Vj(this);this.l.setAttribute("display","block")};function Vj(a){a.l.setAttribute("transform","translate("+a.Xe.x+","+a.Xe.y+")")}g.moveTo=function(a,b){this.Xe.x=a;this.Xe.y=b;Vj(this)};g.dispose=function(){this.jm&&B(this.jm);this.l&&Ac(this.l);this.Zm&&this.g.La.unsubscribe(this.Zm)};
g.zs=function(a){(a=this.dk.Id(a))&&a.cancel();this.kd&&this.Qi?console.warn("Labels should not have callbacks. Label text: "+this.$m):this.kd||this.Qi&&Zi(this.dk,this.Qi)?this.kd||Zi(this.dk,this.Qi)(this):console.warn("Buttons should have callbacks. Button text: "+this.$m)};oe(".blocklyFlyoutButton {,fill: #888;,cursor: default;,},.blocklyFlyoutButtonShadow {,fill: #666;,},.blocklyFlyoutButton:hover {,fill: #aaa;,},.blocklyFlyoutLabel {,cursor: default;,},.blocklyFlyoutLabelBackground {,opacity: 0;,}".split(","));function Ch(a){this.Bh=a}g=Ch.prototype;g.wi=null;g.Ec=null;g.yd=null;g.nf="  ";g.qq=60;g.Ei=[];g.tj=null;function Wj(a,b){return b+a.replace(/(?!\n$)\n/g,"\n"+b)}
function Xj(a,b){a.tj===!1&&console.warn("Generator init was not called before blockToCode was called.");if(!b)return"";if(!b.isEnabled())return Xj(a,Bb(b));if(b.Lb())return Xj(a,Bd(b,!1)[0]);var c=a[b.type];if(typeof c!="function")throw Error('Language "'+a.Bh+'" does not know how to generate code for block type "'+b.type+'".');c=c.call(b,b);if(Array.isArray(c)){if(!b.s)throw TypeError("Expecting string from statement block: "+b.type);return[a.Lm(b,c[0]),c[1]]}if(typeof c=="string")return a.Ec&&
!b.ng&&(c=Yj(a.Ec,b)+c),a.yd&&!b.ng&&(c+=Yj(a.yd,b)),a.Lm(b,c);if(c===null)return"";throw SyntaxError("Invalid code generated: "+c);}
function Zj(a,b,c,d){if(isNaN(d))throw TypeError("Expecting valid order from block: "+b.type);var e=Ih(b,c);if(!e)return"";c=Xj(a,e);if(c==="")return"";if(!Array.isArray(c))throw TypeError("Expecting tuple from value block: "+e.type);b=c[0];c=c[1];if(isNaN(c))throw TypeError("Expecting valid order from value block: "+e.type);if(!b)return"";e=!1;var f=Math.floor(d),h=Math.floor(c);if(f<=h&&(f!=h||f!=0&&f!=99))for(e=!0,f=0;f<a.Ei.length;f++)if(a.Ei[f][0]==d&&a.Ei[f][1]==c){e=!1;break}e&&(b="("+b+")");
return b}function ak(a,b){var c=P;a=Ih(a,b);b=Xj(c,a);if(typeof b!="string")throw TypeError("Expecting code from statement block: "+(a&&a.type));b&&(b=Wj(b,c.nf));return b}function bk(a,b){var c=P;c.wi&&(a=Wj(Yj(c.wi,b),c.nf)+a);c.yd&&!b.ng&&(a=Wj(Yj(c.yd,b),c.nf)+a);c.Ec&&!b.ng&&(a+=Wj(Yj(c.Ec,b),c.nf));return a}function Yj(a,b){b=b.id.replace(/\$/g,"$$$$");return a.replace(/%1/g,"'"+b+"'")}g.pk="";function ck(a){var b=P;b.pk+=a+","}g.S=function(){this.Rk=Object.create(null);this.Gr=Object.create(null)};
g.Lm=function(a,b){return b};g.finish=function(a){delete this.Rk;delete this.Gr;return a};g.Lp=function(a){return a};var P=new Ch("JavaScript");ck("break,case,catch,class,const,continue,debugger,default,delete,do,else,export,extends,finally,for,function,if,import,in,instanceof,new,return,super,switch,this,throw,try,typeof,var,void,while,with,yield,enum,implements,interface,let,package,private,protected,public,static,await,null,true,false,arguments,"+Object.getOwnPropertyNames(Da).join(","));P.tt=0;P.Lt=1.1;P.Di=1.2;P.Ci=2;P.It=3;P.Ct=3;P.wt=4.1;P.Ot=4.2;P.An=4.3;P.mk=4.4;P.Nt=4.5;P.Pt=4.6;P.Dt=4.7;P.ut=4.8;
P.Gt=5;P.xn=5.1;P.Et=5.2;P.Kt=5.3;P.zn=6.1;P.Bi=6.2;P.yt=7;P.Mt=8;P.Ht=8;P.Jt=8;P.Ft=9;P.vt=10;P.zt=11;P.xt=12;P.vn=13;P.wn=14;P.Bt=15;P.Bg=16;P.Qt=17;P.At=18;P.yn=99;P.Ei=[[P.Ci,P.Di],[P.Ci,P.Ci],[P.Di,P.Di],[P.Di,P.Ci],[P.mk,P.mk],[P.xn,P.xn],[P.Bi,P.Bi],[P.vn,P.vn],[P.wn,P.wn]];P.tj=!1;
P.S=function(a){Object.getPrototypeOf(this).S.call(this);this.Va?this.Va.reset():this.Va=new lj(this.pk);this.Va.Tm(a.aa);for(var b=this.Va,c=yj(a),d=0;d<c.length;d++)mj(b,c[d].cb(),"VARIABLE");b=this.Va;c=oj(a);c=c[0].concat(c[1]);for(d=0;d<c.length;d++)mj(b,c[d][0],"PROCEDURE");b=[];c=zf(a);d=Object.create(null);for(var e=0,f;f=c[e];e++){var h=f.ju;!h&&f.Jr&&(h=f.Jr,zj[f.type]||(console.warn("Function getDeveloperVars() deprecated. Use getDeveloperVariables() (block type '"+f.type+"')"),zj[f.type]=
!0));if(h)for(f=h(),h=0;h<f.length;h++)d[f[h]]=!0}d=Object.keys(d);for(c=0;c<d.length;c++)b.push(mj(this.Va,d[c],"DEVELOPER_VARIABLE"));a=yj(a);for(c=0;c<a.length;c++)b.push(mj(this.Va,a[c].cb(),"VARIABLE"));b.length&&(this.Rk.variables="var "+b.join(", ")+";");this.tj=!0};P.finish=function(a){var b=zd(this.Rk);a=Object.getPrototypeOf(this).finish.call(this,a);this.tj=!1;this.Va.reset();return b.join("\n\n")+"\n\n\n"+a};P.Lp=function(a){return a+";\n"};
P.Fs=function(a){a=a.replace(/\\/g,"\\\\").replace(/\n/g,"\\\n").replace(/'/g,"\\'");return"'"+a+"'"};P.ou=function(a){return a.split(/\n/g).map(this.Fs).join(" + '\\n' +\n")};
P.Lm=function(a,b){var c="";if(!a.s||!a.s.J){var d=a.lc.text;d&&(d=Ra(d,this.qq-3),c+=Wj(d+"\n","// "));for(var e=0;e<a.v.length;e++)if(a.v[e].type==1){var f=a.v[e].connection.G();if(f){d=[];f=Ab(f,!0);for(var h=0;h<f.length;h++){var k=f[h].lc.text;k&&d.push(k)}d.length&&d.push("");(d=d.join("\n"))&&(c+=Wj(d,"// "))}}}a=a.B&&a.B.G();a=Xj(this,a);return c+b+a};
P.gu=function(a,b,c,d,e){c=c||0;e=e||this.yn;a.j.options.Mj&&c--;var f=a.j.options.Mj?"1":"0";a=c>0?Zj(this,a,b,this.Bi)||f:c<0?Zj(this,a,b,this.zn)||f:d?Zj(this,a,b,this.An)||f:Zj(this,a,b,e)||f;if(Oj(a))a=Number(a)+c,d&&(a=-a);else{if(c>0){a=a+" + "+c;var h=this.Bi}else c<0&&(a=a+" - "+-c,h=this.zn);d&&(a=c?"-("+a+")":"-"+a,h=this.An);h=Math.floor(h);e=Math.floor(e);h&&e>=h&&(a="("+a+")")}return a};function dk(){}dk.prototype.gm=function(){};dk.prototype.fm=function(){};dk.prototype.hm=function(){};function ek(){ek.i.constructor.call(this);this.hk=!1}L(ek,dk);function ug(a,b,c){b instanceof gi?(b=!b.getParent()&&Ed(b),a.hk=b&&!c):a.hk=Ed(b);return a.hk};function fk(a,b){fk.i.constructor.call(this,b);this.Jl=a}L(fk,ee);fk.prototype.type="trashcan_open";fk.prototype.P=function(){var a=fk.i.P.call(this);a.isOpen=this.Jl;return a};fk.prototype.L=function(a){fk.i.L.call(this,a);this.Jl=a.isOpen};E(dd,"trashcan_open",fk);function gk(a,b,c,d,e,f){var h=f.Y&&!!f.Y.Z;a.mh===0?(c=e.Ji.left+c,h&&f.o&&(c+=Ce)):(c=e.Ji.left+e.fq.width-b.width-c,h&&!f.o&&(c-=Ce));a.vertical===0?a=e.Ji.top+d:(a=e.Ji.top+e.fq.height-b.height-d,f.Y&&f.Y.oa&&(a-=Ce));return new Na(a,a+b.height,c,c+b.width)}function hk(a){return{mh:a.ct.position!==2?0:1,vertical:1}}
function ik(a,b,c,d){for(var e=a.left,f=a.right-a.left,h=a.bottom-a.top,k=0,l;l=d[k];k++)a.left>l.right||a.right<l.left||a.top>l.bottom||a.bottom<l.top||(a=c===0?l.top-h-b:l.bottom+b,a=new Na(a,a+h,e,e+f),k=-1);return a};function ej(a){ej.i.constructor.call(this);this.g=a;this.id="trashcan";this.Gd=[];this.Xb=null;this.g.options.Fj<=0||(a=new ze({scrollbars:!0,parentWorkspace:this.g,rtl:this.g.o,oneBasedIndex:this.g.options.Mj,renderer:this.g.options.Hm,rendererOverrides:this.g.options.Im,move:{scrollbars:!0}}),a.Rb=this.g.Rb==3?2:3,this.Xb=new (md(id,this.g.options,!0))(a),Mf(this.g,this.us.bind(this)))}L(ej,ek);g=ej.prototype;g.Xc=47;g.oi=44;g.qf=16;g.zg=20;g.kk=20;g.zi=10;g.qk=0;g.rk=32;g.Iq=.1;g.uj=!1;g.Xl=0;
g.l=null;g.ck=null;g.Nl=0;g.Pd=0;g.md=0;g.td=0;g.oh=!1;
g.xa=function(){this.l=D(lc,{"class":"blocklyTrash"},null);var a=String(Math.random()).substring(2);var b=D(cc,{id:"blocklyTrashBodyClipPath"+a},this.l);D(qc,{width:this.Xc,height:this.oi,y:this.qf},b);var c=D(mc,{width:96,x:-this.qk,height:124,y:-this.rk,"clip-path":"url(#blocklyTrashBodyClipPath"+a+")"},this.l);c.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",this.g.options.We+"sprites.png");b=D(cc,{id:"blocklyTrashLidClipPath"+a},this.l);D(qc,{width:this.Xc,height:this.qf},b);this.ck=
D(mc,{width:96,x:-this.qk,height:124,y:-this.rk,"clip-path":"url(#blocklyTrashLidClipPath"+a+")"},this.l);this.ck.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",this.g.options.We+"sprites.png");Pb(this.l,"mousedown",this,this.dr);Pb(this.l,"mouseup",this,this.click);Pb(c,"mouseover",this,this.ks);Pb(c,"mouseout",this,this.hs);this.zk();return this.l};
g.S=function(){this.g.options.Fj>0&&(Bc(this.Xb.xa(rc),Fe(this.g)),this.Xb.S(this.g));Rb(this.g.mc,{component:this,weight:1,$c:[Zb,Ub,Yb,Xb]});this.oh=!0;this.jg(!1)};g.dispose=function(){Sb(this.g.mc,"trashcan");this.l&&(Ac(this.l),this.l=null);this.g=this.ck=null;clearTimeout(this.Nl)};
g.position=function(a,b){if(this.oh){var c=hk(a);a=ik(gk(c,new Ua(this.Xc,this.oi+this.qf),this.kk,this.zg,a,this.g),this.zg,c.vertical===0?1:0,b);this.td=a.top;this.md=a.left;this.l.setAttribute("transform","translate("+this.md+","+this.td+")")}};g.Mf=function(){return new Na(this.td,this.td+this.oi+this.qf,this.md,this.md+this.Xc)};
g.Bo=function(){if(!this.l)return null;var a=this.l.getBoundingClientRect(),b=a.top+this.rk-this.zi;a=a.left+this.qk-this.zi;return new Na(b,b+this.qf+this.oi+2*this.zi,a,a+this.Xc+2*this.zi)};g.gm=function(){this.jg(this.hk)};g.fm=function(){this.jg(!1)};g.hm=function(){setTimeout(this.jg.bind(this,!1),100)};g.jg=function(a){this.uj!=a&&(clearTimeout(this.Nl),this.uj=a,this.zk())};
g.zk=function(){this.Pd+=this.uj?.2:-.2;this.Pd=Math.min(Math.max(this.Pd,this.Xl),1);jk(this,this.Pd*45);this.l.style.opacity=.4+this.Pd*.4;this.Pd>this.Xl&&this.Pd<1&&(this.Nl=setTimeout(this.zk.bind(this),20))};function jk(a,b){var c=a.g.Rb==3;a.ck.setAttribute("transform","rotate("+(c?-b:b)+","+(c?4:a.Xc-4)+","+(a.qf-2)+")")}g.click=function(){if(this.Gd.length&&(!this.Xb||!this.Xb.isVisible())){var a=this.Gd.map(Gd);this.Xb.show(a);Lj(this,!0)}};
function Lj(a,b){a=new (I("trashcan_open"))(b,a.g.id);G(a)}g.dr=function(a){this.Xb&&this.Xb.isVisible()||!this.Gd.length||a.stopPropagation()};g.ks=function(){this.Gd.length&&this.jg(!0)};g.hs=function(){this.jg(!1)};
g.us=function(a){if(!(this.g.options.Fj<=0)&&a.type=="delete"&&a.ag.tagName&&a.ag.tagName.toLowerCase()!="shadow"){for(var b=a=a.ag.cloneNode(!0);b;){b.removeAttribute&&(b.removeAttribute("x"),b.removeAttribute("y"),b.removeAttribute("id"),b.removeAttribute("disabled"),b.nodeName=="comment"&&(b.removeAttribute("h"),b.removeAttribute("w"),b.removeAttribute("pinned")));var c=b.firstChild||b.nextSibling;if(!c)for(c=b.parentNode;c;){if(c.nextSibling){c=c.nextSibling;break}c=c.parentNode}b=c}a=Fd(a);if(this.Gd.indexOf(a)==
-1){for(this.Gd.unshift(a);this.Gd.length>this.g.options.Fj;)this.Gd.pop();this.Xl=a=this.Iq;this.uj||jk(this,a*45)}}};function kk(a){kk.i.constructor.call(this);a.Qh=this.Os.bind(this);var b=this.g=new Gi(a),c=new yi(this.g,this);b.Mb=c;b.Hb=b.Mb.Hb.bind(b.Mb);this.g.Nd=!0;this.g.Da(this.ld);this.id=ub();this.o=!!a.o;this.ee=a.Rb;this.hl=[];this.Dj=[];this.Kg=[];this.Ka=[];this.vm=[];this.pg=this.g.ya.D().Gi;this.O=null}L(kk,ek);g=kk.prototype;g.se=!0;g.ld=!1;g.we=!0;g.sa=8;g.rf=kk.prototype.sa;g.Hq=kk.prototype.rf*3;g.Sq=2.5;g.ke=0;g.Bl=0;g.wr=70;
g.xa=function(a){this.l=D(a,{"class":"blocklyFlyout",style:"display: none"},null);this.Wa=D(oc,{"class":"blocklyFlyoutBackground"},this.l);this.l.appendChild(this.g.xa());this.g.La.subscribe(this.Wa,"flyoutBackgroundColour","fill");this.g.La.subscribe(this.Wa,"flyoutOpacity","fill-opacity");return this.l};
g.S=function(a){this.O=a;this.g.O=a;this.g.Y=new Ae(this.g,!1,!0,"blocklyFlyoutScrollbar",this.Sq);this.qb();Array.prototype.push.apply(this.hl,z(this.l,"wheel",this,this.nt));this.se||(this.ij=this.il.bind(this),Mf(this.O,this.ij));Array.prototype.push.apply(this.hl,z(this.Wa,"mousedown",this,this.Td));this.g.Id=this.O.Id.bind(this.O);this.g.Tm(this.O.aa);var b=this.g;b.Oj=new yf(b);Rb(a.mc,{component:this,weight:1,$c:[Ub,Yb]})};
g.dispose=function(){this.qb();Sb(this.g.mc,this.id);B(this.hl);this.ij&&(yb(this.O.Ka,this.ij),this.ij=null);this.g&&(this.g.La.unsubscribe(this.Wa),this.g.O=null,this.g.dispose(),this.g=null);this.l&&(Ac(this.l),this.l=null);this.O=this.Wa=null};g.ih=function(){return this.ke};g.isVisible=function(){return this.ld};g.Da=function(a){var b=a!=this.isVisible();this.ld=a;b&&(this.se||Qi(this.g),this.ii())};g.$e=function(a){var b=a!=this.we;this.we=a;b&&this.ii()};
g.ii=function(){var a=this.we?this.isVisible():!1;this.l.style.display=a?"block":"none";this.g.Y.$e(a)};g.qb=function(){if(this.isVisible()){this.Da(!1);for(var a=0,b;b=this.Ka[a];a++)B(b);this.Ka.length=0;this.Yd&&(yb(this.g.Ka,this.Yd),this.Yd=null)}};
g.show=function(a){this.g.gb(!1);this.qb();lk(this);typeof a=="string"&&(a=mk(this,a));this.Da(!0);a=xe(a);a=nk(this,a);ok(this,a.nr,a.Hr);this.Ka.push(z(this.Wa,"mouseover",this,function(){for(var b=this.g.Ja(!1),c=0,d;d=b[c];c++)d.Mh()}));this.ke=0;this.g.gb(!0);this.Bm();this.il();this.position();this.Yd=this.Bm.bind(this);Mf(this.g,this.Yd)};
function nk(a,b){var c=[],d=[];a.vm.length=0;for(var e=a.Hq,f=0,h;h=b[f];f++){if(h.custom){var k=mk(a,h.custom);k=xe(k);b.splice.apply(b,[f,1].concat(k));h=b[f]}switch(h.kind.toUpperCase()){case "BLOCK":k=h;var l=k;h=null;var m=l.blockxml;m&&typeof m!="string"?h=m:m&&typeof m=="string"?(h=Gd(m),l.blockxml=h):l.type&&(h=M("xml"),h.setAttribute("type",l.type),h.setAttribute("disabled",l.disabled),l.blockxml=h);if(!h)throw Error("Error: Invalid block definition. Block definition must have blockxml or type.");
l=h;h=a;m=Id(l,h.g);m.isEnabled()||h.vm.push(m);h=m;k=parseInt(k.gap||l.getAttribute("gap"),10);d.push(isNaN(k)?e:k);c.push({type:"block",block:h});break;case "SEP":k=d;l=e;h=parseInt(h.gap,10);!isNaN(h)&&k.length>0?k[k.length-1]=h:k.push(l);break;case "LABEL":k=pk(a,h,!0);c.push({type:"button",button:k});d.push(e);break;case "BUTTON":k=pk(a,h,!1),c.push({type:"button",button:k}),d.push(e)}}return{nr:c,Hr:d}}
function mk(a,b){b=a.g.O.dn[b]||null;if(typeof b!="function")throw TypeError("Couldn't find a callback function when opening a toolbox category.");a=b(a.g.O);if(!Array.isArray(a))throw new TypeError("Result of toolbox category callback must be an array.");return a}function pk(a,b,c){if(!Uj)throw Error("Missing require for Blockly.FlyoutButton");return new Uj(a.g,a.O,b,c)}
function lk(a){for(var b=a.g.Ja(!1),c=0,d;d=b[c];c++)d.j==a.g&&d.dispose(!1,!1);for(c=0;c<a.Dj.length;c++)if(b=a.Dj[c])mf(b),Ac(b);for(c=a.Dj.length=0;b=a.Kg[c];c++)b.dispose();a.Kg.length=0;a.g.Oj.clear()}function qk(a,b){return function(c){var d=a.O.Id(c);d&&(Xg(d,b),Wg(d,c,a))}}g.Td=function(a){var b=this.O.Id(a);b&&Wg(b,a,this)};
function Sg(a,b){var c=null;F++;var d=a.O.Lf();a.O.gb(!1);try{var e=a.O;if(!b.N())throw Error("oldBlock is not rendered.");var f=Cd(b,!0);e.gb(!1);var h=Id(f,e);if(!h.N())throw Error("block is not rendered.");var k=ob(e.va),l=ob(a.g.va),m=b.na();m.scale(a.g.scale);var q=La(Ma(l,m),k);q.scale(1/e.scale);h.moveBy(q.x,q.y);c=h}finally{F--}Xe();b=Od(a.O,d);if(F==0){H(!0);for(d=0;d<b.length;d++)e=b[d],G(new (I("var_create"))(e));G(new (I("create"))(c))}a.se?a.qb():a.il();return c}
g.il=function(){for(var a=this.g.Ja(!1),b=0,c;c=a[b];b++)if(this.vm.indexOf(c)==-1)for(var d=Jf(this.O,zb(c));c;)c.Tc(d),c=Bb(c)};
g.Bm=function(){this.Yd&&yb(this.g.Ka,this.Yd);this.g.scale=this.O.scale;for(var a=0,b=this.g.Ja(!1),c=0,d;d=b[c];c++){var e=yg(d).width;d.s&&(e-=this.pg);a=Math.max(a,e)}for(c=0;d=this.Kg[c];c++)a=Math.max(a,d.width);a+=this.rf*1.5+this.pg;a*=this.g.scale;a+=Ce;if(this.ke!=a){for(c=0;d=b[c];c++){if(this.o){e=d.na().x;var f=a/this.g.scale-this.rf;d.s||(f-=this.pg);d.moveBy(f-e,0)}d.wo&&(e=d.wo,f=d,d=yg(f),e.setAttribute("width",d.width),e.setAttribute("height",d.height),f=f.na(),e.setAttribute("y",
f.y),e.setAttribute("x",this.o?f.x-d.width:f.x))}if(this.o)for(c=0;d=this.Kg[c];c++)d.moveTo(a/this.g.scale-d.width-this.rf-this.pg,d.Xe.y);this.O.Rb!=this.ee||this.ee!=2||this.O.qa||this.O.translate(this.O.scrollX+a,this.O.scrollY);this.ke=a;this.position();Qi(this.O)}this.Yd&&Mf(this.g,this.Yd)};function Qg(a){return a.g.Y?a.g.Y.isVisible():!1};function rk(a){rk.i.constructor.call(this,a)}L(rk,kk);g=rk.prototype;g.Os=function(a){if(this.isVisible()){var b=this.g.Mb,c=b.Ce(),d=wi(b);b=vi(b);typeof a.y=="number"&&(this.g.scrollY=-(c.top+(c.height-d.height)*a.y));this.g.translate(this.g.scrollX+b.left,this.g.scrollY+b.top)}};
g.position=function(){if(this.isVisible()&&this.O.isVisible()){var a=wi(this.O.Mb);this.Bl=a.height;var b=this.ke-this.sa;a=a.height-2*this.sa;var c=this.ee==3,d=b+this.sa;d=["M "+(c?d:0)+",0"];d.push("h",c?-b:b);d.push("a",this.sa,this.sa,0,0,c?0:1,c?-this.sa:this.sa,this.sa);d.push("v",Math.max(0,a));d.push("a",this.sa,this.sa,0,0,c?0:1,c?this.sa:-this.sa,this.sa);d.push("h",c?b:-b);d.push("z");this.Wa.setAttribute("d",d.join(" "));this.isVisible()?(c=this.O.Mb,b=vi(c),a=wi(c),c=ui(c),c=this.O.Rb==
this.ee?this.O.qa?this.ee==2?c.width:a.width-this.ke:this.ee==2?0:a.width:this.ee==2?0:a.width+b.left-this.ke):c=0;b=this.ke;a=this.Bl;this.l.setAttribute("width",b);this.l.setAttribute("height",a);Si(this.g,b,a);this.l.tagName=="svg"?Cc(this.l,"translate("+c+"px,0px)"):this.l.setAttribute("transform","translate("+c+",0)");if(b=this.g.Y)b.Vj(c,0),b.resize(),b.oa&&b.oa.setPosition(b.oa.position.x,b.oa.position.y),b.Z&&b.Z.setPosition(b.Z.position.x,b.Z.position.y)}};
g.Kp=function(){var a=this.g.Y;a.Z&&a.Z.set(0,!0)};g.nt=function(a){var b=rb(a);if(b.y){var c=this.g.Mb,d=c.Ce();b=wi(c).top-d.top+b.y;c=this.g.Y;c.Z&&c.Z.set(b,!0);kh();Xc()}a.preventDefault();a.stopPropagation()};
function ok(a,b,c){a.g.scale=a.O.scale;for(var d=a.rf,e=a.o?d:d+a.pg,f=0,h;h=b[f];f++)if(h.type=="block"){h=h.block;for(var k=Ab(h,!1),l=0,m;m=k[l];l++)m.Kb=!0;h.X();l=h.N();k=yg(h);m=h.s?e-a.pg:e;h.moveBy(m,d);var q=a,n=h,p=k,t=f;m=D(qc,{"fill-opacity":0,x:a.o?m-k.width:m,y:d,height:p.height,width:p.width},null);m.ec=n;hf(m);q.g.va.insertBefore(m,n.N());n.wo=m;q.Dj[t]=m;q=a;q.Ka.push(z(l,"mousedown",null,qk(q,h)));q.Ka.push(z(m,"mousedown",null,qk(q,h)));q.Ka.push(Pb(l,"mouseenter",h,h.Ki));q.Ka.push(Pb(l,
"mouseleave",h,h.Mh));q.Ka.push(Pb(m,"mouseenter",h,h.Ki));q.Ka.push(Pb(m,"mouseleave",h,h.Mh));d+=k.height+c[f]}else h.type=="button"&&(k=a,l=h.button,m=e,q=d,n=l.xa(),l.moveTo(m,q),l.show(),k.Ka.push(z(n,"mousedown",k,k.Td)),k.Kg.push(l),d+=h.button.height+c[f])}g.Bo=function(){if(!this.l||this.se||!this.isVisible())return null;var a=this.l.getBoundingClientRect(),b=a.left;return this.ee==2?new Na(-1E9,1E9,-1E9,b+a.width):new Na(-1E9,1E9,b,1E9)};E(id,"default",rk);
function fj(a){this.g=a;this.id="zoomControls";this.wd=this.ni=this.ug=this.mm=this.lm=this.nm=null}g=fj.prototype;g.Xc=32;g.xd=32;g.Fi=2;g.yi=11;g.zg=20;g.kk=20;g.l=null;g.md=0;g.td=0;g.oh=!1;
g.xa=function(){this.l=D(lc,{},null);var a=String(Math.random()).substring(2);this.ni=D(lc,{"class":"blocklyZoom"},this.l);var b=D(cc,{id:"blocklyZoomoutClipPath"+a},this.ni);D(qc,{width:32,height:32},b);D(mc,{width:96,height:124,x:-64,y:-92,"clip-path":"url(#blocklyZoomoutClipPath"+a+")"},this.ni).setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",this.g.options.We+"sprites.png");this.mm=z(this.ni,"mousedown",null,this.lq.bind(this,-1));this.ug=D(lc,{"class":"blocklyZoom"},this.l);b=D(cc,
{id:"blocklyZoominClipPath"+a},this.ug);D(qc,{width:32,height:32},b);D(mc,{width:96,height:124,x:-32,y:-92,"clip-path":"url(#blocklyZoominClipPath"+a+")"},this.ug).setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",this.g.options.We+"sprites.png");this.lm=z(this.ug,"mousedown",null,this.lq.bind(this,1));this.g.Na()&&(this.wd=D(lc,{"class":"blocklyZoom"},this.l),b=D(cc,{id:"blocklyZoomresetClipPath"+a},this.wd),D(qc,{width:32,height:32},b),D(mc,{width:96,height:124,y:-92,"clip-path":"url(#blocklyZoomresetClipPath"+
a+")"},this.wd).setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",this.g.options.We+"sprites.png"),this.nm=z(this.wd,"mousedown",null,this.Hs.bind(this)));return this.l};g.S=function(){Rb(this.g.mc,{component:this,weight:2,$c:[Xb]});this.oh=!0};g.dispose=function(){Sb(this.g.mc,"zoomControls");this.l&&Ac(this.l);this.nm&&B(this.nm);this.lm&&B(this.lm);this.mm&&B(this.mm)};
g.Mf=function(){var a=this.Fi+2*this.xd;this.wd&&(a+=this.yi+this.xd);return new Na(this.td,this.td+a,this.md,this.md+this.Xc)};
g.position=function(a,b){if(this.oh){var c=hk(a),d=this.Fi+2*this.xd;this.wd&&(d+=this.yi+this.xd);var e=c.vertical;a=ik(gk(c,new Ua(this.Xc,d),this.kk,this.zg,a,this.g),this.zg,e===0?1:0,b);e===0?(e=this.Fi+this.xd,this.ug.setAttribute("transform","translate(0, "+e+")"),this.wd&&this.wd.setAttribute("transform","translate(0, "+(e+this.yi+this.xd)+")")):(e=this.wd?this.yi+this.xd:0,this.ug.setAttribute("transform","translate(0, "+e+")"),this.ni.setAttribute("transform","translate(0, "+(e+this.Fi+
this.xd)+")"));this.td=a.top;this.md=a.left;this.l.setAttribute("transform","translate("+this.md+","+this.td+")")}};g.lq=function(a,b){Yc(this.g);Xi(this.g,a);sk(this);Eb=null;b.stopPropagation();b.preventDefault()};
g.Hs=function(a){Yc(this.g);var b=Math.log(this.g.options.ra.Rp/this.g.scale)/Math.log(this.g.options.ra.Jp),c=this.g;xc(c.va,"blocklyCanvasTransitioning");xc(c.Vc,"blocklyCanvasTransitioning");Xi(this.g,b);b=this.g;if(b.Na()){c=b.Hb();var d=(c.scrollWidth-c.Oa)/2,e=(c.scrollHeight-c.Ya)/2;d=-d-c.scrollLeft;e=-e-c.scrollTop;b.scroll(d,e)}else console.warn("Tried to move a non-movable workspace. This could result in blocks becoming inaccessible.");setTimeout(this.g.zr.bind(this.g),500);sk(this);Eb=
null;a.stopPropagation();a.preventDefault()};function sk(a){a=new (I("click"))(null,a.g.id,"zoom_controls");G(a)}oe([".blocklyZoom>image, .blocklyZoom>svg>image {","opacity: .4;","}",".blocklyZoom>image:hover, .blocklyZoom>svg>image:hover {","opacity: .6;","}",".blocklyZoom>image:active, .blocklyZoom>svg>image:active {","opacity: .8;","}"]);var tk={am:"\u12a0\u121b\u122d\u129b",ar:"\u0627\u0644\u0639\u0631\u0628\u064a\u0629",be:"\u0431\u0435\u043b\u0430\u0440\u0443\u0441\u043a\u0456","be-tarask":"Tara\u0161kievica",bg:"\u0431\u044a\u043b\u0433\u0430\u0440\u0441\u043a\u0438 \u0435\u0437\u0438\u043a",bn:"\u09ac\u09be\u0982\u09b2\u09be",br:"Brezhoneg",ca:"Catal\u00e0",cs:"\u010cesky",da:"Dansk",de:"Deutsch",el:"\u0395\u03bb\u03bb\u03b7\u03bd\u03b9\u03ba\u03ac",en:"English",eo:"Esperanto",es:"Espa\u00f1ol",eu:"Euskara",fa:"\u0641\u0627\u0631\u0633\u06cc",
fi:"Suomi",fo:"F\u00f8royskt",fr:"Fran\u00e7ais",gl:"Galego",ha:"Hausa",he:"\u05e2\u05d1\u05e8\u05d9\u05ea",hi:"\u0939\u093f\u0928\u094d\u0926\u0940",hr:"Hrvatski",hu:"Magyar",hy:"\u0570\u0561\u0575\u0565\u0580\u0567\u0576",ia:"Interlingua",id:"Bahasa Indonesia",ig:"As\u1ee5s\u1ee5 Igbo",is:"\u00cdslenska",it:"Italiano",ja:"\u65e5\u672c\u8a9e",kab:"Taqbaylit",kn:"\u0c95\u0ca8\u0ccd\u0ca8\u0ca1",ko:"\ud55c\uad6d\uc5b4",lt:"Lietuvi\u0173",lv:"Latvie\u0161u",ms:"Bahasa Melayu",my:"\u1019\u103c\u1014\u103a\u1019\u102c\u1005\u102c",
nb:"Norsk (bokm\u00e5l)",nl:"Nederlands, Vlaams",pl:"Polski",pms:"Piemont\u00e8is",pt:"Portugu\u00eas","pt-br":"Portugu\u00eas Brasileiro",ro:"Rom\u00e2n\u0103",ru:"\u0420\u0443\u0441\u0441\u043a\u0438\u0439",sc:"Sardu",sk:"Sloven\u010dina",sl:"Sloven\u0161\u010dina",sq:"Shqip",sr:"\u0421\u0440\u043f\u0441\u043a\u0438","sr-latn":"Srpski",sv:"Svenska",th:"\u0e20\u0e32\u0e29\u0e32\u0e44\u0e17\u0e22",ti:"\u1275\u130d\u122d\u129b",tr:"T\u00fcrk\u00e7e",uk:"\u0423\u043a\u0440\u0430\u0457\u043d\u0441\u044c\u043a\u0430",
ur:"\u0627\u064f\u0631\u062f\u064f\u0648\u202c",vi:"Ti\u1ebfng Vi\u1ec7t",yo:"\u00c8d\u00e8 Yor\u00f9b\u00e1","zh-hans":"\u7b80\u4f53\u4e2d\u6587","zh-hant":"\u6b63\u9ad4\u4e2d\u6587"},uk=window.BlocklyGamesLang,vk=window.BlocklyGamesLanguages,wk=["ar","fa","he","ur"].includes(uk),xk=/\.html$/.test(window.location.pathname),Q=document.getElementById.bind(document);
function yk(a){try{if(a.lineno||a.colno){var b=Date.now();if(!(yk.ap+1E4>b)){yk.ap=b;var c=new XMLHttpRequest,d="error="+encodeURIComponent((a.error&&a.error.stack||a.message+" "+a.filename+" "+a.lineno+":"+a.colno).trim())+"&url="+encodeURIComponent(window.location);c.open("POST","/scripts/errorReporter.py");c.setRequestHeader("Content-Type","application/x-www-form-urlencoded");c.send(d);console.log("Error reported.")}}}catch(e){console.log(a.error)}}yk.ap=0;xk||window.addEventListener("error",yk);
function zk(a){var b=Math,c=b.floor,d=Number;var e=(e=window.location.search.match(RegExp("[?&]level=([^&]+)")))?decodeURIComponent(e[1].replace(/\+/g,"%20")):"NaN";b=c.call(b,d(e));return isNaN(b)?1:Math.max(1,Math.min(b,a))}var Ak=10,Bk=zk(Ak);
function Ck(a){document.title=R("Games.name",!0)+(a&&" : ")+a;document.dir=wk?"rtl":"ltr";document.head.parentElement.setAttribute("lang",uk);if(a=Q("languageMenu")){for(var b=[],c=v(vk),d=c.next();!d.done;d=c.next())d=d.value,b.push([tk[d],d]);b.sort(function(e,f){return e[0]>f[0]?1:e[0]<f[0]?-1:0});a.options.length=0;b=v(b);for(c=b.next();!c.done;c=b.next())d=v(c.value),c=d.next().value,d=d.next().value,c=new Option(c,d),d===uk&&(c.selected=!0),a.options.add(c);a.options.length<=1&&(a.style.display=
"none")}for(a=1;a<=Ak;a++)Q("level"+a);(a=document.querySelector('meta[name="viewport"]'))&&screen.availWidth<725&&a.setAttribute("content","width=725, initial-scale=.35, user-scalable=no")}function Dk(a,b){if(!a)throw TypeError("Element not found: "+a);typeof a==="string"&&(a=Q(a));a.addEventListener("click",b,!0);a.addEventListener("touchend",function(c){c.preventDefault();b(c)},!0)}function R(a,b){var c=window.BlocklyGamesMsg[a];c===void 0&&(c="[Unknown message: "+a+"]");return b?Ek(c):c}
function Ek(a){return a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")};function Fk(a,b){for(var c=0,d=0;d<b.length;d++)for(var e=b[d];e;)setTimeout(e.Ze.bind(e,a),c),e=Bb(e),c+=10}function Gk(a,b){if(Ed(a))Array.prototype.push.apply(b,Ab(a,!1));else{a=Bd(a,!1);for(var c=0;c<a.length;c++)Gk(a[c],b)}}function Hk(a){var b=[];a=a.Ja(!0);for(var c=0;c<a.length;c++)Gk(a[c],b);return b}function Ik(a,b){H(b);var c=a.shift();c&&(c.j?(c.dispose(!1,!0),setTimeout(Ik,10,a,b)):Ik(a,b));H(!1)}
Qh.register({ob:function(){return w.UNDO},Ba:function(a){return a.j.ff.length>0?"enabled":"disabled"},wa:function(a){Lf(a.j,!1)},Pb:"workspace",id:"undoWorkspace",weight:1});Qh.register({ob:function(){return w.REDO},Ba:function(a){return a.j.Lh.length>0?"enabled":"disabled"},wa:function(a){Lf(a.j,!0)},Pb:"workspace",id:"redoWorkspace",weight:2});
Qh.register({ob:function(){return w.CLEAN_UP},Ba:function(a){return a.j.Na()?a.j.Ja(!1).length>1?"enabled":"disabled":"hidden"},wa:function(a){a=a.j;a.gb(!1);H(!0);for(var b=a.Ja(!0),c=0,d=0,e;e=b[d];d++)if(e.Na()){var f=e.na();e.moveBy(-f.x,c-f.y);ii(e);c=e.na().y+yg(e).height+a.ya.D().Ai}H(!1);a.gb(!0)},Pb:"workspace",id:"cleanWorkspace",weight:3});
Qh.register({ob:function(){return w.COLLAPSE_ALL},Ba:function(a){if(a.j.options.collapse){a=a.j.Ja(!1);for(var b=0;b<a.length;b++)for(var c=a[b];c;){if(!c.isCollapsed())return"enabled";c=Bb(c)}return"disabled"}return"hidden"},wa:function(a){Fk(!0,a.j.Ja(!0))},Pb:"workspace",id:"collapseWorkspace",weight:4});
Qh.register({ob:function(){return w.EXPAND_ALL},Ba:function(a){if(a.j.options.collapse){a=a.j.Ja(!1);for(var b=0;b<a.length;b++)for(var c=a[b];c;){if(c.isCollapsed())return"enabled";c=Bb(c)}return"disabled"}return"hidden"},wa:function(a){Fk(!1,a.j.Ja(!0))},Pb:"workspace",id:"expandWorkspace",weight:5});
Qh.register({ob:function(a){if(a.j)return a=Hk(a.j).length,a==1?w.DELETE_BLOCK:w.DELETE_X_BLOCKS.replace("%1",String(a))},Ba:function(a){if(a.j)return Hk(a.j).length>0?"enabled":"disabled"},wa:function(a){if(a.j){ki(a.j);var b=Hk(a.j),c=ub();b.length<2?Ik(b,c):Ef(w.DELETE_ALL_BLOCKS.replace("%1",b.length),function(d){d&&Ik(b,c)})}},Pb:"workspace",id:"workspaceDelete",weight:6});
Qh.register({ob:function(){return w.DUPLICATE_BLOCK},Ba:function(a){a=a.block;return!a.Kb&&Ed(a)&&a.Na()?(Kf(a.j)?Jf(a.j,zb(a,!0)):1)?"enabled":"disabled":"hidden"},wa:function(a){if(a.block){a=a.block;var b=Wi,c=Gj;Jj(a);Vi(a.j);Wi=b;Gj=c}},Pb:"block",id:"blockDuplicate",weight:1});
Qh.register({ob:function(a){return a.block.kc?w.REMOVE_COMMENT:w.ADD_COMMENT},Ba:function(a){a=a.block;return Ya||a.Kb||!a.j.options.kr||a.isCollapsed()||!a.Zb()?"hidden":"enabled"},wa:function(a){a=a.block;a.kc?a.hg(null):a.hg("")},Pb:"block",id:"blockComment",weight:2});
Qh.register({ob:function(a){return dg(a.block)?w.EXTERNAL_INPUTS:w.INLINE_INPUTS},Ba:function(a){a=a.block;if(!a.Kb&&a.Na()&&!a.isCollapsed())for(var b=1;b<a.v.length;b++)if(a.v[b-1].type!=3&&a.v[b].type!=3)return"enabled";return"hidden"},wa:function(a){a.block.bf(!dg(a.block))},Pb:"block",id:"blockInline",weight:3});
Qh.register({ob:function(a){return a.block.isCollapsed()?w.EXPAND_BLOCK:w.COLLAPSE_BLOCK},Ba:function(a){a=a.block;return!a.Kb&&a.Na()&&a.j.options.collapse?"enabled":"hidden"},wa:function(a){a.block.Ze(!a.block.isCollapsed())},Pb:"block",id:"blockCollapseExpand",weight:4});
Qh.register({ob:function(a){return a.block.isEnabled()?w.DISABLE_BLOCK:w.ENABLE_BLOCK},Ba:function(a){a=a.block;return!a.Kb&&a.j.options.disable&&a.Zb()?Eh(a)?"disabled":"enabled":"hidden"},wa:function(a){a=a.block;var b=nd;b||H(!0);a.Tc(!a.isEnabled());b||H(!1)},Pb:"block",id:"blockDisable",weight:5});
Qh.register({ob:function(a){var b=a.block;a=Ab(b,!1).length;(b=Bb(b))&&(a-=Ab(b,!1).length);return a==1?w.DELETE_BLOCK:w.DELETE_X_BLOCKS.replace("%1",String(a))},Ba:function(a){return!a.block.Kb&&Ed(a.block)?"enabled":"hidden"},wa:function(a){H(!0);a.block&&Ij(a.block);H(!1)},Pb:"block",id:"blockDelete",weight:6});
Qh.register({ob:function(){return w.HELP},Ba:function(a){a=a.block;return(typeof a.Vf=="function"?a.Vf():a.Vf)?"enabled":"hidden"},wa:function(a){a.block.showHelp()},Pb:"block",id:"blockHelp",weight:7});function S(a,b){return" "+a+","+b+" "}function Jk(a,b){return" "+a+b.join("")}function Kk(a,b){return" M "+a+","+b+" "}function tg(a,b){return" m "+a+","+b+" "}function Lk(a,b){return" l "+a+","+b+" "}function O(a,b){return" "+a+" "+b+" "}function Mk(a,b,c){return"a "+b+" "+b+" "+a+c};function Nk(){this.Dc=0;this.Tq=3;this.Sb=5;this.un=8;this.jb=10;this.Gn=this.Sb;this.Eg=15;this.uf=5;this.Gi=8;this.Pq=15;this.lk=4;this.Oq=12;this.wq=16;this.vq=this.mn=this.Eg;this.sa=8;this.Xq=this.Ag=15;this.En=0;this.Fn=20;this.nq=4;this.Yq=this.Sb;this.Zq=this.jb;this.pq=this.Sb;this.oq=this.jb;this.jn=!1;this.Vq=15;this.Wq=100;this.Uq=15;this.Ai=24;this.yq=14.5;this.xq=this.Eg+11;this.Aq=2;this.zq=this.Ai;this.Dn=tg(0,0);this.Lq=12;this.Mq=6;this.yg=11;this.mf="normal";this.lf="sans-serif";
this.qn=this.ui=-1;this.si=4;this.nn=16;this.wg=5;this.Bq="#fff";this.jk=!Ya&&!Za;this.on=this.nn;this.Dq=this.Cq=this.pn=!1;this.Fq=this.wg;this.xg=12;this.Eq="data:image/svg+xml;base64,PHN2ZyBpZD0iTGF5ZXJfMSIgZGF0YS1uYW1lPSJMYXllciAxIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMi43MSIgaGVpZ2h0PSI4Ljc5IiB2aWV3Qm94PSIwIDAgMTIuNzEgOC43OSI+PHRpdGxlPmRyb3Bkb3duLWFycm93PC90aXRsZT48ZyBvcGFjaXR5PSIwLjEiPjxwYXRoIGQ9Ik0xMi43MSwyLjQ0QTIuNDEsMi40MSwwLDAsMSwxMiw0LjE2TDguMDgsOC4wOGEyLjQ1LDIuNDUsMCwwLDEtMy40NSwwTDAuNzIsNC4xNkEyLjQyLDIuNDIsMCwwLDEsMCwyLjQ0LDIuNDgsMi40OCwwLDAsMSwuNzEuNzFDMSwwLjQ3LDEuNDMsMCw2LjM2LDBTMTEuNzUsMC40NiwxMiwuNzFBMi40NCwyLjQ0LDAsMCwxLDEyLjcxLDIuNDRaIiBmaWxsPSIjMjMxZjIwIi8+PC9nPjxwYXRoIGQ9Ik02LjM2LDcuNzlhMS40MywxLjQzLDAsMCwxLTEtLjQyTDEuNDIsMy40NWExLjQ0LDEuNDQsMCwwLDEsMC0yYzAuNTYtLjU2LDkuMzEtMC41Niw5Ljg3LDBhMS40NCwxLjQ0LDAsMCwxLDAsMkw3LjM3LDcuMzdBMS40MywxLjQzLDAsMCwxLDYuMzYsNy43OVoiIGZpbGw9IiNmZmYiLz48L3N2Zz4=";
this.Qj=String(Math.random()).substring(2);this.cl="";this.dl=null;this.po="";this.Ug=this.jo=this.Tk=null;this.ln="#cc0a0a";this.sn="#4286f4";this.ri=100;this.In=5;this.pi=10;this.tq=2;this.uq=4;this.Jq="#000000";this.rn=.2;this.Cn={Rq:1,sf:2}}g=Nk.prototype;
g.S=function(){this.pf=this.Ql();this.sf=this.Rl();this.tf=this.Tl();this.nk=this.Sl();var a=this.sa;this.xi={width:a,height:a,um:Mk("0 0,0",a,S(-a,a)),Nj:Mk("0 0,0",a,S(a,a))};a=this.sa;this.Cg={fn:tg(0,a)+Mk("0 0,1",a,S(a,-a)),et:Mk("0 0,1",a,S(a,a)),er:Mk("0 0,1",a,S(-a,a)),Ek:Mk("0 0,1",a,S(-a,-a)),Ks:a}};g.Th=function(){this.Oi=Object.create(null);var a=Gc("Hg",this.yg+"pt",this.mf,this.lf);this.ui=a.height;this.qn=a.Tb};
function li(a,b){var c="auto_"+b;a.Oi[c]||(a.Oi[c]=Ok({colourPrimary:b}));return{style:a.Oi[c],name:c}}function hi(a,b){return a.Oi[b||""]||(b&&b.indexOf("auto_")==0?li(a,b.substring(5)).style:Ok({colourPrimary:"#000000"}))}function Ok(a){var b={};a&&yd(b,a);a=Cb(b.colourPrimary||"#000");b.ve=a.kh;b.colourSecondary?a=Cb(b.colourSecondary).kh:(a=b.ve,a=Ia("#fff",a,.6)||a);b.Vi=a;b.colourTertiary?a=Cb(b.colourTertiary).kh:(a=b.ve,a=Ia("#fff",a,.3)||a);b.Ff=a;b.Mc=b.hat||"";return b}
g.dispose=function(){this.dl&&Ac(this.dl);this.Tk&&Ac(this.Tk);this.jo&&Ac(this.jo);this.Ug=null};g.Ql=function(){var a=this.Lq,b=this.Mq;return{height:a,width:b,path:" l"+[S(b,a/4),S(-b*2,a/2),S(b,a/4)].join("")}};g.Tl=function(){var a=this.Vq,b=this.Wq;return{height:a,width:b,path:Jk("c",[S(30,-a),S(70,-a),S(b,0)])}};
g.Sl=function(){function a(f){f=f?-1:1;var h=-f,k=c/2;return Jk("c",[S(0,f*(k+2.5)),S(-b,h*(k+.5)),S(-b,f*k)])+Jk("s",[S(b,h*2.5),S(b,f*k)])}var b=this.Gi,c=this.Eg,d=a(!0),e=a(!1);return{type:this.Cn.Rq,width:b,height:c,ac:e,Hh:d}};g.Rl=function(){function a(h){return" l"+[S(h*d,c),S(h*3,0),S(h*d,-c)].join("")}var b=this.Pq,c=this.lk,d=(b-3)/2,e=a(1),f=a(-1);return{type:this.Cn.sf,width:b,height:c,Wd:e,yp:f}};
function sg(a,b){switch(b.type){case 1:case 2:return a.nk;case 4:case 3:return a.sf;default:throw Error("Unknown connection type");}}
g.xa=function(a,b,c){c=this.ql(c);b="blockly-renderer-style-"+b;this.Ug=document.getElementById(b);c=c.join("\n");if(this.Ug)this.Ug.firstChild.textContent=c;else{var d=document.createElement("style");d.id=b;d.appendChild(document.createTextNode(c));document.head.insertBefore(d,document.head.firstChild);this.Ug=d}a=D(dc,{},a);b=D(kc,{id:"blocklyEmbossFilter"+this.Qj},a);D(fc,{"in":"SourceAlpha",stdDeviation:1,result:"blur"},b);c=D(hc,{"in":"blur",surfaceScale:1,specularConstant:.5,specularExponent:10,
"lighting-color":"white",result:"specOut"},b);D(gc,{x:-5E3,y:-1E4,z:2E4},c);D(ec,{"in":"specOut",in2:"SourceAlpha",operator:"in",result:"specOut"},b);D(ec,{"in":"SourceGraphic",in2:"specOut",operator:"arithmetic",k1:0,k2:1,k3:1,k4:0},b);this.cl=b.id;this.dl=b;a=D(pc,{id:"blocklyDisabledPattern"+this.Qj,patternUnits:"userSpaceOnUse",width:10,height:10},a);D(qc,{width:10,height:10,fill:"#aaa"},a);D(oc,{d:"M 0 0 L 10 10 M 10 0 L 0 10",stroke:"#cc0"},a);this.po=a.id;this.Tk=a};
g.ql=function(a){return[a+" .blocklyText, ",a+" .blocklyFlyoutLabelText {","font: "+this.mf+" "+this.yg+"pt "+this.lf+";","}",a+" .blocklyText {","fill: #fff;","}",a+" .blocklyNonEditableText>rect,",a+" .blocklyEditableText>rect {","fill: "+this.Bq+";","fill-opacity: .6;","stroke: none;","}",a+" .blocklyNonEditableText>text,",a+" .blocklyEditableText>text {","fill: #000;","}",a+" .blocklyFlyoutLabelText {","fill: #000;","}",a+" .blocklyText.blocklyBubbleText {","fill: #000;","}",a+" .blocklyEditableText:not(.editing):hover>rect {",
"stroke: #fff;","stroke-width: 2;","}",a+" .blocklyHtmlInput {","font-family: "+this.lf+";","font-weight: "+this.mf+";","}",a+" .blocklySelected>.blocklyPath {","stroke: #fc3;","stroke-width: 3px;","}",a+" .blocklyHighlightedConnectionPath {","stroke: #fc3;","}",a+" .blocklyReplaceable .blocklyPath {","fill-opacity: .5;","}",a+" .blocklyReplaceable .blocklyPathLight,",a+" .blocklyReplaceable .blocklyPathDark {","display: none;","}",a+" .blocklyInsertionMarker>.blocklyPath {","fill-opacity: "+this.rn+
";","stroke: none;","}"]};function Pk(a){this.Df=this.R=this.type=this.height=this.width=0;this.h=a;this.$b=this.h.Ag};function Qk(a,b){Qk.i.constructor.call(this,a);this.lb=b;this.shape=sg(this.h,b);this.Ke=!!this.shape.isDynamic;this.type|=1024}L(Qk,Pk);function Rk(a,b){Rk.i.constructor.call(this,a,b);this.type|=8192;this.height=this.Ke?0:this.shape.height;this.dc=this.width=this.Ke?0:this.shape.width;this.Eb=this.h.uf;this.Qg=0}L(Rk,Qk);function Sk(a,b){Sk.i.constructor.call(this,a,b);this.type|=2048;this.height=this.shape.height;this.width=this.shape.width}L(Sk,Qk);
function Tk(a,b){Tk.i.constructor.call(this,a,b);this.type|=4096;this.height=this.shape.height;this.width=this.shape.width}L(Tk,Qk);function Uk(a,b){Uk.i.constructor.call(this,a,b.connection);this.type|=128;this.input=b;this.align=b.align;(this.Fd=b.connection&&b.connection.G()?b.connection.G():null)?(a=yg(this.Fd),this.Pg=a.width,this.Xi=a.height):this.Xi=this.Pg=0;this.Eb=this.Qg=0}L(Uk,Qk);
function Vk(a,b){Vk.i.constructor.call(this,a,b);this.type|=256;this.Fd?(this.width=this.Pg,this.height=this.Xi):(this.height=this.h.xq,this.width=this.h.yq);this.Gf=this.Ke?this.shape.height(this.height):this.shape.height;this.Gc=this.Ke?this.shape.width(this.height):this.shape.width;this.Fd||(this.width+=this.Gc*(this.Ke?2:1));this.Eb=this.Ke?this.shape.Eb(this.Gf):this.h.uf;this.Qg=this.Ke?this.shape.Qg(this.Gc):0}L(Vk,Uk);
function Wk(a,b){Wk.i.constructor.call(this,a,b);this.type|=512;this.height=this.Fd?this.Xi+this.h.En:this.h.zq;this.width=this.h.Xq+this.shape.width}L(Wk,Uk);function Xk(a,b){Xk.i.constructor.call(this,a,b);this.type|=64;this.height=this.Fd?this.Xi-this.h.uf-this.h.Sb:this.shape.height;this.width=this.shape.width+this.h.Aq;this.Eb=this.h.uf;this.Gf=this.shape.height;this.Gc=this.shape.width}L(Xk,Uk);function Yk(a,b){Yk.i.constructor.call(this,a);this.icon=b;this.isVisible=b.isVisible();this.type|=4;a=b.iu();this.height=a.height;this.width=a.width}L(Yk,Pk);function Zk(a){Zk.i.constructor.call(this,a);this.type|=524288;this.height=this.h.pf.height;this.width=this.h.pf.width}L(Zk,Pk);function $k(a,b){$k.i.constructor.call(this,a);this.to=b;this.Zb=b.vg;this.Er=b.Do();this.type|=1;a=this.to.getSize();this.height=a.height;this.width=a.width}L($k,Pk);
function al(a){al.i.constructor.call(this,a);this.type|=2;this.height=this.h.tf.height;this.width=this.h.tf.width;this.Bf=this.height}L(al,Pk);function bl(a,b){bl.i.constructor.call(this,a);this.type=(b&&b!="left"?131072:32768)|16384;this.width=this.height=this.h.Dc}L(bl,Pk);function cl(a,b){cl.i.constructor.call(this,a);this.type=(b&&b!="left"?262144:65536)|16384;this.width=this.h.sa;this.height=this.h.sa/2}L(cl,Pk);
function dl(a,b){dl.i.constructor.call(this,a);this.type|=40;this.width=b;this.height=this.h.Uq}L(dl,Pk);function el(a){this.type=1048576;this.elements=[];this.R=this.Ma=this.Bc=this.minWidth=this.minHeight=this.width=this.height=0;this.Ko=this.Tf=this.zl=this.Ga=this.Kd=!1;this.h=a;this.$b=this.h.Ag;this.align=null}el.prototype.measure=function(){throw Error("Unexpected attempt to measure a base Row.");};function fl(a){for(var b=a.elements.length-1,c;c=a.elements[b];b--)if(c.type&128)return c;return null}el.prototype.bk=function(){return!0};el.prototype.$g=function(){return!0};
function gl(a){gl.i.constructor.call(this,a);this.type|=2097152;this.Bf=this.ad=0;this.Vr=!1;this.connection=null}L(gl,el);gl.prototype.Al=function(a){var b=(a.Mc?a.Mc==="cap":this.h.jn)&&!a.s&&!a.C,c=a.C&&a.C.G();return!!a.s||b||(c?Bb(c)==a:!1)};
gl.prototype.measure=function(){for(var a=0,b=0,c=0,d=0,e;e=this.elements[d];d++)b+=e.width,e.type&8||(e.type&2?c=Math.max(c,e.Bf):a=Math.max(a,e.height));this.width=Math.max(this.minWidth,b);this.height=Math.max(this.minHeight,a)+c;this.ad=this.Bf=c;this.Bc=this.width};gl.prototype.bk=function(){return!1};gl.prototype.$g=function(){return!1};function hl(a){hl.i.constructor.call(this,a);this.type|=4194304;this.Lo=!1;this.connection=null;this.Tb=this.Wg=0}L(hl,el);
hl.prototype.Al=function(a){return!!a.s||!!Bb(a)};hl.prototype.measure=function(){for(var a=0,b=0,c=0,d=0,e;e=this.elements[d];d++)b+=e.width,e.type&8||(e.type&4096?c=Math.max(c,e.height):a=Math.max(a,e.height));this.width=Math.max(this.minWidth,b);this.height=Math.max(this.minHeight,a)+c;this.Wg=c;this.Bc=this.width};hl.prototype.bk=function(){return!1};hl.prototype.$g=function(){return!1};
function il(a,b,c){il.i.constructor.call(this,a);this.type|=24;this.width=c;this.height=b;this.xo=!1;this.Bc=0;this.elements=[new dl(this.h,c)]}L(il,el);il.prototype.measure=function(){};function jl(a){jl.i.constructor.call(this,a);this.type|=8388608;this.ao=0}L(jl,el);
jl.prototype.measure=function(){this.width=this.minWidth;this.height=this.minHeight;for(var a=0,b=0,c;c=this.elements[b];b++)this.width+=c.width,c.type&128&&(c.type&512?a+=c.Pg:c.type&64&&c.Pg!=0&&(a+=c.Pg-c.Gc)),c.type&8||(this.height=Math.max(this.height,c.height));this.ao=a;this.Bc=this.width+a};jl.prototype.$g=function(){return!this.Kd&&!this.Ga};function kl(a,b){this.W=b;this.ya=a;this.h=this.ya.D();this.s=b.s?new Rk(this.h,b.s):null;this.Xf=dg(b)&&!b.isCollapsed();this.isCollapsed=b.isCollapsed();this.Lb=b.Lb();this.o=b.o;this.ce=this.width=this.tg=this.height=0;this.rows=[];this.To=[];this.Oo=[];this.Ia=new gl(this.h);this.ta=new hl(this.h);this.ak=this.dc=0}g=kl.prototype;
g.measure=function(){var a=!!this.W.C,b=(this.W.Mc?this.W.Mc==="cap":this.h.jn)&&!this.s&&!a,c=this.Ia.Al(this.W)?bl:cl;this.Ia.elements.push(new c(this.h));b?(a=new al(this.h),this.Ia.elements.push(a),this.Ia.ad=a.Bf):a&&(this.Ia.Vr=!0,this.Ia.connection=new Sk(this.h,this.W.C),this.Ia.elements.push(this.Ia.connection));this.W.v.length&&this.W.v[0].type==3&&!this.W.isCollapsed()?this.Ia.minHeight=this.h.Zq:this.Ia.minHeight=this.h.Yq;c=bl;this.Ia.elements.push(new c(this.h,"right"));this.rows.push(this.Ia);
a=new jl(this.h);this.To.push(a);c=wg(this.W);b=0;for(var d;d=c[b];b++){var e=new Yk(this.h,d);this.isCollapsed&&d.Wt?this.Oo.push(e):a.elements.push(e)}d=null;for(b=0;c=this.W.v[b];b++)if(c.isVisible()){!d||c.type!=3&&d.type!=3&&(c.type!=1&&c.type!=5||this.Xf)||(this.rows.push(a),a=new jl(this.h),this.To.push(a));for(d=0;e=c.ea[d];d++)a.elements.push(new $k(this.h,e,c));this.Mn(c,a);d=c}this.isCollapsed&&(a.Ko=!0,a.elements.push(new Zk(this.h)));(a.elements.length||a.Tf)&&this.rows.push(a);this.ym();
this.rows.push(this.ta);this.Ln();a=this.rows;this.rows=[];for(b=0;b<a.length;b++)if(this.rows.push(a[b]),b!=a.length-1){c=this.rows;d=c.push;e=a[b];var f=a[b+1],h=new il(this.h,this.Eo(e,f),this.width-this.dc);e.Ga&&(h.xo=!0);f.Ga&&(h.qu=!0);d.call(c,h)}for(d=c=b=a=0;e=this.rows[d];d++)e.measure(),b=Math.max(b,e.width),e.Ga&&(a=Math.max(a,e.width-fl(e).width)),c=Math.max(c,e.Bc);this.ce=a;this.width=b;for(d=0;e=this.rows[d];d++)e.Ga&&(e.ce=this.ce);this.tg=Math.max(b,c);this.s&&(this.dc=this.s.width,
this.width+=this.s.width,this.tg+=this.s.width);this.yk();this.uo()};g.ym=function(){this.ta.Lo=!!this.W.B;this.ta.minHeight=this.W.v.length&&this.W.v[this.W.v.length-1].type==3?this.h.oq:this.h.pq;this.ta.Al(this.W)?this.ta.elements.push(new bl(this.h)):this.ta.elements.push(new cl(this.h));this.ta.Lo&&(this.ta.connection=new Tk(this.h,this.W.B),this.ta.elements.push(this.ta.connection));this.ta.elements.push(new bl(this.h,"right"))};
g.Mn=function(a,b){this.Xf&&a.type==1?(b.elements.push(new Vk(this.h,a)),b.zl=!0):a.type==3?(b.elements.push(new Wk(this.h,a)),b.Ga=!0):a.type==1?(b.elements.push(new Xk(this.h,a)),b.Kd=!0):a.type==5&&(b.minHeight=Math.max(b.minHeight,a.A()&&a.A().T?this.h.vq:this.h.mn),b.Tf=!0);b.align==null&&(b.align=a.align)};
g.Ln=function(){for(var a=0,b;b=this.rows[a];a++){var c=b.elements;b.elements=[];b.bk()&&b.elements.push(new dl(this.h,this.Be(null,c[0])));if(c.length){for(var d=0;d<c.length-1;d++)b.elements.push(c[d]),b.elements.push(new dl(this.h,this.Be(c[d],c[d+1])));b.elements.push(c[c.length-1]);b.$g()&&b.elements.push(new dl(this.h,this.Be(c[c.length-1],null)))}}};
g.Be=function(a,b){if(!a&&b&&b.type&512)return this.h.Fn;if(a&&a.type&128&&!b){if(a.type&64)return this.h.Dc;if(a.type&256)return this.h.jb;if(a.type&512)return this.h.Dc}return a&&a.type&32768&&b&&(b.type&2048||b.type&4096)?b.$b:a&&a.type&65536&&b&&(b.type&2048||b.type&4096)?b.$b-this.h.sa:this.h.Sb};g.yk=function(){for(var a=0,b;b=this.rows[a];a++)if(b.Ga)ll(this,b);else{var c=this.gh(b)-b.width;c>0&&ml(b,c);b.type&6291456&&(b.Bc=b.width)}};g.gh=function(){return this.width-this.dc};
function ml(a,b){a:{var c=0;for(var d;d=a.elements[c];c++)if(d.type&8){c=d;break a}c=null}a:{d=a.elements.length-1;for(var e;e=a.elements[d];d--)if(e.type&8){d=e;break a}d=null}if(a.Kd||a.Ga)a.Bc+=b;a.align==-1?d.width+=b:a.align==0?(c.width+=b/2,d.width+=b/2):a.align==1?c.width+=b:d.width+=b;a.width+=b}function ll(a,b){var c=fl(b),d=b.width-c.width,e=a.ce;d=e-d;d>0&&ml(b,d);d=b.width;e=a.gh(b);c.width+=e-d;c.height=Math.max(c.height,b.height);b.width+=e-d;b.Bc=Math.max(b.width,a.ce+b.ao)}g.Eo=function(){return this.h.Sb};
g.Co=function(a,b){return b.type&8?a.Ma+b.height/2:a.type&4194304?(a=a.Ma+a.height-a.Wg,b.type&4096?a+b.height/2:a-b.height/2):a.type&2097152?b.type&2?a.ad-b.height/2:a.ad+b.height/2:a.Ma+a.height/2};function nl(a,b){for(var c=b.R,d=0,e;e=b.elements[d];d++)e.type&8&&(e.height=b.height),e.R=c,e.Df=a.Co(b,e),c+=e.width}
g.uo=function(){for(var a=0,b=0,c=0,d;d=this.rows[c];c++)d.Ma=b,d.R=this.dc,b+=d.height,a=Math.max(a,d.Bc),nl(this,d);this.s&&this.W.B&&this.W.B.isConnected()&&(a=Math.max(a,yg(this.W.B.G()).width));this.tg=a+this.dc;this.height=b;this.ak=this.Ia.ad;this.ta.Tb=b-this.ta.Wg};function ol(a,b){this.W=a;this.H=b;a.na();this.qj=this.U="";this.h=b.ya.D()}g=ol.prototype;g.oc=function(){pl(this);ql(this);rl(this);this.W.za.Qm(this.U+"\n"+this.qj);this.H.o&&this.W.za.ll();sl(this)};function sl(a){a.W.height=a.H.height;a.W.width=a.H.tg}function pl(a){for(var b=0,c;c=a.H.Oo[b];b++)c.icon.Yr.setAttribute("display","none")}function ql(a){a.al();for(var b=1;b<a.H.rows.length-1;b++){var c=a.H.rows[b];c.Ko?a.Yg(c):c.Ga?a.$k(c):c.Kd?a.bl(c):a.qo(c)}a.Xk();a.Zk()}
g.al=function(){var a=this.H.Ia,b=a.elements,c=this.H.Ia;if(c.connection){var d=c.R+c.$b;Zh(c.connection.lb,this.H.o?-d:d,0)}this.U+=tg(a.R,this.H.ak);for(c=0;d=b[c];c++)d.type&65536?this.U+=this.h.Cg.fn:d.type&262144?this.U+=this.h.Cg.et:d.type&2048?this.U+=d.shape.Wd:d.type&2?this.U+=this.h.tf.path:d.type&8&&(this.U+=O("h",d.width));this.U+=O("v",a.height)};g.Yg=function(a){this.U+=this.h.pf.path+O("v",a.height-this.h.pf.height)};
g.bl=function(a){var b=fl(a);this.Dp(a);var c=typeof b.shape.ac=="function"?b.shape.ac(b.height):b.shape.ac;this.U+=O("H",b.R+b.width)+c+O("v",a.height-b.Gf)};g.$k=function(a){var b=fl(a);this.U+=O("H",b.R+b.$b+b.shape.width)+(b.shape.yp+O("h",-(b.$b-this.h.xi.width))+this.h.xi.um)+O("v",a.height-2*this.h.xi.height)+this.h.xi.Nj+O("H",a.R+a.width);this.Gp(a)};g.qo=function(a){this.U+=O("V",a.Ma+a.height)};
g.Xk=function(){var a=this.H.ta,b=a.elements;this.Fp();for(var c=0,d="",e=b.length-1,f;f=b[e];e--)f.type&4096?d+=f.shape.yp:f.type&32768?d+=O("H",a.R):f.type&65536?d+=this.h.Cg.Ek:f.type&262144?(d+=this.h.Cg.er,c=this.h.Cg.Ks):f.type&8&&(d+=O("h",f.width*-1));this.U+=O("V",a.Tb-c);this.U+=d};
g.Zk=function(){var a=this.H.s;if(this.H.s){var b=this.H.dc+this.H.s.Qg;Zh(this.W.s,this.H.o?-b:b,this.H.s.Eb)}a&&(b=a.Eb+a.height,a=typeof a.shape.Hh=="function"?a.shape.Hh(a.height):a.shape.Hh,this.U+=O("V",b)+a);this.U+="z"};
function rl(a){for(var b=0,c;c=a.H.rows[b];b++)for(var d=0,e;e=c.elements[d];d++)if(e.type&256)a.Yk(e);else if(e.type&4||e.type&1){var f=a;if(e.type&1)var h=e.to.N();else e.type&4&&(h=e.icon.Yr);var k=e.Df-e.height/2,l=e.R,m="";f.H.o&&(l=-(l+e.width),e.Er&&(l+=e.width,m="scale(-1 1)"));e.type&4?(h.setAttribute("display","block"),h.setAttribute("transform","translate("+l+","+k+")"),e.icon.lr()):h.setAttribute("transform","translate("+l+","+k+")"+m);f.H.Lb&&h.setAttribute("display","none")}}
g.Yk=function(a){var b=a.height,c=a.Eb;this.qj+=Kk(a.R+a.Gc,a.Df-b/2)+O("v",c)+a.shape.ac+O("v",b-(a.Gf+c))+O("h",a.width-a.Gc)+O("v",-b)+"z";this.Ep(a)};g.Ep=function(a){var b=a.Df-a.height/2;if(a.lb){var c=a.R+a.Gc+a.Qg;this.H.o&&(c*=-1);Zh(a.lb,c,b+a.Eb)}};g.Gp=function(a){var b=fl(a);if(b.lb){var c=a.R+a.ce+b.$b;this.H.o&&(c*=-1);Zh(b.lb,c,a.Ma)}};g.Dp=function(a){var b=fl(a);if(b.lb){var c=a.R+a.width;this.H.o&&(c*=-1);Zh(b.lb,c,a.Ma)}};
g.Fp=function(){var a=this.H.ta;if(a.connection){var b=a.connection,c=b.R;Zh(b.lb,this.H.o?-c:c,a.Tb)}};function tl(a,b,c,d){var e=a?a.j.id:void 0;d&&d.getType()=="workspace"&&(e=d.M.id);tl.i.constructor.call(this,e);this.ma=a?a.id:null;this.rp=c;this.np=d;this.Pc=b}L(tl,ee);tl.prototype.type="marker_move";tl.prototype.P=function(){var a=tl.i.P.call(this);a.isCursor=this.Pc;a.blockId=this.ma;a.oldNode=this.rp;a.newNode=this.np;return a};tl.prototype.L=function(a){tl.i.L.call(this,a);this.Pc=a.isCursor;this.ma=a.blockId;this.rp=a.oldNode;this.np=a.newNode};E(dd,"marker_move",tl);function Ri(a,b,c){this.g=a;this.Vl=c;this.Gh=null;this.h=b;this.If=null;a=this.Pc()?this.h.ln:this.h.sn;this.Ub=c.Kk||a}g=Ri.prototype;g.N=function(){return this.l};g.hh=function(){return this.Vl};g.Pc=function(){return this.Vl.type=="cursor"};
g.xa=function(){var a=this.Pc()?"blocklyCursor":"blocklyMarker";this.l=D(lc,{"class":a},null);this.od=D(lc,{width:this.h.ri,height:this.h.In},this.l);this.Qd=D(qc,{width:this.h.ri,height:this.h.In},this.od);this.Qe=D(qc,{"class":"blocklyVerticalMarker",rx:10,ry:10},this.od);this.Pe=D(oc,{transform:""},this.od);this.nd=D(oc,{transform:"",fill:"none","stroke-width":this.h.uq},this.od);this.qb();this.Pc()&&(a={attributeType:"XML",attributeName:"fill",dur:"1s",values:this.Ub+";transparent;transparent;",
repeatCount:"indefinite"},D(ac,a,this.Qd),D(ac,a,this.Pe),a.attributeName="stroke",D(ac,a,this.nd));return this.l};function ul(a,b){a.Pc()?(a.Gh&&a.Gh.rd(null),b.rd(a.N())):(a.Gh&&a.Gh.$d(null),b.$d(a.N()));a.Gh=b}
g.oc=function(a,b){if(b){this.h=this.g.ya.D();var c=this.Pc()?this.h.ln:this.h.sn;this.Ub=this.Vl.Kk||c;this.Qd.setAttribute("fill",this.Ub);this.Qe.setAttribute("stroke",this.Ub);this.Pe.setAttribute("fill",this.Ub);this.nd.setAttribute("stroke",this.Ub);this.Pc()&&(c=this.Ub+";transparent;transparent;",this.Qd.firstChild.setAttribute("values",c),this.Pe.firstChild.setAttribute("values",c),this.nd.firstChild.setAttribute("values",c));c=b.M.type;if(b.getType()=="block")vl(this,b);else if(b.getType()==
"output")vl(this,b);else if(c==1){var d=b.M;c=d.A();var e=d.Ve.x,f=d.Ve.y;d=Kk(0,0)+sg(this.h,d).ac;this.Pe.setAttribute("d",d);this.Pe.setAttribute("transform","translate("+e+","+f+")"+(this.g.o?" scale(-1 1)":""));this.If=this.Pe;ul(this,c);wl(this)}else if(c==3)f=b.M,c=f.A(),e=0,f=f.Ve.y,d=yg(c).width,this.g.o&&(e=-d),xl(this,e,f,d),ul(this,c),wl(this);else if(b.getType()=="previous")vl(this,b);else if(b.getType()=="field")c=b.M,e=c.getSize().width,f=c.getSize().height,yl(this,0,0,e,f),ul(this,
c),wl(this);else if(b.getType()=="workspace")e=b.iq,c=e.x,e=e.y,this.g.o&&(c-=this.h.ri),xl(this,c,e,this.h.ri),ul(this,this.g),wl(this);else if(b.getType()=="stack"){c=b.M;f=yg(c);e=f.width+this.h.pi;f=f.height+this.h.pi;var h=d=-this.h.pi/2,k=-this.h.pi/2;this.g.o&&(h=-(e+d));yl(this,h,k,e,f);ul(this,c);wl(this)}c=b.A();a=new (I("marker_move"))(c,this.Pc(),a,b);G(a);a=this.If.childNodes[0];a!==void 0&&a.beginElement&&a.beginElement()}else this.qb()};
function vl(a,b){b=b.A();var c=b.width,d=b.height,e=d*.75,f=a.h.tq;if(b.C){var h=sg(a.h,b.C);a.nd.setAttribute("d",tg(-f,e)+O("V",-f)+O("H",a.h.Ag)+h.Wd+O("H",c+f*2)+O("V",e))}else b.s?(h=sg(a.h,b.s),a.nd.setAttribute("d",tg(c,0)+O("h",-(c-h.width))+O("v",a.h.uf)+h.ac+O("V",d)+O("H",c))):a.nd.setAttribute("d",tg(-f,e)+O("V",-f)+O("H",c+f*2)+O("V",e));a.g.o&&a.eh(a.nd);a.If=a.nd;ul(a,b);wl(a)}function wl(a){a.qb();a.If.style.display=""}
function xl(a,b,c,d){a.Qd.setAttribute("x",b);a.Qd.setAttribute("y",c);a.Qd.setAttribute("width",d);a.If=a.Qd}function yl(a,b,c,d,e){a.Qe.setAttribute("x",b);a.Qe.setAttribute("y",c);a.Qe.setAttribute("width",d);a.Qe.setAttribute("height",e);a.If=a.Qe}g.eh=function(a){a.setAttribute("transform","scale(-1 1)")};g.qb=function(){this.Qd.style.display="none";this.Qe.style.display="none";this.Pe.style.display="none";this.nd.style.display="none"};g.dispose=function(){this.l&&Ac(this.l)};function zl(a,b,c){this.Rg=c;this.Wc=a;this.Ha=D(oc,{"class":"blocklyPath"},this.Wc);this.style=b;this.Ul=this.Vg=null}g=zl.prototype;g.Qm=function(a){this.Ha.setAttribute("d",a)};g.ll=function(){this.Ha.setAttribute("transform","scale(-1 1)")};g.rd=function(a){a?(this.Wc.appendChild(a),this.Vg=a):this.Vg=null};g.$d=function(a){a?(this.Vg?this.Wc.insertBefore(a,this.Vg):this.Wc.appendChild(a),this.Ul=a):this.Ul=null};
g.Sa=function(a){this.Ha.setAttribute("stroke",this.style.Ff);this.Ha.setAttribute("fill",this.style.ve);this.Zp(a.T);this.gn(!a.isEnabled()||Eh(a))};g.cf=function(a){this.style=a};function rg(a,b,c){c?xc(a.Wc,b):yc(a.Wc,b)}g.Yp=function(a){a?this.Ha.setAttribute("filter","url(#"+this.Rg.cl+")"):this.Ha.setAttribute("filter","none")};g.Zp=function(a){a&&(this.Ha.setAttribute("stroke","none"),this.Ha.setAttribute("fill",this.style.Vi))};
g.gn=function(a){rg(this,"blocklyDisabled",a);a&&this.Ha.setAttribute("fill","url(#"+this.Rg.po+")")};function Al(a){this.name=a;this.sm=this.h=null}g=Al.prototype;g.pc=function(){return this.name+"-renderer"};g.S=function(a,b){this.h=this.Pl();b&&(this.sm=b,yd(this.h,b));this.h.Th(a);this.h.S()};g.xa=function(a,b){this.h.xa(a,this.name+"-"+b.name,"."+this.pc()+"."+b.pc())};g.Cm=function(a,b){var c=this.D();c.dispose();this.h=this.Pl();this.sm&&yd(this.h,this.sm);this.h.Qj=c.Qj;this.h.Th(b);this.h.S();this.xa(a,b)};g.dispose=function(){this.h&&this.h.dispose()};g.Pl=function(){return new Nk};
g.hp=function(a){return new kl(this,a)};g.fp=function(a,b){return new ol(a,b)};g.gp=function(a,b){return new zl(a,b,this.h)};g.D=function(){return this.h};g.X=function(a){var b=this.hp(a);b.measure();this.fp(a,b).oc()};function Bl(){Bl.i.constructor.call(this);this.jk=!1;this.Pa=1;this.Nq=30;this.En=-this.lk/2}L(Bl,Nk);Bl.prototype.ql=function(a){return Bl.i.ql.call(this,a).concat([a+" .blocklyInsertionMarker>.blocklyPathLight,",a+" .blocklyInsertionMarker>.blocklyPathDark {","fill-opacity: "+this.rn+";","stroke: none;","}"])};function Cl(a){this.H=a;this.ph=this.F="";this.Qa=this.H.o;a=a.ya;this.h=a.D();this.Ib=a.Ib;this.xb=this.Ib.OFFSET;this.rm=this.Ib.Qq;this.Wf=this.Ib.Kq;this.Jh=this.Ib.nk;this.ss=this.Ib.sf;this.Us=this.Ib.tf;this.Zo=this.Ib.pf}Cl.prototype.Yg=function(a){this.H.o&&(this.F+=this.Zo.Wd+O("v",a.height-this.Zo.height-this.xb))};function Dl(a,b){var c=b.R+b.width-a.xb;b.xo&&(a.F+=O("H",c));a.Qa&&(a.F+=O("H",c),b.height>a.xb&&(a.F+=O("V",b.Ma+b.height-a.xb)))};function El(a,b){El.i.constructor.call(this,a,b);this.Fd&&(this.width+=this.h.Pa,this.height+=this.h.Pa)}L(El,Vk);function Fl(a,b){Fl.i.constructor.call(this,a,b);this.Fd&&(this.height+=this.h.Pa)}L(Fl,Wk);function Gl(a,b){Gl.i.constructor.call(this,a,b)}L(Gl,kl);g=Gl.prototype;g.ym=function(){Gl.i.ym.call(this);this.W.v.length&&this.W.v[this.W.v.length-1].type==3||(this.ta.minHeight=this.h.Sb-this.h.Pa)};g.Mn=function(a,b){this.Xf&&a.type==1?(b.elements.push(new El(this.h,a)),b.zl=!0):a.type==3?(b.elements.push(new Fl(this.h,a)),b.Ga=!0):a.type==1?(b.elements.push(new Xk(this.h,a)),b.Kd=!0):a.type==5&&(b.minHeight=Math.max(b.minHeight,this.h.mn),b.Tf=!0);this.Xf||b.align!=null||(b.align=a.align)};
g.Ln=function(){for(var a=!1,b=0,c;c=this.rows[b];b++)c.Kd&&(a=!0);for(b=0;c=this.rows[b];b++){var d=c.elements;c.elements=[];c.bk()&&c.elements.push(new dl(this.h,this.Be(null,d[0])));if(d.length){for(var e=0;e<d.length-1;e++){c.elements.push(d[e]);var f=this.Be(d[e],d[e+1]);c.elements.push(new dl(this.h,f))}c.elements.push(d[d.length-1]);c.$g()&&(f=this.Be(d[d.length-1],null),a&&c.Tf&&(f+=this.h.Gi),c.elements.push(new dl(this.h,f)))}}};
g.Be=function(a,b){if(!a)return b&&b.type&1&&b.Zb?this.h.Sb:b&&b.type&256?this.h.un:b&&b.type&512?this.h.Fn:this.h.jb;if(!(a.type&128)&&(!b||b.type&512))return a.type&1&&a.Zb?this.h.Sb:a.type&4?this.h.jb*2+1:a.type&2?this.h.Dc:a.type&6144?this.h.jb:a.type&65536?this.h.Oq:a.type&524288?this.h.Dc:this.h.jb;if(a.type&128&&!b){if(a.type&64)return this.h.Dc;if(a.type&256)return this.h.jb;if(a.type&512)return this.h.Dc}if(!(a.type&128)&&b&&b.type&128){if(a.type&1&&a.Zb){if(b.type&256||b.type&64)return this.h.Tq}else{if(b.type&
256||b.type&64)return this.h.un;if(b.type&512)return this.h.jb}return this.h.jb-1}if(a.type&4&&b&&!(b.type&128))return this.h.jb;if(a.type&256&&b&&b.type&1)return b.Zb?this.h.Sb:this.h.jb;if(a.type&32768&&b){if(b.type&2)return this.h.Dc;if(b.type&2048)return b.$b;if(b.type&4096)return a=(this.o?1:-1)*this.h.Pa/2,b.$b+a}if(a.type&65536&&b){if(b.type&2048)return b.$b-this.h.sa;if(b.type&4096)return a=(this.o?1:-1)*this.h.Pa/2,b.$b-this.h.sa+a}return a.type&1&&b&&b.type&1&&a.Zb==b.Zb||b&&b.type&524288?
this.h.jb:this.h.Sb};g.Eo=function(a,b){return a.type&2097152&&b.type&4194304?this.h.wq:a.type&2097152||b.type&4194304?this.h.Dc:a.Kd&&b.Kd?this.h.jb:!a.Ga&&b.Ga?this.h.nq:a.Ga&&b.Ga||!a.Ga&&b.Tf||a.Tf?this.h.jb:this.h.Sb};
g.Co=function(a,b){if(b.type&8)return a.Ma+b.height/2;if(a.type&4194304)return a=a.Ma+a.height-a.Wg,b.type&4096?a+b.height/2:a-b.height/2;if(a.type&2097152)return b.type&2?a.ad-b.height/2:a.ad+b.height/2;var c=a.Ma;b.type&1||b.type&4?(c+=b.height/2,(a.zl||a.Ga)&&b.height+this.h.Gn<=a.height&&(c+=this.h.Gn)):c=b.type&256?c+b.height/2:c+a.height/2;return c};
g.yk=function(){if(this.Xf){for(var a=0,b=null,c=this.rows.length-1,d;d=this.rows[c];c--)d.bm=a,d.type&8388608&&(d.Ga&&ll(this,d),b&&b.Ga&&d.width<b.width?d.bm=b.width:a=d.width,b=d);for(c=a=0;d=this.rows[c];c++)d.Ga?a=this.gh(d):d.type&8?d.width=Math.max(a,d.bm):(a=Math.max(a,d.bm)-d.width,a>0&&ml(d,a),a=d.width)}else Gl.i.yk.call(this)};g.gh=function(a){return this.Xf&&a.Ga?this.ce+this.h.Nq+this.dc:Gl.i.gh.call(this,a)};
g.uo=function(){for(var a=0,b=0,c=0,d;d=this.rows[c];c++){d.Ma=b;d.R=this.dc;b+=d.height;a=Math.max(a,d.Bc);var e=b-this.Ia.Bf;d==this.ta&&e<this.h.Ai&&(e=this.h.Ai-e,this.ta.height+=e,b+=e);nl(this,d)}this.s&&this.W.B&&this.W.B.isConnected()&&(a=Math.max(a,yg(this.W.B.G()).width-this.h.Pa));this.ta.Tb=b-this.ta.Wg;this.tg=a+this.dc+this.h.Pa;this.width+=this.h.Pa;this.height=b+this.h.Pa;this.ak=this.Ia.ad};function Hl(a,b){Hl.i.constructor.call(this,a,b);this.Nc=new Cl(b)}L(Hl,ol);g=Hl.prototype;g.oc=function(){pl(this);ql(this);rl(this);var a=this.W.za;a.Qm(this.U+"\n"+this.qj);var b=this.Nc;a.df.setAttribute("d",b.F+"\n"+b.ph);this.H.o&&a.ll();sl(this)};
g.al=function(){var a=this.Nc,b=this.H.Ia;a.F+=tg(b.R,a.H.ak);for(var c=0,d;d=b.elements[c];c++)d.type&32768?a.F+=a.Ib.Dn:d.type&65536?a.F+=a.rm.fn(a.Qa):d.type&2048?a.F+=a.ss.Wd:d.type&2?a.F+=a.Us.path(a.Qa):d.type&8&&d.width!=0&&(a.F+=O("H",d.R+d.width-a.xb));a.F+=O("H",b.R+b.width-a.xb);Dl(this.Nc,this.H.Ia);Hl.i.al.call(this)};g.Yg=function(a){this.Nc.Yg(a);Hl.i.Yg.call(this,a)};
g.bl=function(a){var b=this.Nc,c=fl(a);if(b.Qa){var d=a.height-c.Gf;b.F+=Kk(c.R+c.width-b.xb,a.Ma)+b.Jh.ac(b.Qa)+O("v",d)}else b.F+=Kk(c.R+c.width,a.Ma)+b.Jh.ac(b.Qa);Hl.i.bl.call(this,a)};g.$k=function(a){var b=this.Nc,c=fl(a);if(b.Qa){var d=a.height-2*b.Wf.height;b.F+=Kk(c.R,a.Ma)+b.Wf.um(b.Qa)+O("v",d)+b.Wf.Nj(b.Qa)+Lk(a.width-c.R-b.Wf.width,0)}else b.F+=Kk(c.R,a.Ma+a.height)+b.Wf.Nj(b.Qa)+Lk(a.width-c.R-b.Wf.width,0);Hl.i.$k.call(this,a)};
g.qo=function(a){Dl(this.Nc,a);this.U+=O("H",a.R+a.width)+O("V",a.Ma+a.height)};g.Xk=function(){var a=this.Nc,b=this.H.ta;if(a.Qa)a.F+=O("V",b.Tb-a.xb);else{var c=a.H.ta.elements[0];c.type&32768?a.F+=Kk(b.R+a.xb,b.Tb-a.xb):c.type&65536&&(a.F+=Kk(b.R,b.Tb),a.F+=a.rm.Ek())}Hl.i.Xk.call(this)};
g.Zk=function(){var a=this.Nc,b=a.H.s;b&&(b=b.Eb+b.height,a.Qa?a.F+=Kk(a.H.dc,b):(a.F+=Kk(a.H.dc+a.xb,a.H.ta.Tb-a.xb),a.F+=O("V",b)),a.F+=a.Jh.Hh(a.Qa));a.Qa||(b=a.H.Ia,a.F=b.elements[0].type&65536?a.F+O("V",a.rm.height):a.F+O("V",b.ad+a.xb));Hl.i.Zk.call(this)};
g.Yk=function(a){var b=this.Nc,c=b.xb,d=a.R+a.Gc,e=a.Df-a.height/2,f=a.width-a.Gc,h=e+c;b.Qa?(e=a.height-(a.Eb+a.Gf)+c,b.ph+=Kk(d-c,h)+O("v",a.Eb-c)+b.Jh.ac(b.Qa)+O("v",e)+O("h",f)):b.ph+=Kk(a.R+a.width+c,h)+O("v",a.height)+O("h",-f)+Kk(d,e+a.Eb)+b.Jh.ac(b.Qa);Hl.i.Yk.call(this,a)};g.Ep=function(a){var b=a.Df-a.height/2;if(a.lb){var c=a.R+a.Gc+this.h.Pa;this.H.o&&(c*=-1);Zh(a.lb,c,b+a.Eb+this.h.Pa)}};
g.Gp=function(a){var b=fl(a);if(b.lb){var c=a.R+a.ce+b.$b;c=this.H.o?c*-1:c+this.h.Pa;Zh(b.lb,c,a.Ma+this.h.Pa)}};g.Dp=function(a){var b=fl(a);if(b.lb){var c=a.R+a.width+this.h.Pa;this.H.o&&(c*=-1);Zh(b.lb,c,a.Ma)}};g.Fp=function(){var a=this.H.ta;if(a.connection){var b=a.connection,c=b.R;Zh(b.lb,(this.H.o?-c:c)+this.h.Pa/2,a.Tb+this.h.Pa)}};function Il(a){this.Hf=a;this.OFFSET=.5;this.Dn=tg(this.OFFSET,this.OFFSET)}g=Il.prototype;g.S=function(){this.Kq=Ml(this);this.Qq=Nl(this);this.nk=this.Sl();this.sf=this.Rl();this.pf=this.Ql();this.tf=this.Tl()};function Ml(a){var b=a.Hf.sa;a=a.OFFSET;var c=(1-Math.SQRT1_2)*(b+a)-a,d=tg(c,c)+Mk("0 0,0",b,S(-c-a,b-c)),e=Mk("0 0,0",b+a,S(b+a,b+a)),f=tg(c,-c)+Mk("0 0,0",b+a,S(b-c,c+a));return{width:b+a,height:b,um:function(h){return h?d:""},Nj:function(h){return h?e:f}}}
function Nl(a){var b=a.Hf.sa;a=a.OFFSET;var c=(1-Math.SQRT1_2)*(b-a)+a,d=tg(c,c)+Mk("0 0,1",b-a,S(b-c,-c+a)),e=tg(a,b)+Mk("0 0,1",b-a,S(b,-b+a)),f=-c,h=tg(c,f)+Mk("0 0,1",b-a,S(-c+a,-f-b));return{height:b,fn:function(k){return k?d:e},Ek:function(){return h}}}
g.Sl=function(){var a=this.Hf.Gi,b=this.Hf.Eg,c=tg(-2,-b+2.5+.9)+Lk(a*-.45,-2.1),d=O("v",2.5)+tg(-a*.97,2.5)+Jk("q",[S(-a*.05,10),S(a*.3,9.5)])+tg(a*.67,-1.9)+O("v",2.5),e=O("v",-1.5)+tg(a*-.92,-.5)+Jk("q",[S(a*-.19,-5.5),S(0,-11)])+tg(a*.92,1),f=tg(-5,b-.7)+Lk(a*.46,-2.1);return{width:a,height:b,Hh:function(h){return h?c:e},ac:function(h){return h?d:f}}};g.Rl=function(){return{Wd:O("h",this.OFFSET)+this.Hf.sf.Wd}};g.Ql=function(){return{Wd:Lk(5.1,2.6)+tg(-10.2,6.8)+Lk(5.1,2.6),height:12,width:10.2}};
g.Tl=function(){var a=tg(25,-8.7)+Jk("c",[S(29.7,-6.2),S(57.2,-.5),S(75,8.7)]),b=Jk("c",[S(17.8,-9.2),S(45.3,-14.9),S(75,-8.7)])+Kk(100.5,this.Hf.tf.height+.5);return{path:function(c){return c?a:b}}};function Ol(a,b,c){this.Rg=c;this.Wc=a;this.Zh=D(oc,{"class":"blocklyPathDark",transform:"translate(1,1)"},this.Wc);this.Ha=D(oc,{"class":"blocklyPath"},this.Wc);this.df=D(oc,{"class":"blocklyPathLight"},this.Wc);this.Lk="#000000";this.style=b}L(Ol,zl);g=Ol.prototype;g.Qm=function(a){this.Ha.setAttribute("d",a);this.Zh.setAttribute("d",a)};g.ll=function(){this.Ha.setAttribute("transform","scale(-1 1)");this.df.setAttribute("transform","scale(-1 1)");this.Zh.setAttribute("transform","translate(1,1) scale(-1 1)")};
g.Sa=function(a){this.df.style.display="";this.Zh.style.display="";this.df.setAttribute("stroke",this.style.Ff);this.Zh.setAttribute("fill",this.Lk);Ol.i.Sa.call(this,a);this.Ha.setAttribute("stroke","none")};g.cf=function(a){this.style=a;this.Lk=Ia("#000",this.style.ve,.2)||this.Lk};g.Yp=function(a){a?(this.Ha.setAttribute("filter","url(#"+this.Rg.cl+")"),this.df.style.display="none"):(this.Ha.setAttribute("filter","none"),this.df.style.display="inline")};
g.Zp=function(a){a&&(this.df.style.display="none",this.Zh.setAttribute("fill",this.style.Vi),this.Ha.setAttribute("stroke","none"),this.Ha.setAttribute("fill",this.style.Vi))};g.gn=function(a){Ol.i.gn.call(this,a);a&&this.Ha.setAttribute("stroke","none")};function Pl(a){Pl.i.constructor.call(this,a);this.Ib=null}L(Pl,Al);g=Pl.prototype;g.S=function(a,b){Pl.i.S.call(this,a,b);this.Ib=new Il(this.D());this.Ib.S()};g.Cm=function(a,b){Pl.i.Cm.call(this,a,b);this.Ib.S()};g.Pl=function(){return new Bl};g.hp=function(a){return new Gl(this,a)};g.fp=function(a,b){return new Hl(a,b)};g.gp=function(a,b){return new Ol(a,b,this.D())};E(fd,"geras",Pl);(function(){var a={name:"escape",Ba:function(b){return!b.options.readOnly},wa:function(){Xe();return!0}};tj.register(a);vj(27,a.name)})();(function(){var a={name:"delete",Ba:function(b){return!b.options.readOnly&&N&&Ed(N)},wa:function(b,c){c.preventDefault();if(Zg())return!1;Ij(N);return!0}};tj.register(a);vj(46,a.name);vj(8,a.name)})();
(function(){var a={name:"copy",Ba:function(c){return!c.options.readOnly&&!Zg()&&N&&Ed(N)&&N.Na()},wa:function(c,d){d.preventDefault();Xe();Jj(N);return!0}};tj.register(a);var b=wj(67,[17]);vj(b,a.name);b=wj(67,[18]);vj(b,a.name);b=wj(67,[91]);vj(b,a.name)})();(function(){var a={name:"cut",Ba:function(c){return!c.options.readOnly&&!Zg()&&N&&Ed(N)&&N.Na()&&!N.j.Nd},wa:function(){Jj(N);Ij(N);return!0}};tj.register(a);var b=wj(88,[17]);vj(b,a.name);b=wj(88,[18]);vj(b,a.name);b=wj(88,[91]);vj(b,a.name)})();
(function(){var a={name:"paste",Ba:function(c){return!c.options.readOnly&&!Zg()},wa:function(){return Kj()}};tj.register(a);var b=wj(86,[17]);vj(b,a.name);b=wj(86,[18]);vj(b,a.name);b=wj(86,[91]);vj(b,a.name)})();(function(){var a={name:"undo",Ba:function(c){return!c.options.readOnly&&!Zg()},wa:function(c){Xe();Lf(c,!1);return!0}};tj.register(a);var b=wj(90,[17]);vj(b,a.name);b=wj(90,[18]);vj(b,a.name);b=wj(90,[91]);vj(b,a.name)})();
(function(){var a={name:"redo",Ba:function(c){return!Zg()&&!c.options.readOnly},wa:function(c){Xe();Lf(c,!0);return!0}};tj.register(a);var b=wj(90,[16,17]);vj(b,a.name);b=wj(90,[16,18]);vj(b,a.name);b=wj(90,[16,91]);vj(b,a.name);b=wj(89,[17]);vj(b,a.name)})();var Ql=null,Rl=null,Sl=null;function Tl(){var a=Ql();Ul("/scripts/storage.py","app="+encodeURIComponent(Vl)+"&data="+encodeURIComponent(a),Wl)}var Xl=new Map;
function Ul(a,b,c,d,e){e=e===void 0?"POST":e;Xl.has(a)&&Xl.get(a).abort();var f=new XMLHttpRequest;Xl.set(a,f);f.onload=function(){this.status===200?c&&c.call(f):d?d.call(f):Yl(R("Games.httpRequestError",!1)+"\nXHR status: "+f.status);Xl.delete(a)};e==="POST"?(f.open(e,a),f.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),f.send(b)):(b&&(a+="?"+b),f.open(e,a),f.send())}
function Wl(){window.location.hash=this.responseText.trim();Yl(R("Games.linkAlert",!1).replace("%1",window.location.href));Sl=Ql()}function Zl(){var a=this.responseText.trim();a.length?(a=a.replace(/^\{\[\(< UNTRUSTED CONTENT >\)\]\}\n/,""),Rl(a)):Yl(R("Games.hashError",!1).replace("%1",window.location.hash));Sl=Ql()}function Yl(a){if(typeof T==="object"){var b=Q("linkButton");T.Ys(b,a)}else alert(a)};var Ui=null;function $l(){var a=R("Games.maze",!0);Ck(a);if(a=Q("linkButton"))xk?a.style.display="none":(Ql=am,Rl=bm,Dk(a,Tl));(a=Q("languageMenu"))&&a.addEventListener("change",cm,!0)}function dm(){if(!xk&&window.location.hash.length>1)Ul("/data/"+Vl+"/storage/"+window.location.hash.substring(1)+".blockly","",Zl,null,"GET");else{try{var a=window.sessionStorage.ep}catch(b){}a&&delete window.sessionStorage.ep;bm(a||'<xml><block type="gn_start" deletable="false" x="20" y="20"></block></xml>')}}
function bm(a){a=Gd(a);Ui.clear();Hd(a,Ui);a=Ui;a.ff.length=0;a=a.Lh.length=0;for(var b;b=qd[a];a++)b.fb=!1}
function am(){for(var a=Ui,b=M("xml"),c=yj(a),d=M("variables"),e=0,f;f=c[e];e++){var h=M("variable");h.appendChild(document.createTextNode(f.name));f.type&&h.setAttribute("type",f.type);h.id=f.cb();d.appendChild(h)}d.hasChildNodes()&&b.appendChild(d);d=[].concat(a.ek);d.length>1&&(a.Uc.offset=Math.sin(3*Math.PI/180),a.o&&(a.Uc.offset*=-1),d.sort(a.Uc));for(c=0;e=d[c];c++)b.appendChild(e.wu(!0));a=a.Ja(!0);for(c=0;d=a[c];c++)b.appendChild(Ad(d,!0));Ui.Ja(!1).length===1&&b.querySelector&&(a=b.querySelector("block"))&&
(a.removeAttribute("x"),a.removeAttribute("y"));return Fd(b)}function em(){Sl!==null&&Sl!==am()&&(window.location.hash="",Sl=null)}function fm(){var a={maxBlocks:0,rtl:wk,trashcan:!0,zoom:{maxScale:2,controls:!0,wheel:!0,startScale:1.3},move:{scrollbars:{horizontal:!0,vertical:!0},drag:!0,wheel:!1}},b=Q("toolbox");b&&(a.toolbox=b);a.media="third-party/blockly/media/";a.oneBasedIndex=!1;Ui=$i(a);Mf(Ui,em)}function gm(){window.location=(xk?"index.html":"./")+"?lang="+uk}
function cm(){window.sessionStorage&&(window.sessionStorage.ep=am());var a=Q("languageMenu");a=encodeURIComponent(a.options[a.selectedIndex].value);var b=window.location.search;b=b.length<=1?"?lang="+a:/[?&]lang=[^&]*/.test(b)?b.replace(/([?&]lang=)[^&]*/,"$1"+a):b.replace(/\?/,"?lang="+a+"&");window.location=window.location.protocol+"//"+window.location.host+window.location.pathname+b}
function hm(){Bk<Ak?location=location.protocol+"//"+location.host+location.pathname+"?lang="+uk+"&level="+(Bk+1):gm()}function im(a){if(a.type==="click"&&jm==="touchend"&&km+2E3>Date.now()||jm===a.type&&km+400>Date.now())return a.preventDefault(),a.stopPropagation(),!0;jm=a.type;km=Date.now();return!1}var jm=null,km=0;var T={Ie:!1,mo:null,aj:null,cj:null,ej:null,dj:null,Vm:function(a,b,c,d,e,f){function h(){if(T.Ie){m.style.visibility="visible";m.style.zIndex=10;q.style.visibility="hidden";var p=a.getElementsByClassName("primary");p.length||(p=a.getElementsByClassName("secondary"),p.length||(p=a.getElementsByTagName("button")));p.length&&p[0].focus()}}if(!a)throw TypeError("Content not found: "+a);for(var k=a.getElementsByClassName("addHideHandler"),l;l=k[0];)l.addEventListener("click",T.lh,!0),l.addEventListener("touchend",
T.lh,!0),l.classList.remove("addHideHandler");T.Ie&&T.lh(!1);Zc&&Xe(!0);T.Ie=!0;T.mo=b;T.aj=f;var m=Q("dialog");f=Q("dialogShadow");var q=Q("dialogBorder"),n;for(n in e)m.style[n]=e[n];d&&(f.style.visibility="visible",f.style.opacity=.3,f.style.zIndex=9,d=document.createElement("div"),d.id="dialogHeader",m.appendChild(d),T.cj=Pb(d,"mousedown",null,T.rr));m.appendChild(a);a.classList.remove("dialogHiddenContent");try{b.blur()}catch(p){}c&&b?(T.Cj(b,!1,.2),T.Cj(m,!0,.8),setTimeout(h,175)):h()},no:0,
oo:0,rr:function(a){T.Sk();if(!pb(a)){var b=Q("dialog");T.no=b.offsetLeft-a.clientX;T.oo=b.offsetTop-a.clientY;T.ej=Pb(document,"mouseup",null,T.Sk);T.dj=Pb(document,"mousemove",null,T.vr);a.stopPropagation()}},vr:function(a){var b=Q("dialog"),c=T.no+a.clientX;a=T.oo+a.clientY;a=Math.max(a,0);a=Math.min(a,window.innerHeight-b.offsetHeight);c=Math.max(c,0);c=Math.min(c,window.innerWidth-b.offsetWidth);b.style.left=c+"px";b.style.top=a+"px"},Sk:function(){T.ej&&(B(T.ej),T.ej=null);T.dj&&(B(T.dj),T.dj=
null)},lh:function(a){function b(){d.style.zIndex=-1;d.style.visibility="hidden";Q("dialogBorder").style.visibility="hidden"}a=a===void 0?!0:a;if(T.Ie){T.Sk();T.cj&&(B(T.cj),T.cj=null);T.Ie=!1;T.aj&&T.aj();T.aj=null;var c=a?T.mo:null;a=Q("dialog");var d=Q("dialogShadow");d.style.opacity=0;c&&a?(T.Cj(a,!1,.8),T.Cj(c,!0,.2),setTimeout(b,175)):b();a.style.visibility="hidden";a.style.zIndex=-1;for((c=Q("dialogHeader"))&&c.parentNode.removeChild(c);a.firstChild;)c=a.firstChild,c.classList.add("dialogHiddenContent"),
document.body.appendChild(c)}},Cj:function(a,b,c){function d(){e.style.width=f.width+"px";e.style.height=f.height+"px";e.style.left=f.x+"px";e.style.top=f.y+"px";e.style.opacity=c}if(a){var e=Q("dialogBorder"),f=T.getBBox(a);b?(e.className="dialogAnimate",setTimeout(d,1)):(e.className="",d());e.style.visibility="visible"}},getBBox:function(a){var b=Xa(a);b={x:b.x,y:b.y};a.getBBox?(a=a.getBBox(),b.height=a.height,b.width=a.width):(b.height=a.offsetHeight,b.width=a.offsetWidth);return b},Ys:function(a,
b){var c=Q("containerStorage");c.textContent="";b=v(b.split("\n"));for(var d=b.next();!d.done;d=b.next()){var e=document.createElement("p");e.appendChild(document.createTextNode(d.value));c.appendChild(e)}c=Q("dialogStorage");T.Vm(c,a,!0,!0,{width:"50%",left:"25%",top:"5em"},T.Xs);T.Ss()},$q:function(){if(T.Ie||Ui.Jb())setTimeout(T.$q,15E3);else{var a=Q("dialogAbort"),b=Q("abortOk");b.addEventListener("click",gm,!0);b.addEventListener("touchend",gm,!0);T.Vm(a,null,!1,!0,{width:"40%",left:"30%",top:"3em"},
function(){document.body.removeEventListener("keydown",T.Kn,!0)});document.body.addEventListener("keydown",T.Kn,!0)}},bj:function(a){!T.Ie||a.keyCode!==13&&a.keyCode!==27&&a.keyCode!==32||(T.lh(!0),a.stopPropagation(),a.preventDefault())},Ss:function(){document.body.addEventListener("keydown",T.bj,!0)},Xs:function(){document.body.removeEventListener("keydown",T.bj,!0)},Kn:function(a){T.bj(a);a.keyCode!==13&&a.keyCode!==32||gm()}};window.BlocklyDialogs=T;var lm="";function mm(a){a=a.replace(/(,\s*)?'block_id_[^']+'\)/g,")");return a.replace(/\s+$/,"")}function nm(){setTimeout(function(){var a=document.createElement("script");a.type="text/javascript";a.src="third-party/JS-Interpreter/compressed.js";document.head.appendChild(a)},1)}
function om(){setTimeout(function(){var a=document.createElement("link");a.rel="stylesheet";a.type="text/css";a.href="common/prettify.css";document.head.appendChild(a);a=document.createElement("script");a.type="text/javascript";a.src="common/prettify.js";document.head.appendChild(a)},1)}
function pm(){var a=Q("dialogDone");if(Ui){Q("dialogLinesText").textContent="";var b=lm;b=mm(b);var c=b.replace(/\/\/[^\n]*/g,"");c=c.replace(/\/\*.*\*\//g,"");c=c.replace(/[ \t]+\n/g,"\n");c=c.replace(/\n+/g,"\n");c=c.trim();c=c.split("\n").length;var d=Q("containerCode");d.textContent=b;d.style.display="none";typeof prettyPrintOne==="function"&&(b=d.innerHTML,b=prettyPrintOne(b,"js"),d.innerHTML=b);c===1?R("Games.linesOfCode1",!1):R("Games.linesOfCode2",!1).replace("%1",String(c))}b=Bk<Ak?R("Games.nextLevel",
!1).replace("%1",String(Bk+1)):R("Games.finalLevel",!1);c=Q("doneOk");c.addEventListener("click",hm,!0);c.addEventListener("touchend",hm,!0);T.Vm(a,null,!1,!0,{width:"40%",left:"30%",top:"3em"},function(){document.body.removeEventListener("keydown",qm,!0)});document.body.addEventListener("keydown",qm,!0);Q("dialogDoneText").textContent=b}function qm(a){T.bj(a);a.keyCode!==13&&a.keyCode!==32||hm()};function rm(a,b,c,d,e,f,h){if(!a)throw Error("Src value of an image field is required");a=sb(a);c=Number(sb(c));b=Number(sb(b));if(isNaN(c)||isNaN(b))throw Error("Height and width values of an image field must cast to numbers.");if(c<=0||b<=0)throw Error("Height and width values of an image field must be greater than 0.");this.eh=!1;this.Mi="";rm.i.constructor.call(this,a,null,h);h||(this.eh=!!f,this.Mi=sb(d)||"");this.hb=new Ua(b,c+sm);this.Zr=c;this.cd=null;typeof e=="function"&&(this.cd=e);this.rb=
null}L(rm,mh);rm.prototype.ik="";rm.L=function(a){return new rm(a.src,a.width,a.height,void 0,void 0,void 0,a)};var sm=1;g=rm.prototype;g.vg=!1;g.Md=!1;g.Og=function(a){rm.i.Og.call(this,a);this.eh=!!a.flipRtl;this.Mi=sb(a.alt)||""};g.pj=function(){this.rb=D(mc,{height:this.Zr+"px",width:this.hb.width+"px",alt:this.Mi},this.vb);this.rb.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",this.Ab);this.cd&&(this.rb.style.cursor="pointer")};g.$p=function(){};
g.fj=function(a){return typeof a!="string"?null:a};g.Xg=function(a){this.Ab=a;this.rb&&this.rb.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",String(this.Ab))};g.Do=function(){return this.eh};g.Zj=function(){this.cd&&this.cd(this)};g.vl=function(){return this.Mi};E(ed,"field_image",rm);P.nu={};P.controls_repeat_ext=function(a){var b=Rd(a,"TIMES")?String(Number(Cf(a,"TIMES"))):Zj(P,a,"TIMES",P.Bg)||"0",c=ak(a,"DO");c=bk(c,a);a="";var d=nj(P.Va,"count","VARIABLE"),e=b;b.match(/^\w+$/)||Oj(b)||(e=nj(P.Va,"repeat_end","VARIABLE"),a+="var "+e+" = "+b+";\n");return a+("for (var "+d+" = 0; "+d+" < "+e+"; "+d+"++) {\n"+c+"}\n")};P.controls_repeat=P.controls_repeat_ext;
P.controls_whileUntil=function(a){var b=Cf(a,"MODE")=="UNTIL",c=Zj(P,a,"BOOL",b?P.mk:P.yn)||"false",d=ak(a,"DO");d=bk(d,a);b&&(c="!"+c);return"while ("+c+") {\n"+d+"}\n"};
P.controls_for=function(a){var b=mj(P.Va,Cf(a,"VAR"),"VARIABLE"),c=Zj(P,a,"FROM",P.Bg)||"0",d=Zj(P,a,"TO",P.Bg)||"0",e=Zj(P,a,"BY",P.Bg)||"1",f=ak(a,"DO");f=bk(f,a);if(Oj(c)&&Oj(d)&&Oj(e)){var h=Number(c)<=Number(d);a="for ("+b+" = "+c+"; "+b+(h?" <= ":" >= ")+d+"; "+b;b=Math.abs(Number(e));a=(b==1?a+(h?"++":"--"):a+((h?" += ":" -= ")+b))+(") {\n"+f+"}\n")}else a="",h=c,c.match(/^\w+$/)||Oj(c)||(h=nj(P.Va,b+"_start","VARIABLE"),a+="var "+h+" = "+c+";\n"),c=d,d.match(/^\w+$/)||Oj(d)||(c=nj(P.Va,b+
"_end","VARIABLE"),a+="var "+c+" = "+d+";\n"),d=nj(P.Va,b+"_inc","VARIABLE"),a+="var "+d+" = ",a=Oj(e)?a+(Math.abs(e)+";\n"):a+("Math.abs("+e+");\n"),a=a+("if ("+h+" > "+c+") {\n")+(P.nf+d+" = -"+d+";\n"),a+="}\n",a+="for ("+b+" = "+h+"; "+d+" >= 0 ? "+b+" <= "+c+" : "+b+" >= "+c+"; "+b+" += "+d+") {\n"+f+"}\n";return a};
P.controls_forEach=function(a){var b=mj(P.Va,Cf(a,"VAR"),"VARIABLE"),c=Zj(P,a,"LIST",P.Bg)||"[]",d=ak(a,"DO");d=bk(d,a);a="";var e=c;c.match(/^\w+$/)||(e=nj(P.Va,b+"_list","VARIABLE"),a+="var "+e+" = "+c+";\n");c=nj(P.Va,b+"_index","VARIABLE");d=P.nf+b+" = "+e+"["+c+"];\n"+d;return a+("for (var "+c+" in "+e+") {\n"+d+"}\n")};
P.controls_flow_statements=function(a){var b="";P.Ec&&(b+=Yj(P.Ec,a));P.yd&&(b+=Yj(P.yd,a));if(P.Ec){var c=Aa.qt.st.ot.lu(a);c&&!c.ng&&(b+=Yj(P.Ec,c))}switch(Cf(a,"FLOW")){case "BREAK":return b+"break;\n";case "CONTINUE":return b+"continue;\n"}throw Error("Unknown flow statement.");};function tm(){var a=[[R("Maze.turnLeft",!1),"turnLeft"],[R("Maze.turnRight",!1),"turnRight"]],b=[[R("Maze.pathAhead",!1),"isPathForward"],[R("Maze.pathLeft",!1),"isPathLeft"],[R("Maze.pathRight",!1),"isPathRight"]];ag("gn_turn_arrows",function(){var c=Rj(Rd(this,"DIR"));c[c.length-2][0]+=" \u21ba";c[c.length-1][0]+=" \u21bb"});Nj([{type:"gn_moveForward",message0:"Move forward",previousStatement:null,nextStatement:null,colour:210,tooltip:R("Maze.moveForwardTooltip",!1)},{type:"gn_turn",message0:"%1",
args0:[{type:"field_dropdown",name:"DIR",options:a}],previousStatement:null,nextStatement:null,colour:210,tooltip:R("Maze.turnTooltip",!1),extensions:["gn_turn_arrows"]},{type:"gn_moveRight",message0:"Move right",previousStatement:null,nextStatement:null,colour:210},{type:"gn_moveDown",message0:"Move down",previousStatement:null,nextStatement:null,colour:210},{type:"gn_moveLeft",message0:"Move left",previousStatement:null,nextStatement:null,colour:210},{type:"gn_moveUp",message0:"Move up",previousStatement:null,
nextStatement:null,colour:210},{type:"gn_harvest",message0:"Harvest plant ahead",previousStatement:null,nextStatement:null,colour:290},{type:"gn_take",message0:"Take item ahead",previousStatement:null,nextStatement:null,colour:290},{type:"gn_drop",message0:"Drop item ahead",previousStatement:null,nextStatement:null,colour:290},{type:"gn_openDoor",message0:"Open door with key",previousStatement:null,nextStatement:null,colour:290},{type:"gn_if",message0:"%1%2"+R("Maze.doCode",!1)+"%3",args0:[{type:"field_dropdown",
name:"DIR",options:b},{type:"input_dummy"},{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,colour:210,tooltip:R("Maze.ifTooltip",!1),extensions:["gn_turn_arrows"]},{type:"gn_ifElse",message0:"%1%2"+R("Maze.doCode",!1)+"%3"+window.BlocklyMsg.CONTROLS_IF_MSG_ELSE+"%4",args0:[{type:"field_dropdown",name:"DIR",options:b},{type:"input_dummy"},{type:"input_statement",name:"DO"},{type:"input_statement",name:"ELSE"}],previousStatement:null,nextStatement:null,colour:210,tooltip:R("Maze.ifelseTooltip",
!1),extensions:["gn_turn_arrows"]},{type:"gn_repeat_internal",message0:"repeat%1times%2"+R("Maze.doCode",!1)+"%3",args0:[{type:"field_dropdown",name:"TIMES",options:[["2","2"],["3","3"],["4","4"],["5","5"],["6","6"],["7","7"],["8","8"],["9","9"],["10","10"]]},{type:"input_dummy"},{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,colour:120,tooltip:"Do some statements several times",helpUrl:"https://en.wikipedia.org/wiki/For_loop"},{type:"gn_forever",message0:R("Maze.repeatUntil",
!1)+"%1%2"+R("Maze.doCode",!1)+"%3",args0:[{type:"field_image",src:"maze/marker.png",width:12,height:16},{type:"input_dummy"},{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,colour:120,tooltip:R("Maze.whileTooltip",!1)},{type:"gn_start",message0:"when %1 clicked",args0:[{type:"field_image",src:"index/play.png",width:17,height:17,alt:"\u25b6"}],message1:"%1",args1:[{type:"input_statement",name:"STACK"}],colour:0,tooltip:'Excecutes the blocks inside when the "Run Program" button is clicked.'}])}
P.gn_moveForward=function(a){return"moveForward('block_id_"+a.id+"');\n"};P.gn_turn=function(a){return Cf(a,"DIR")+"('block_id_"+a.id+"');\n"};P.gn_if=function(a){var b=Cf(a,"DIR")+"('block_id_"+a.id+"')";a=ak(a,"DO");return"if ("+b+") {\n"+a+"}\n"};P.gn_ifElse=function(a){var b=Cf(a,"DIR")+"('block_id_"+a.id+"')",c=ak(a,"DO");a=ak(a,"ELSE");return"if ("+b+") {\n"+c+"} else {\n"+a+"}\n"};
P.gn_forever=function(a){var b=ak(a,"DO");P.wi&&(b=P.wi.replace(/%1/g,"'block_id_"+a.id+"'")+b);return"while (untilNotReached()) {\n"+b+"}\n"};P.gn_repeat_internal=P.controls_repeat;P.gn_start=function(a){return"function when_run_clicked() {\n"+ak(a,"STACK")+"}\nwhen_run_clicked()"};P.gn_moveRight=function(a){return"moveRight('block_id_"+a.id+"');\n"};P.gn_moveDown=function(a){return"moveDown('block_id_"+a.id+"');\n"};P.gn_moveLeft=function(a){return"moveLeft('block_id_"+a.id+"');\n"};
P.gn_moveUp=function(a){return"moveUp('block_id_"+a.id+"');\n"};P.gn_harvest=function(a){return"harvest('block_id_"+a.id+"');\n"};P.gn_take=function(a){return"take('block_id_"+a.id+"');\n"};P.gn_drop=function(a){return"drop('block_id_"+a.id+"');\n"};P.gn_openDoor=function(a){return"openDoor('block_id_"+a.id+"');\n"};function um(){var a=Bk,b=Ak,c='<button id="clearButton" class="primary">\ud83e\uddf9</button>';var d='\n&nbsp;\n<button id="linkButton" title="'+R("Games.linkTooltip",!0)+'">\n  <img src="common/1x1.gif" class="link icon21">\n</button>\n';c&&(c=" &nbsp; "+c);if(a){var e=" &nbsp ",f=window.localStorage[Vl];f=f?parseInt(f):0;for(var h=1;h<=b;h++){var k="";f+1===h&&(k="level_unlocked");var l="";h<=f&&(l="level_done");var m="?level="+h;e+=" ";e=h===a?e+('<span class="level_number '+l+" "+k+'" id="level'+
h+'">'+h+"</span>"):h===b?e+('<a class="level_number '+l+'" id="level'+h+'" '+((l||k)&&'href="'+m+'"')+">"+h+"</a>"):e+('<a class="level_dot '+(l||k)+'" id="level'+h+'" '+((l||k)&&'href="'+m+'"')+"></a>")}a=e}else a="";return'\n\n<table width="100%">\n  <tr>\n    <td>\n      <h1>\n        \n<span id="title">\n  Blockly : Robot\n</span>\n\n        '+(a+'\n      </h1>\n    </td>\n    <td id="header_cta" class="farSide">\n      <select id="languageMenu"></select>\n      '+d+"\n      \n      "+c+'\n    </td>\n  </tr>\n</table>\n\n\n<div id="visualization">\n  <canvas id="scratch" width="384" height="384" style="display: none"></canvas>\n  <canvas id="display" width="384" height="384"></canvas>\n  <div id="capacityBubble">\n    <div id="capacity"></div>\n  </div>\n  <div class="assets"></div>\n</div>\n\n<div id="commandDiv">\n  <button id="runButton" class="primary" title="')+
R("Maze.runTooltip",!0)+'">\n    <img src="common/1x1.gif" class="run icon21"> '+R("Games.runProgram",!0)+'\n  </button>\n  <button id="resetButton" class="primary" title="'+R("Maze.resetTooltip",!0)+'">\n    <img src="common/1x1.gif" class="stop icon21"> '+R("Games.resetProgram",!0)+'\n  </button>\n</div>\n\n<xml id="toolbox" xmlns="https://developers.google.com/blockly/xml">\n  <block type="gn_moveForward"></block>\n  <block type="gn_turn"><field name="DIR">turnLeft</field></block>\n  <block type="gn_turn"><field name="DIR">turnRight</field></block>\n  <block type="gn_harvest"></block>\n  <block type="gn_drop"></block>\n  <block type="gn_take"></block>\n  <block type="gn_openDoor"></block>\n  <block type="gn_repeat_internal"></block>\n  </xml>\n<div id="blockly"></div>\n\n\n<div id="dialogShadow" class="dialogAnimate"></div>\n<div id="dialogBorder"></div>\n<div id="dialog"></div>\n\n\n<div id="dialogDone" class="dialogHiddenContent">\n  <div class="large">'+
(R("Games.congratulations",!0)+'</div>\n  <div id="dialogLinesText" class="large"></div>\n  <pre id="containerCode"></pre>\n  <div id="dialogDoneText" class="large"></div>\n  <div id="dialogDoneButtons" class="farSide farSideButtons">\n    <button class="addHideHandler">'+Ek(w.DIALOG_CANCEL)+'</button>\n    <button id="doneOk" class="secondary">'+Ek(w.DIALOG_OK)+'</button>\n  </div>\n</div>\n\n\n<div id="dialogAbort" class="dialogHiddenContent">\n  ')+(R("Games.helpAbort",!0)+'\n  <div class="farSide farSideButtons">\n    <button class="addHideHandler">'+
Ek(w.DIALOG_CANCEL)+'</button>\n    <button id="abortOk" class="secondary">'+Ek(w.DIALOG_OK)+'</button>\n  </div>\n</div>\n\n\n<div id="dialogStorage" class="dialogHiddenContent">\n  <div id="containerStorage"></div>\n  \n<div class="farSide farSideButtons">\n  <button class="secondary addHideHandler">')+(Ek(w.DIALOG_OK)+"</button>\n</div>\n\n</div>\n\n\n\n\n\n")};var vm,wm;function V(a,b){a=a===void 0?0:a;a instanceof V?(this.x=a.x,this.y=a.y):(this.x=a,this.y=b===void 0?0:b)}r.Object.defineProperty(V.prototype,"__tw_x",{configurable:!0,enumerable:!0,get:function(){return this.x}});r.Object.defineProperty(V.prototype,"__tw_x",{configurable:!0,enumerable:!0,set:function(a){this.x=a}});r.Object.defineProperty(V.prototype,"__tw_y",{configurable:!0,enumerable:!0,get:function(){return this.y}});
r.Object.defineProperty(V.prototype,"__tw_y",{configurable:!0,enumerable:!0,set:function(a){this.y=a}});g=V.prototype;g.abs=function(){return new V(Math.abs(this.x),Math.abs(this.y))};g.ceil=function(){return new V(Math.ceil(this.x),Math.ceil(this.y))};g.floor=function(){return new V(Math.floor(this.x),Math.floor(this.y))};g.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y)};g.max=function(a){return new V(Math.max(this.x,a.x),Math.max(this.y,a.y))};
g.min=function(a){return new V(Math.min(this.x,a.x),Math.min(this.y,a.y))};g.round=function(){return new V(Math.round(this.x),Math.round(this.y))};g.sign=function(){return new V(Math.sign(this.x),Math.sign(this.y))};g.add=function(a){return new V(this.x+a.x,this.y+a.y)};g.sub=function(a){return new V(this.x-a.x,this.y-a.y)};g.scale=function(a){return new V(this.x*a,this.y*a)};g.toString=function(){return"Vector2("+this.x+", "+this.y+")"};
r.Object.defineProperties(V,{ZERO:{configurable:!0,enumerable:!0,get:function(){return new V(0,0)}},ONE:{configurable:!0,enumerable:!0,get:function(){return new V(1,1)}},rt:{configurable:!0,enumerable:!0,get:function(){return new V(-1,0)}},Rt:{configurable:!0,enumerable:!0,get:function(){return new V(1,0)}}});function xm(a,b){return new V(a,b)};function ym(a){this.name=a===void 0?"Node":a;this.parent=null;this.children=[];this.Kh=!1;this.Ra={}}g=ym.prototype;g.S=function(){var a=this,b,c,d;return va(new ua(new qa(function(e){switch(e.wc){case 1:b=v(a.children),c=b.next();case 2:if(c.done){e.wc=4;break}d=c.value;var f=d.S();e.wc=3;return{value:f};case 3:c=b.next();e.wc=2;break;case 4:a.Hi(),e.wc=0}})))};g.connect=function(a,b){this.Ra[a]&&this.Ra[a].push(b)};
g.fl=function(a){var b=wa.apply(1,arguments),c=this.Ra[a];if(c){c=v(c);for(var d=c.next();!d.done;d=c.next())d.value.apply(null,la(b))}};g.disconnect=function(a,b){var c=this.Ra[a];c&&(this.Ra[a]=c.filter(function(d){return d!==b}))};g.V=function(a){a.parent=this;this.children.push(a)};function zm(a,b){var c=a.children.indexOf(b);c!==-1&&(b.parent=null,b.zd(),a.children.splice(c,1))}function Am(a,b){if(!a.parent)throw"'reparent' Must have already parent";zm(a.parent,a);a.parent=b;a.parent.V(a)}
g.qd=function(){this.Kh=!0};g.Zc=function(){};g.Hi=function(){this.Zc()};g.xf=function(){};g.Yc=function(){this.xf()};g.Fg=function(){};g.zd=function(){for(var a=v(this.children.slice()),b=a.next();!b.done;b=a.next())b.value.zd();this.Fg()};g.Ii=function(a,b){if(!this.Kh){this.Yc(a);for(var c=v(this.children),d=c.next();!d.done;d=c.next())d.value.Ii(a,b)}};function W(a){ym.call(this,a===void 0?"Node2D":a);this.position=new V(0,0);this.rotation=0;this.scale=new V(1,1);this.$a=!1;this.visible=!0}ja(W,ym);r.Object.defineProperty(W.prototype,"__tw_global_position",{configurable:!0,enumerable:!0,get:function(){return this.u}});r.Object.defineProperty(W.prototype,"__tw_global_position",{configurable:!0,enumerable:!0,set:function(a){this.u=a}});r.Object.defineProperty(W.prototype,"__tw_position",{configurable:!0,enumerable:!0,get:function(){return this.position}});
r.Object.defineProperty(W.prototype,"__tw_position",{configurable:!0,enumerable:!0,set:function(a){this.position=a}});r.Object.defineProperty(W.prototype,"__tw_global_scale",{configurable:!0,enumerable:!0,get:function(){return this.wb}});r.Object.defineProperty(W.prototype,"__tw_global_scale",{configurable:!0,enumerable:!0,set:function(a){this.wb=a}});r.Object.defineProperty(W.prototype,"__tw_scale",{configurable:!0,enumerable:!0,get:function(){return this.scale}});
r.Object.defineProperty(W.prototype,"__tw_scale",{configurable:!0,enumerable:!0,set:function(a){this.scale=a}});r.Object.defineProperty(W.prototype,"__tw_global_rotation",{configurable:!0,enumerable:!0,get:function(){return this.hd}});r.Object.defineProperty(W.prototype,"__tw_global_rotation",{configurable:!0,enumerable:!0,set:function(a){this.hd=a}});r.Object.defineProperty(W.prototype,"__tw_rotation",{configurable:!0,enumerable:!0,get:function(){return this.rotation}});
r.Object.defineProperty(W.prototype,"__tw_rotation",{configurable:!0,enumerable:!0,set:function(a){this.rotation=a}});r.Object.defineProperty(W.prototype,"__tw_global_rotation_degrees",{configurable:!0,enumerable:!0,get:function(){return this.Go}});r.Object.defineProperty(W.prototype,"__tw_global_rotation_degrees",{configurable:!0,enumerable:!0,set:function(a){this.Go=a}});r.Object.defineProperty(W.prototype,"__tw_rotation_degrees",{configurable:!0,enumerable:!0,get:function(){return this.Ip}});
r.Object.defineProperty(W.prototype,"__tw_rotation_degrees",{configurable:!0,enumerable:!0,set:function(a){this.Ip=a}});r.Object.defineProperty(W.prototype,"__tw_visible",{configurable:!0,enumerable:!0,get:function(){return this.visible}});r.Object.defineProperty(W.prototype,"__tw_visible",{configurable:!0,enumerable:!0,set:function(a){this.visible=a}});W.prototype.rotate=function(a){this.rotation+=a};
W.prototype.ne=function(a){a.save();var b=this.u;a.translate(b.x,b.y);a.rotate(this.hd);a.scale(this.wb.x,this.wb.y);a.restore()};W.prototype.Ii=function(a,b){if(!this.Kh){this.Yc(a);this.visible&&Bm(this);for(var c=v(this.children),d=c.next();!d.done;d=c.next())d.value.Ii(a,b)}};
r.Object.defineProperties(W.prototype,{Ip:{configurable:!0,enumerable:!0,get:function(){return 180/Math.PI*this.rotation},set:function(a){this.rotation=Math.PI/180*a}},u:{configurable:!0,enumerable:!0,get:function(){return this.parent instanceof W?this.parent.u.add(this.position):this.position}},hd:{configurable:!0,enumerable:!0,get:function(){return this.parent instanceof W?this.parent.hd+this.rotation:this.rotation}},Go:{configurable:!0,enumerable:!0,get:function(){return 180/Math.PI*this.hd}},
wb:{configurable:!0,enumerable:!0,get:function(){return this.parent instanceof W?new V(this.parent.wb.x*this.scale.x,this.parent.wb.y*this.scale.y):this.scale}}});function Cm(a,b,c,d){c=c===void 0?0:c;d=d===void 0?0:d;W.call(this,a===void 0?0:a,b===void 0?0:b,c,d);this.offset=V.ZERO;this.size=new V(c,d)}ja(Cm,W);var Dm,Em,Fm,Gm=new Map,Hm=0;function Im(a){var b=Hm++;Gm.set(b,a);return b}function Jm(a){Gm.forEach(function(b){b.Yc(a)})}var Km=new Map,Lm=new Map;function Mm(){Lm=new Map;Km.forEach(function(a,b){a.oe&&a.oe.clear();a.Ng||Lm.set(b,a)})}var Nm=0;function Om(a){var b=Nm++;Km.set(b,a);return b}var Pm=new Map,Qm=new Map;
function Bm(a){if(a instanceof W){if(a.$a)if(a instanceof Rm)Sm(a).forEach(function(d){Qm.set(d,[].concat(la(Qm.get(d)||[]),[a]))});else{var b=a.u.y;Qm.set(b,[].concat(la(Qm.get(b)||[]),[a]))}b=new Set;for(var c=a.parent;c;){c instanceof W&&b.add(c);if(c.$a)return;c=c.parent}Pm.set(a,b)}}
function Tm(){function a(f,h){h=h===void 0?!1:h;if(!b.has(f)){if(c.has(f))throw Error("Circular dependency detected at "+f);h||(c.add(f),Pm.get(f).forEach(function(n){return a(n)}),c.delete(f));var k=f instanceof Rm;if(f.$a){h=f.$a;var l=!0;do{var m=e.shift();if(m!==void 0){do{var q=Qm.get(m).shift();if((l=q!==f)||k&&m<q.pe)q instanceof Rm&&b.has(q)?d.push(q):(q.$a=!1,a(q,h),q.$a=!0)}while(Qm.get(m).length&&(k||l))}}while(e.length&&(k?m<f.pe:l&&m<f.u.y))}h&&f.children.forEach(function(n){n.visible&&
a(n,h)});k&&e[0]<f.pe||b.add(f);d.push(f)}}var b=new Set,c=new Set,d=[],e=[].concat(la(Qm.keys()));e.sort(function(f,h){return f-h});Pm.forEach(function(f,h){return a(h)});Qm.clear();Pm.clear();return d}Dm;function Um(a){this.root=a;this.$o=this.zj=0;this.xe;this.uh=null;this.te=new Cm(0,0,128,128)}Um.prototype.S=function(){var a=this;return va(new ua(new qa(function(b){if(b.wc==1){a.xe=Em;var c=a.root.S();b.wc=2;return{value:c}}a.zj=Date.now();a.wk();b.wc=0})))};
Um.prototype.run=function(){this.uh=!0;this.wk()};
Um.prototype.wk=function(){var a=this;Mm();var b=Date.now(),c=Math.max(1,1E3/30-(b-this.zj-this.$o)),d=(b-this.zj)/1E3;this.xe.clearRect(0,0,this.xe.canvas.width,this.xe.canvas.height);Jm(d);this.root.Ii(d,this.xe);Tm().forEach(function(e){e.ne(a.xe)});Fm.drawImage(this.xe.canvas,this.te.u.x+this.te.offset.x,this.te.u.y+this.te.offset.y,this.te.size.x,this.te.size.y,0,0,Fm.canvas.width,Fm.canvas.height);this.root.Kh?this.uh=!1:(Vm(this,this.root),this.uh!==!1&&(this.uh===null&&(this.uh=!1),setTimeout(this.wk.bind(this),
c),this.zj=b,this.$o=c))};function Vm(a,b){for(var c=v(b.children.slice()),d=c.next();!d.done;d=c.next())d=d.value,d.Kh?zm(b,d):Vm(a,d)}var Wm=new Map,Xm=new Map;function Ym(){var a=Q("scratch").getContext("2d");Em=a;var b=Q("display").getContext("2d");Fm=b;a.imageSmoothingEnabled=!1;b.imageSmoothingEnabled=!1;b.globalCompositeOperation="copy";if(!cb&&!eb)for(a=v(Wm.values()),b=a.next();!b.done;b=a.next()){b=b.value;b.volume=.01;try{b.play()}catch(c){}b.pause()}}
function Zm(a){if(!Xm.has(a)){var b=new Image;b.src="index/"+a;Xm.set(a,b)}return Xm.get(a)};function $m(a){W.call(this,"Background");this.sd=Zm(a);this.fixed=!1}ja($m,W);$m.prototype.ne=function(a){a.save();var b=this.u.add(V.ZERO);a.translate(b.x,b.y);a.rotate(this.hd);a.scale(this.wb.x,this.wb.y);if(this.sd){var c=Dm.te;b.x=Math.floor((c.u.x-b.x)/this.sd.width)*this.sd.width;for(b.y=Math.floor((c.u.y-b.y)/this.sd.height)*this.sd.width;b.y<c.u.y+c.size.y;){for(var d=b.x;b.x<c.u.x+c.size.x;)a.drawImage(this.sd,b.x,b.y),b.x+=this.sd.width;b.x=d;b.y+=this.sd.height}}a.restore()};function Rm(){W.call(this,"TilemapLayer");this.pe=this.Hg=this.xk=null;this.wm="";this.Wp=new Map;this.cn=xm(16,16);this.map=new Map;this.yf=new Map;this.Xm=1;this.Kc=0;this.Ae=2;this.canvas=document.createElement("canvas",{width:Em.canvas.width,width:Em.canvas.height});this.canvas.getContext("2d").imageSmoothingEnabled=Em.imageSmoothingEnabled;this.tk=function(a,b,c){c=c===void 0?V.ZERO:c;this.$r=a;this.offset=c;this.Fb=0;this.frames=b};this.tk.prototype.rs=function(){this.Fb=(this.Fb+1)%this.frames.length}}
ja(Rm,W);g=Rm.prototype;g.Hi=function(){an(this,this.map);W.prototype.Hi.call(this)};g.zd=function(){this.canvas.remove();W.prototype.zd.call(this)};function bn(a,b,c,d){d=d===void 0?xm(16,16):d;a.wm=b;c=Zm(c);c.size=d;a.Wp.set(b,c)}g.On=function(a,b){this.map.set(a,new this.tk(this.wm,wa.apply(2,arguments),b))};function an(a,b){var c=a.canvas.getContext("2d");c.clearRect(0,0,a.canvas.width,a.canvas.height);b.forEach(function(d,e){cn(a,c,d,e)})}
function cn(a,b,c,d){var e=a.Wp.get(c.$r);b.drawImage(e,c.frames[c.Fb].x*e.size.x,c.frames[c.Fb].y*e.size.y,e.size.x,e.size.y,d.x*a.cn.x+c.offset.x,d.y*a.cn.y+c.offset.y,e.size.x,e.size.y)}g.Nn=function(a,b){this.yf.set(a,new this.tk(this.wm,wa.apply(2,arguments),b))};function dn(a,b){var c=c===void 0?V.ZERO:c;b.forEach(function(d,e){d instanceof V?a.On(e,c,d):a.On.apply(a,[e,c].concat(la(d)))})}
function en(a,b){var c=xm(-8,-8);c=c===void 0?V.ZERO:c;b.forEach(function(d,e){d instanceof V?a.Nn(e,c,d):a.Nn.apply(a,[e,c].concat(la(d)))})}function Sm(a){function b(e,f){e=c.y+f.y*a.cn.y;if(a.pe===null||a.pe<e)a.pe=e;d.has(e)||(d.add(e),a.Hg.set(e,[]));a.Hg.get(e).push(f)}var c=a.u,d=new Set;a.Hg=new Map;a.pe=null;a.map.forEach(b);a.yf.forEach(b);a.xk=[].concat(la(d.keys()));a.xk.sort(function(e,f){return e-f});return d}
g.ne=function(a){var b=this;a.save();var c=this.u;a.translate(c.x,c.y);a.rotate(this.hd);a.scale(this.wb.x,this.wb.y);this.$a?(c=this.xk.shift(),c!==void 0&&(this.Hg.get(c).forEach(function(d){b.map.has(d)&&cn(b,a,b.map.get(d),d);b.yf.has(d)&&cn(b,a,b.yf.get(d),d)}),this.Hg.delete(c))):(this.yf.forEach(function(d,e){return cn(b,a,d,e)}),a.drawImage(this.canvas,0,0));a.restore()};g.Yc=function(a){this.Kc+=this.Xm*a;this.Kc>=1/this.Ae&&(this.yf.forEach(function(b){return b.rs()}),this.Kc=0);this.xf()};function fn(){W.call(this,"Sprite");this.sd=null;this.reverse=this.Ob=this.Sn=!1;this.dd="default";this.Fb=0;this.Xm=1;this.Kc=0;this.Gq=function(a,b,c,d,e,f){b=b===void 0?0:b;c=c===void 0?0:c;d=d===void 0?Infinity:d;e=e===void 0?Infinity:e;f=f===void 0?1:f;this.image=Zm(a);this.x=b;this.y=c;this.w=d;this.Io=e;this.Ls=f};this.Animation=function(a,b,c){this.frames=a=a===void 0?[]:a;this.Kl=b===void 0?!1:b;this.Ae=c===void 0?5:c};this.Pn=new Map;this.Ra.animation_finish=[]}ja(fn,W);g=fn.prototype;
g.Zc=function(){this.Sn&&this.play()};g.Yc=function(a){this.animation==null||this.Ob==0?this.Ob=!1:(this.Kc+=this.Xm*a,this.Kc>=this.Gs/this.Ae&&(a=this.animation.frames.length,(this.reverse?this.Fb-1<0:this.Fb+1>=a)?this.animation.Kl?this.Fb=this.reverse?a-1:0:(this.Ob=!1,this.fl("animation_finish",this.dd)):this.Fb+=this.reverse?-1:1,this.Kc=0),this.xf())};
g.ne=function(a){a.save();var b=this.u;a.translate(b.x,b.y);a.rotate(this.hd);a.scale(this.wb.x,this.wb.y);this.frame.image&&a.drawImage(this.frame.image,this.frame.x,this.frame.y,this.frame.w,this.frame.Io,0,0,this.frame.w,this.frame.Io);a.restore()};function X(a,b,c,d){return{name:a,frames:b,Ae:c===void 0?5:c,Kl:d===void 0?!1:d}}function Y(a,b,c,d){d=d===void 0?[]:d;return d.map(function(e){return[a,e[0]*b,e[1]*c,b,c,e[2]||1]})}
function Z(a,b,c){c=c===void 0?!1:c;a.Pn[b.name]=new a.Animation(b.frames.map(function(d){return new a.Gq(d[0],d[1],d[2],d[3],d[4],d[5]||1)}),b.Kl||!1,b.Ae||5);c&&(a.Sn=c,a.dd=b.name)}g.play=function(a,b){a=a===void 0?"":a;this.reverse=b===void 0?!1:b;this.Kc=0;a&&(this.dd=a);this.Fb=this.reverse?this.animation.frames.length-1:0;this.Ob=this.animation.frames.length>1};g.resume=function(){this.Ob=!0};g.pause=function(){this.Ob=!1};
g.stop=function(){this.Fb=this.reverse?this.animation.frames.length-1:0;this.Ob=!1};r.Object.defineProperties(fn.prototype,{animation:{configurable:!0,enumerable:!0,get:function(){try{return this.Pn[this.dd]}catch(a){return null}}},Ae:{configurable:!0,enumerable:!0,get:function(){try{return this.animation.Ae}catch(a){return 5}}},frame:{configurable:!0,enumerable:!0,get:function(){try{return this.animation.frames[this.Fb]}catch(a){return null}}},Gs:{configurable:!0,enumerable:!0,get:function(){try{return this.frame.Ls}catch(a){return 1}}}});function gn(a){this.Ob=!1;this.object=a;this.jc=[];this.yc=[];this.qe=!1;this.me=function(){this.time=0;this.easing="linear";this.duration=1;this.xc=[];this.from;this.Tj;this.bi;this.yb=null;this.force=!1};this.me.prototype.Fo=function(b,c){c=c===void 0?0:c;return c+1<this.xc.length?this.Fo(b["__tw_"+this.xc[c]],c+1):b["__tw_"+this.xc[c]]};this.me.prototype.Np=function(b,c,d){d=d===void 0?0:d;if(d+1<this.xc.length)return this.Np(b["__tw_"+this.xc[d]],c,d+1);b["__tw_"+this.xc[d]]=c};this.me.prototype.Xn=
function(b,c,d){d=d===void 0?0:d;if(d+1<this.xc.length)return this.Xn(b["__tw_"+this.xc[d]],c,d+1);b["__tw_"+this.xc[d]]+=c};this.me.prototype.Hk=function(){if(this.yb){var b=this.yb;this.yb=null;b()}};this.Hn=function(){this.time=0;this.duration=1;this.yb=null};this.Hn.prototype.Hk=function(){if(this.yb){var b=this.yb;this.yb=null;b()}};this.vk=function(){this.method=function(){};this.time=0;this.easing="linear";this.duration=1;this.from;this.bi;this.yb=null};this.vk.prototype.Hk=function(){if(this.yb){var b=
this.yb;this.yb=null;b()}};this.Ra={finish:[]};this.bt=Im(this)}g=gn.prototype;g.connect=function(a,b){this.Ra[a]&&this.Ra[a].push(b)};function hn(a,b){if(a.Ra.finish){var c=function(){b();var d=a.Ra.finish.indexOf(c);d!==-1&&a.Ra.finish.splice(d,1)};a.Ra.finish.push(c)}}g.fl=function(a){var b=wa.apply(1,arguments),c=this.Ra[a];if(c){c=v(c);for(var d=c.next();!d.done;d=c.next())d.value.apply(null,la(b))}};g.disconnect=function(a,b){var c=this.Ra[a];c&&(this.Ra[a]=c.filter(function(d){return d!==b}))};
function jn(a){a.qe=!0;return a}g.play=function(a,b){var c=wa.apply(2,arguments),d=new this.me;d.xc=a.split(":");d.bi=b;for(var e=0;e<c.length;e++)typeof c[e]==="function"?d.yb=c[e]:typeof c[e]==="number"?d.duration=c[e]:typeof c[e]==="string"&&(c[e]=="ease_in"||c[e]=="ease_out"||c[e]=="ease_in_out"||c[e]=="linear"?d.easing=c[e]:c[e]=="force"&&(d.force=!0));this.qe?this.yc[this.yc.length-1].push(d):this.yc.push([d]);this.qe=!1;this.Ob=!0};
g.method=function(a,b,c){var d=wa.apply(3,arguments),e=new this.vk;e.method=a;e.from=b;e.bi=c;for(var f=0;f<d.length;f++)typeof d[f]==="function"?e.yb=d[f]:typeof d[f]==="number"?e.duration=d[f]:typeof d[f]!=="string"||d[f]!="ease_in"&&d[f]!="ease_out"&&d[f]!="ease_in_out"&&d[f]!="linear"||(e.easing=d[f]);this.qe?this.yc[this.yc.length-1].push(e):this.yc.push([e]);this.qe=!1;this.Ob=!0};
g.wait=function(a,b){var c=new this.Hn;c.duration=a===void 0?1:a;c.yb=b===void 0?null:b;this.qe?this.yc[this.yc.length-1].push(c):this.yc.push([c]);this.qe=!1;this.Ob=!0};
function kn(a,b){a.jc.length||(a.jc=a.yc.shift(),a.jc&&a.jc.forEach(function(k){k instanceof a.me&&(k.from=k.Fo(a.object),k.Tj=k.from)}));if(a.jc===void 0)return a.jc=[],0;for(var c=[],d=b;a.jc.length;){var e=a.jc.shift();e.time+=b;var f=Math.min(e.time/e.duration,1);if(e instanceof a.me){var h=ln(e.from,e.bi,mn(f,e.easing));e.force?e.Np(a.object,h-(e.force?0:e.Tj)):e.Xn(a.object,h-(e.force?0:e.Tj));e.Tj=h}else e instanceof a.vk&&e.method(ln(e.from,e.bi,mn(f,e.easing)));f>=1?(e.Hk(),d=Math.min(d,
Math.max(e.time-e.duration,0))):(d=0,c.push(e))}a.jc.push.apply(a.jc,la(c));return d}g.Yc=function(a){if(this.Ob){for(;a>0;)a=kn(this,a);this.yc.length||this.jc.length||(this.Ob=!1,this.fl("finish"))}};function ln(a,b,c){return a+(b-a)*c}function mn(a,b){switch(b){case "ease_in":return a*a;case "ease_out":return a*(2-a);case "ease_in_out":return a<.5?2*a*a:-1+(4-2*a)*a;default:return a}}g.qd=function(){var a=this.bt;console.log("delete",a);Gm.delete(a);delete this.Ra;delete this.object};function nn(){W.call(this,"Collision");this.visible=!1}ja(nn,W);nn.prototype.ne=function(){};nn.prototype.Gl=function(){return!1};nn.prototype.resolve=function(){return V.ZERO};function on(a,b,c){a=a===void 0?16:a;b=b===void 0?16:b;c=c===void 0?!0:c;nn.call(this,"CollisionRect");this.size=new V(a,b);c&&(this.position.x=(16-a)/2,this.position.y=(16-b)/2)}ja(on,nn);on.prototype.Gl=function(a){return a instanceof on?this.left<a.right&&this.right>a.left&&this.top<a.bottom&&this.bottom>a.top:!1};
on.prototype.resolve=function(a){var b=V.ZERO;if(a instanceof on){var c=this.Ri.x-a.Ri.x,d=this.Ri.y-a.Ri.y,e=(this.size.x+a.size.x)/2-Math.abs(c);a=(this.size.y+a.size.y)/2-Math.abs(d);e<a?b.x=c>0?b.x+e:b.x-e:b.y=d>0?b.y+a:b.y-a}return b};on.prototype.ne=function(a){a.save();var b=this.u;a.translate(b.x,b.y);a.rotate(this.hd);a.scale(this.wb.x,this.wb.y);a.beginPath();a.rect(0,0,this.size.x||1,this.size.y||1);a.fill();a.restore()};
r.Object.defineProperties(on.prototype,{left:{configurable:!0,enumerable:!0,get:function(){return this.u.x}},top:{configurable:!0,enumerable:!0,get:function(){return this.u.y}},right:{configurable:!0,enumerable:!0,get:function(){return this.u.x+this.size.x}},bottom:{configurable:!0,enumerable:!0,get:function(){return this.u.y+this.size.y}},Ri:{configurable:!0,enumerable:!0,get:function(){return new V(this.u.x+this.size.x/2,this.u.y+this.size.y/2)}}});function pn(a,b,c){a=a===void 0?"1":a;b=b===void 0?"1":b;c=c===void 0?!1:c;W.call(this,"Body");this.Ng=!1;this.Me=a;this.Re=b;this.Si=Om(this);this.oe=new Map;this.wf=this.vf=c;this.Bj=1E-4}ja(pn,W);pn.prototype.zd=function(){for(var a=v(this.children.slice()),b=a.next();!b.done;b=a.next())b.value.zd();Km.delete(this.Si);this.Fg()};pn.prototype.Gg=function(a){return(parseInt(this.Re,2)&parseInt(a,2))>0};
pn.prototype.Yc=function(){var a=this;this.wf||(Lm.delete(this.Si),Lm.forEach(function(b){if(a.Gg(b.Me))for(var c=v(a.children),d=c.next();!d.done;d=c.next())if(d=d.value,d instanceof nn||Object.getPrototypeOf(d)instanceof nn)for(var e=v(b.children),f=e.next();!f.done;f=e.next())f=f.value,(f instanceof nn||Object.getPrototypeOf(f)instanceof nn)&&d.Gl(f)&&(a.oe.set(b,[[d,f]].concat(la(a.oe.get(b)||[]))),!b.wf&&b.Gg(a.Me)&&b.oe.set(a,[[f,d]].concat(la(b.oe.get(a)||[]))))}));this.xf();this.wf||qn(this)};
function qn(a){if(!a.wf){var b=!1,c=a.Bj;a.oe.forEach(function(d,e){d=d.map(function(h){return h[0].resolve(h[1])}).reduce(function(h,k){return h.add(k)},V.ZERO);if(e.vf)a.u.x+=d.x,a.u.y+=d.y,b=e.vf;else if(b||a.vf)e.u.x-=d.x,e.u.y-=d.y;else{var f=d.scale(c/(c+e.Bj));a.u.x+=d.x-f.x;a.u.y+=d.y-f.y;e.u.x-=f.x;e.u.y-=f.y;c+=e.Bj}});a.vf=b}}r.Object.defineProperties(pn.prototype,{Ws:{configurable:!0,enumerable:!0,get:function(){return this.vf},set:function(a){this.wf=a}}});function rn(a,b){a=a===void 0?"1":a;b=b===void 0?"1":b;W.call(this,"Area");this.Ng=!1;this.Me=a;this.Re=b;this.Fh=new Map}ja(rn,W);function sn(a){return a.Fh.keys().next().value}rn.prototype.Gg=function(a){return(parseInt(this.Re,2)&parseInt(a,2))>0};rn.prototype.Jn=function(){};
rn.prototype.Yc=function(){var a=this,b=new Map;this.Ng||Km.forEach(function(d){if(!a.Ng&&a.Gg(d.Me))for(var e=v(a.children),f=e.next();!f.done;f=e.next())if(f=f.value,f instanceof nn||Object.getPrototypeOf(f)instanceof nn)for(var h=v(d.children),k=h.next();!k.done;k=h.next())k=k.value,(f instanceof nn||Object.getPrototypeOf(f)instanceof nn)&&f.Gl(k)&&b.set(d,[[f,k]].concat(la(b.get(d)||[])))});var c=new Map(this.Fh);b.forEach(function(d,e){var f=a.Fh.has(e);a.Fh.set(e,d);c.delete(e);f||a.Jn()});
c.forEach(function(d,e){a.Fh.delete(e)});this.xf()};function tn(a,b,c,d){a=a===void 0?"1":a;W.call(this,"SRBCollision");this.Ng=!1;this.Me=a;this.Si=Om(this);this.wf=this.vf=this.Ws=!0;this.position.x=b.x;this.position.y=b.y;a=new on(c,d,!1);a.parent=this;this.children.push(a);this.visible=!1}ja(tn,W);g=tn.prototype;g.Gg=function(){return!1};g.zd=function(){for(var a=v(this.children.slice()),b=a.next();!b.done;b=a.next())b.value.zd();Km.delete(this.Si);this.Fg()};g.ne=function(){};g.Yc=function(){};g.V=function(){};function un(){var a=vn();a.name="player";a.Bj=1;a.direction=xm(0,1);a.$a=!0;var b=wn();a.ge=b;a.ua=null;var c=xn();a.ga=c;a.ga.connect("animation_finish",function(d){d.split("_")[0]!=="rot"&&d.split("_")[0]!=="act"&&d.split("_")[0]!=="take"||vm()});a.Tr=function(){this.ga.play("take_"+(this.direction.x&&(this.direction.x>0?"right":"left")||this.direction.y&&(this.direction.y>0?"front":"back")));var d=sn(this.ge);d&&d.name=="Plant"&&(this.ua=this.Fr(),this.ua.play(d.ga.dd),this.ua.position.x=d.u.x-
this.u.x,this.ua.position.y=d.u.y-this.u.y,this.V(this.ua),this.ua.Hi(),this.ua.xl(),d.qd(),this.ge.Re="10000")};a.$s=function(){this.ga.play("take_"+(this.direction.x&&(this.direction.x>0?"right":"left")||this.direction.y&&(this.direction.y>0?"front":"back")));var d=sn(this.ge);d&&d.name!="Plant"&&(this.ua=d,this.ua.position.x=d.u.x-this.u.x,this.ua.position.y=d.u.y-this.u.y,Am(this.ua,this),this.ua.xl(),this.ge.Re="10000")};a.xr=function(){this.ga.play("take_"+(this.direction.x&&(this.direction.x>
0?"right":"left")||this.direction.y&&(this.direction.y>0?"front":"back")),!0);if(this.ua){var d=sn(this.ge);Am(this.ua,this.parent);this.ua.u.x=this.u.x;this.ua.u.y=this.u.y-8;d&&d.name=="Crate"&&this.ua.name=="Fruit"&&d.empty?this.ua.an(this.direction,d):this.ua.an(this.direction);this.ua=null;this.ge.Re="1000"}};a.Bs=function(){this.ga.play("act_"+(this.direction.x&&(this.direction.x>0?"right":"left")||this.direction.y&&(this.direction.y>0?"front":"back")));if(this.ua){var d=sn(this.ge);d&&d.name==
"Gate"&&this.ua.name=="Key"&&!d.open&&this.ua.ga.dd==d.color.dd&&(this.ua.qd(),this.ua=null,d.Cs(),this.ge.Re="1000")}};a.V(c);a.V(new on);a.V(b);return a}var yn={ir:"character.png"};
function vn(){var a=new pn("101","11");a.Zc=function(){var b=this;this.ka=new gn(this);this.ka.connect("finish",function(){b.direction.x?b.ga.play("idle_"+(b.direction.x>0?"right":"left")):b.direction.y&&b.ga.play("idle_"+(b.direction.y>0?"front":"back"));vm()});this.ga.play("idle_"+(this.direction.x&&(this.direction.x>0?"right":"left")||this.direction.y&&(this.direction.y>0?"front":"back")))};a.Fg=function(){this.ka.qd()};a.pu=function(){var b=this.dd.split("_");b[0]="idle";b.length>2&&b.splice(1,
1);this.ga.play(b.join("_"))};a.ps=function(){this.direction.y=0;this.direction.x=1;this.ka.play("global_position:x",this.u.x+16);this.ga.play("walk_right")};a.os=function(){this.direction.y=0;this.direction.x=-1;this.ka.play("global_position:x",this.u.x-16);this.ga.play("walk_left")};a.ls=function(){this.direction.x=0;this.direction.y=1;this.ka.play("global_position:y",this.u.y+16);this.ga.play("walk_front")};a.qs=function(){this.direction.x=0;this.direction.y=-1;this.ka.play("global_position:y",
this.u.y-16);this.ga.play("walk_back")};a.ns=function(){this.direction.x?(this.ka.play("global_position:x",this.u.x+16*this.direction.x),this.ga.play("walk_"+(this.direction.x>0?"right":"left"))):this.direction.y&&(this.ka.play("global_position:y",this.u.y+16*this.direction.y),this.ga.play("walk_"+(this.direction.y>0?"front":"back")))};a.jt=function(){if(this.direction.x){var b=this.direction.x>0?"right":"left";this.direction.y=this.direction.x;var c=this.direction.y>0?"front":"back";this.direction.x=
0}else b=this.direction.y>0?"front":"back",this.direction.x=-this.direction.y,c=this.direction.x>0?"right":"left",this.direction.y=0;this.ga.play(["rot",b,c].join("_"))};a.ht=function(){if(this.direction.x){var b=this.direction.x>0?"right":"left";this.direction.y=-this.direction.x;var c=this.direction.y>0?"front":"back";this.direction.x=0}else b=this.direction.y>0?"front":"back",this.direction.x=this.direction.y,c=this.direction.x>0?"right":"left",this.direction.y=0;this.ga.play(["rot",b,c].join("_"))};
a.Sr=function(){this.ga.play("happy")};return a}
function xn(){var a=yn.ir,b=new fn;Z(b,X("idle_right",[[a,0,0,16,16]]));Z(b,X("walk_right",Y(a,16,16,[[0,0],[1,0],[2,0],[3,0],[4,0],[5,0],[6,0],[7,0]]),8,!0));Z(b,X("idle_left",[[a,0,16,16,16]]));Z(b,X("walk_left",Y(a,16,16,[[0,1],[1,1],[2,1],[3,1],[4,1],[5,1],[6,1],[7,1]]),8,!0));Z(b,X("idle_front",[[a,0,32,16,16]]),!0);Z(b,X("walk_front",Y(a,16,16,[[0,2],[1,2],[2,2],[3,2],[0,2],[4,2],[5,2],[3,2]]),8,!0));Z(b,X("idle_back",[[a,0,48,16,16]]));Z(b,X("walk_back",Y(a,16,16,[[0,3],[1,3],[2,3],[3,3],[0,
3],[4,3],[5,3],[3,3]]),8,!0));Z(b,X("rot_back_right",Y(a,16,16,[[0,4],[1,4],[2,4],[3,4],[4,4],[5,4],[0,0]]),8));Z(b,X("rot_right_back",Y(a,16,16,[[5,4],[4,4],[3,4],[2,4],[1,4],[0,4],[0,3]]),8));Z(b,X("rot_right_front",Y(a,16,16,[[0,5],[1,5],[2,5],[3,5],[4,5],[5,5],[0,2]]),8));Z(b,X("rot_front_right",Y(a,16,16,[[5,5],[4,5],[3,5],[2,5],[1,5],[0,5],[0,0]]),8));Z(b,X("rot_back_left",Y(a,16,16,[[0,6],[1,6],[2,6],[3,6],[4,6],[5,6],[0,1]]),8));Z(b,X("rot_left_back",Y(a,16,16,[[5,6],[4,6],[3,6],[2,6],[1,
6],[0,6],[0,3]]),8));Z(b,X("rot_left_front",Y(a,16,16,[[0,7],[1,7],[2,7],[3,7],[4,7],[5,7],[0,2]]),8));Z(b,X("rot_front_left",Y(a,16,16,[[5,7],[4,7],[3,7],[2,7],[1,7],[0,7],[0,1]]),8));Z(b,X("take_right",Y(a,16,16,[[0,0,.1],[0,8],[1,8],[2,8],[3,8],[4,8],[5,8],[6,8],[7,8],[0,0,.1]]),10));Z(b,X("take_left",Y(a,16,16,[[0,1,.1],[0,9],[1,9],[2,9],[3,9],[4,9],[5,9],[6,9],[7,9],[0,1,.1]]),8));Z(b,X("take_front",Y(a,16,16,[[0,2,.1],[0,10],[1,10],[2,10],[3,10],[4,10],[5,10],[6,10],[7,10],[0,2,.1]]),8));Z(b,
X("take_back",Y(a,16,16,[[0,3,.1],[0,11],[1,11],[2,11],[3,11],[4,11],[5,11],[6,11],[7,11],[0,3,.1]]),8));Z(b,X("act_right",Y(a,16,16,[[0,8],[1,8,6],[2,8],[7,8],[0,0]]),8));Z(b,X("act_left",Y(a,16,16,[[0,9],[1,9,6],[2,9],[7,9],[0,1]]),8));Z(b,X("act_front",Y(a,16,16,[[0,10],[1,10,6],[2,10],[7,10],[0,2]]),8));Z(b,X("act_back",Y(a,16,16,[[0,11],[1,11,6],[2,11],[7,11],[0,3]]),8));Z(b,X("sad",Y(a,18,16,[[0,12],[1,12],[2,12],[3,12],[4,12]]),8,!0));Z(b,X("happy",Y(a,18,16,[[0,13],[1,13],[2,13],[3,13],[4,
13],[5,13],[6,13],[0,14]]),10,!0));return b}function wn(){var a=new rn("0","11000"),b=new on(2,2);a.V(b);a.$n=b;a.xf=function(){this.position=this.parent.direction.scale(4);var c=this.parent.direction.scale(8);this.parent.direction.x<0?this.position.x-=Math.abs(c.x):this.parent.direction.y<0&&(this.position.y-=Math.abs(c.y));this.$n.size.x=Math.max(Math.abs(c.x),2);this.$n.size.y=Math.max(Math.abs(c.y),2)};return a};var zn={x:0,y:1},An={x:-1,y:0},Bn={x:0,y:-1},Cn=1,Dn=[{char:{direction:Bn},ic:["00 00 00 00 00 00 00 00 00".split(" "),"00 00 00 00 00 00 00 00".split(" "),"00 00 00 00 00 00 00 00 00".split(" "),"00 00 00 1f 00 00 00 00".split(" "),"00 00 00 00 00 00 00 00 00".split(" "),"00 00 00 16 00 00 00 00".split(" "),"00 00 00 00 00 00 00 00 00".split(" "),"00 00 00 10 00 00 00 00".split(" "),"00 00 00 31 90 00 00 00 00".split(" "),"00 00 00 10 00 00 00 00".split(" "),"00 00 00 00 90 00 00 00 00".split(" "),
"00 00 00 1s 00 00 00 00".split(" "),"00 00 00 00 00 00 00 00 00".split(" "),"00 00 00 11 00 00 00 00".split(" "),"00 00 00 00 00 00 00 00 00".split(" "),"00 00 00 00 00 00 00 00".split(" "),"00 00 00 00 00 00 00 00 00".split(" ")]},{char:{direction:zn},ic:["00 00 00 00 00 00 00 00 00".split(" "),"00 00 00 00 00 00 00 00".split(" "),"00 00 00 00 00 00 00 00 00".split(" "),"00 1f 1f 1f 10 00 00 00".split(" "),"00 00 00 00 00 00 00 00 00".split(" "),"00 10 10 10 16 00 00 00".split(" "),"00 00 00 00 00 00 00 00 00".split(" "),
"00 10 10 10 16 00 00 00".split(" "),"00 00 00 00 00 00 00 00 00".split(" "),"00 10 10 10 16 00 00 00".split(" "),"10 31 90 10 00 00 00 00 00".split(" "),"10 10 00 00 00 00 00 00".split(" "),"00 00 00 00 00 00 00 00 00".split(" "),"1s 11 00 00 00 00 00 00".split(" "),"00 00 00 00 00 00 00 00 00".split(" "),"00 00 00 00 00 00 00 00".split(" "),"00 00 00 00 00 00 00 00 00".split(" ")]},{char:{direction:An},ic:["00 00 00 00 00 00 00 00 00".split(" "),"00 00 00 00 00 00 00 00".split(" "),"00 00 00 00 00 00 00 00 00".split(" "),
"00 00 16 10 10 10 00 00".split(" "),"00 00 00 00 30 90 00 00 00".split(" "),"00 00 10 10 10 10 10 00".split(" "),"00 00 00 00 30 90 00 00 00".split(" "),"00 00 10 1f 10 1f 00 00".split(" "),"00 00 00 00 00 00 00 00 00".split(" "),"00 00 00 00 10 00 00 00".split(" "),"00 00 10 00 31 90 10 00 00".split(" "),"00 1s 10 10 10 10 00 00".split(" "),"00 00 30 b0 90 00 10 00 00".split(" "),"00 10 10 10 11 16 00 00".split(" "),"00 00 00 10 00 00 00 00 00".split(" "),"00 00 00 00 00 00 00 00".split(" "),"00 00 00 00 00 00 00 00 00".split(" ")]},
{char:{direction:An},ic:["00 00 00 00 00 00 00 00 00".split(" "),"00 00 00 00 00 00 00 00".split(" "),"00 00 00 00 00 00 00 00 00".split(" "),"00 10 10 10 10 16 16 00".split(" "),"00 00 00 00 00 00 00 00 00".split(" "),"00 10 10 10 10 16 16 00".split(" "),"00 00 00 10 31 90 10 00 00".split(" "),"00 10 10 00 10 00 00 00".split(" "),"00 00 00 10 00 00 00 00 00".split(" "),"00 10 1f 10 10 10 00 00".split(" "),"00 00 00 10 00 00 00 00 00".split(" "),"00 10 1f 10 10 11 00 00".split(" "),"00 00 00 10 00 00 00 00 00".split(" "),
"00 10 1f 00 1s 00 00 00".split(" "),"00 00 00 00 00 00 00 00 00".split(" "),"00 10 1f 00 00 00 00 00".split(" "),"00 00 00 00 00 00 00 00 00".split(" ")]},{char:{direction:Bn},ic:["00 00 00 00 00 00 00 00 00".split(" "),"00 00 00 00 00 00 00 00".split(" "),"00 10 00 00 00 00 00 00 00".split(" "),"00 10 16 1s 16 10 10 00".split(" "),"00 10 00 00 00 00 00 00 00".split(" "),"12 10 16 16 16 10 10 00".split(" "),"00 10 00 00 00 00 00 00 00".split(" "),"10 10 10 10 10 10 10 00".split(" "),"31 90 00 00 00 00 00 00 00".split(" "),
"10 10 10 10 11 10 10 1f".split(" "),"00 00 00 00 00 00 00 00 00".split(" "),"00 10 10 10 10 10 10 1f".split(" "),"00 00 00 00 00 00 00 00 00".split(" "),"00 10 10 1f 1f 1f 10 10".split(" "),"00 00 00 00 00 00 00 00 00".split(" "),"00 00 00 00 00 00 00 00".split(" "),"00 00 00 00 00 00 00 00 00".split(" ")]},{char:{direction:{x:1,y:0}},ic:["00 00 00 00 00 00 00 00 00".split(" "),"00 00 00 00 00 00 1s 00".split(" "),"00 00 00 00 00 00 00 00 00".split(" "),"00 1f 10 00 11 10 10 00".split(" "),"00 00 00 00 00 00 00 00 00".split(" "),
"00 1f 10 00 10 10 00 00".split(" "),"00 00 00 00 31 90 00 00 00".split(" "),"00 1f 10 00 10 00 00 00".split(" "),"00 00 00 00 00 00 00 00 00".split(" "),"00 1f 10 00 10 00 16 16".split(" "),"00 00 00 00 00 00 00 00 00".split(" "),"00 1f 10 10 10 10 16 16".split(" "),"00 00 00 00 00 00 00 00 00".split(" "),"00 1f 10 00 00 00 16 16".split(" "),"00 00 00 00 00 00 00 00 00".split(" "),"00 00 00 00 00 00 00 00".split(" "),"00 00 00 00 00 00 00 00 00".split(" ")]},{char:{direction:zn},ic:["00 00 00 00 00 00 00 00 00".split(" "),
"10 10 1s 00 00 10 10 10".split(" "),"00 10 10 10 00 00 00 00 00".split(" "),"10 11 00 00 00 10 12 10".split(" "),"00 10 00 00 00 00 00 00 00".split(" "),"10 10 10 00 00 10 10 10".split(" "),"00 00 00 00 00 00 31 90 00".split(" "),"00 10 00 00 00 00 10 00".split(" "),"00 31 90 00 00 00 00 00 00".split(" "),"00 10 00 10 10 00 10 00".split(" "),"00 10 00 31 b0 00 00 00 00".split(" "),"00 10 10 10 10 00 10 10".split(" "),"00 10 30 f0 b0 00 00 10 00".split(" "),"1s 10 10 10 10 10 10 10".split(" "),"00 30 b0 a0 10 00 00 10 00".split(" "),
"10 10 10 00 00 10 00 1s".split(" "),"00 00 00 00 00 00 00 00 00".split(" ")]},{char:{direction:zn},ic:["00 00 00 00 00 00 00 00 00".split(" "),"10 10 10 00 00 00 00 00".split(" "),"00 00 10 00 00 00 00 10 00".split(" "),"16 10 10 10 10 1f 1f 00".split(" "),"00 00 10 10 00 00 00 10 00".split(" "),"00 00 10 10 10 10 10 00".split(" "),"00 00 10 00 00 00 00 10 00".split(" "),"1s 10 10 00 10 10 10 00".split(" "),"00 00 31 90 00 00 50 10 00".split(" "),"00 10 10 11 00 10 10 00".split(" "),"00 00 10 00 00 10 20 00 00".split(" "),
"00 10 10 10 00 10 10 00".split(" "),"00 00 00 00 00 00 00 00 00".split(" "),"00 10 10 1f 00 16 16 00".split(" "),"00 00 00 00 00 00 00 00 00".split(" "),"00 00 00 00 00 00 00 00".split(" "),"00 00 00 00 00 00 00 00 00".split(" ")]},{char:{direction:zn},ic:["00 00 00 10 00 00 00 00 00".split(" "),"00 10 1s 10 00 1s 00 00".split(" "),"00 10 30 b0 00 00 10 00 00".split(" "),"10 10 10 12 00 10 10 10".split(" "),"00 00 00 31 90 00 50 00 00".split(" "),"10 10 00 10 00 10 10 10".split(" "),"00 00 00 31 90 00 20 10 00".split(" "),
"10 00 10 10 10 10 10 10".split(" "),"00 00 57 30 90 10 10 00 00".split(" "),"10 10 10 10 11 10 10 10".split(" "),"00 00 20 00 00 00 00 00 00".split(" "),"10 00 10 10 10 10 00 10".split(" "),"00 00 10 31 90 10 10 00 00".split(" "),"10 10 10 10 10 10 1s 00".split(" "),"00 10 10 00 00 00 00 00 00".split(" "),"1s 10 00 10 00 00 00 00".split(" "),"00 00 00 00 00 00 00 00 00".split(" ")]},{char:{direction:zn},ic:["00 00 00 00 00 00 00 00 00".split(" "),"00 00 00 00 00 00 00 00".split(" "),"00 00 00 00 00 00 00 00 00".split(" "),
"00 10 11 10 1f 1f 10 00".split(" "),"00 00 10 10 00 00 00 00 00".split(" "),"00 10 10 10 10 10 10 00".split(" "),"00 00 00 00 00 00 00 00 00".split(" "),"00 10 10 10 10 10 10 00".split(" "),"00 00 00 10 10 10 00 00 00".split(" "),"00 10 10 10 10 10 10 00".split(" "),"00 00 00 00 00 00 00 00 00".split(" "),"00 10 10 10 10 10 10 00".split(" "),"00 00 00 00 00 00 00 00 00".split(" "),"00 10 10 10 10 10 10 00".split(" "),"00 00 00 00 00 00 00 00 00".split(" "),"00 10 14 13 17 15 10 00".split(" "),"00 00 00 00 00 00 00 00 00".split(" ")]}];["objectives.png","sunnys_tiles.png","fence_tiles.png","sea.png","water_tiles.png"].concat(la(Object.values(yn))).forEach(Zm);wm;vm;var En=0;
function Fn(){function a(){En++;var n=new rn("0","100"),p=new fn,t=new fn;n.$a=!0;t.$a=!0;n.V(t);n.V(p);n.V(new on(2,2));t.position.y=-2;Z(t,X("default",Y("objectives.png",16,16,[[5,0]])),!0);p.position.y=-8;Z(p,X("default",Y("objectives.png",16,16,[[0,0,8],[1,0],[2,0],[3,0],[2,0],[1,0]]),8,!0),!0);n.Jn=function(){this.qd()};n.Fg=function(){En--;console.log(En)};return n}function b(){var n=new pn("1001","0",!0);n.name="Plant";n.$a=!0;var p=new fn;p.position.y=-16;n.Xt=p;var t=new fn;t.position.y=
-16;n.ga=t;n.V(p);n.V(t);n.V(new on);f.forEach(function(A,y){Z(t,X(A,Y("objectives.png",16,32,[[9+y,4]]),8),y==0)});Z(p,X("default",Y("objectives.png",16,32,[[7,4]]),2),!0);return n}function c(){var n=new pn("10001","0",!0);n.name="Crate";var p=new fn;n.ga=p;n.empty=!0;n.$a=!0;n.V(new on);Z(p,X("empty",[["objectives.png",96,0,16,16]]),!0);f.forEach(function(t,A){Z(p,X(t,[["objectives.png",(9+A)*16,160,16,16]]))});n.V(p);return n}function d(n){n=n===void 0?0:n;var p=new pn("10000","0",!0);p.name="Gate";
p.open=!1;p.$a=!0;p.V(new on(8,8));p.Cs=function(){p.mt.qd();p.color.qd();p.color=null;p.ga.play("open")};var t=new pn("1","0",!0);p.mt=t;t.V(new (Function.prototype.bind.apply(on,[null].concat(la(n?[0,16]:[16,0])))));p.V(t);t=new fn;p.ga=t;p.V(t);Z(t,X("close",[["objectives.png",0,(6+n)*16,16,16]]),!0);Z(t,X("open",Y("objectives.png",16,16,[[1,6+n],[2,6+n],[3,6+n],[4,6+n]]),8));var A=new fn;p.color=A;p.V(A);h.forEach(function(y,C){Z(A,X(y,[["objectives.png",C*16,(8+n)*16,16,16]]),C==0)});return p}
function e(){var n=new pn("1001","0",!0);n.name="Key";n.$a=!0;n.V(new on);var p=new fn;n.ga=p;n.V(p);h.forEach(function(t,A){Z(p,X(t,[["objectives.png",A*16,160,16,16]]),A==0)});n.Zc=function(){this.ka=new gn(this)};n.xl=function(){this.Me="0";this.$a=!1;this.ka.play("position:y",this.position.y>0?-12:-20,.4,"ease_out");this.position.x&&jn(this.ka).play("position:x",this.position.x/2,.4);this.ka.play("position:y",-8,.5,"ease_in");this.position.x&&jn(this.ka).play("position:x",0,.5)};n.an=function(t){var A=
this;this.$a=!0;this.ka.play("position:y",this.position.y+8+(t.y==1?-12:-20),.4,"ease_out");t.x&&jn(this.ka).play("position:x",this.position.x+t.x*8,.5);this.ka.play("position:y",this.position.y+8+t.y*16,.5,"ease_in");t.x&&jn(this.ka).play("position:x",this.position.x+t.x*16,.5);hn(this.ka,function(){A.Me="1001"})};return n}var f="carrot cauliflower pumpkin sunflower radish parsnip potato purple_cabbage beet corn lettuce".split(" "),h="cyan lime purple magenta red gold".split(" "),k=function(){var n=
Object.assign({},Dn[Cn-1]);if(!n.ic)return n;n.Rf=[];n.bh=[];n.Nb={Bp:[],xm:[],Zi:[],keys:[],Ao:[]};n.ic.forEach(function(p,t){var A=t%2==0;t=Math.floor(t/2);p.forEach(function(y,C){if(A){var U=t;U>=n.bh.length&&n.bh.push([]);y=y.split("");n.bh[U].push(parseInt(y[0],33));parseInt(y[1],13)>0&&(y=parseInt(y[1],13),n.Nb.Ao.push({x:C,y:U,type:h[(y-1)%6],pm:Math.floor(y/6)}))}else{y=y.split("");U=t;var J=y[0];U>=n.Rf.length&&n.Rf.push([]);n.Rf[U].push(parseInt(J));U=t;y=y[1];y=parseInt(y,36);switch(y){case 1:n.char.position=
{x:C,y:U};break;case 2:n.Nb.Bp.push({x:C,y:U});break;case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 12:case 13:case 14:n.Nb.xm.push({x:C,y:U,type:f[y-3]});break;case 15:n.Nb.Zi.push({x:C,y:U});break;case 16:case 17:case 18:case 19:case 20:case 21:case 22:case 23:case 24:case 25:case 26:case 27:n.Nb.Zi.push({x:C,y:U,type:f[y-16]});break;case 28:case 29:case 30:case 31:case 32:case 33:n.Nb.keys.push({x:C,y:U,type:h[y-28]})}}})});delete n.ic;return n}();En=0;Gm.clear();Km.clear();
Lm.clear();Pm.clear();Qm.clear();var l=new ym("Game"),m=k.bh.map(function(n){return n.map(function(){return 0})}),q=un();wm=q;q.u.x=k.char.position.x*16;q.u.y=k.char.position.y*16;q.direction.x=k.char.direction.x;q.direction.y=k.char.direction.y;q.Fr=function(){var n=new fn;n.name="Fruit";f.forEach(function(p,t){Z(n,X(p,[["objectives.png",(9+t)*16,0,16,16]]),t==0)});n.Zc=function(){this.ka=new gn(this)};n.xl=function(){this.ka.play("position:y",this.position.y>0?-12:-20,.4,"ease_out");this.position.x&&
jn(this.ka).play("position:x",this.position.x/2,.4);this.ka.play("position:y",-8,.5,"ease_in");this.position.x&&jn(this.ka).play("position:x",0,.5)};n.an=function(p,t){var A=this;t=t===void 0?null:t;this.ka.play("position:y",this.position.y+8+(p.y==1?-12:-20),.4,"ease_out");p.x&&jn(this.ka).play("position:x",this.position.x+p.x*8,.5);this.ka.play("position:y",this.position.y+8+p.y*16,.5,"ease_in");p.x&&jn(this.ka).play("position:x",this.position.x+p.x*16,.5);t||this.ka.method(function(y){A.visible=
Math.ceil(y)%2===1},0,10,"ease_out",2);hn(this.ka,function(){A.qd();t&&(En--,console.log(En),t.ga.play(A.dd))})};return n};l.V(new $m("sea.png"));l.V(function(){var n=new Rm;bn(n,"default","sunnys_tiles.png");var p=new Map,t=k.Rf[0].length,A=k.Rf.length,y=k.Rf.reduce(function(C,U,J,ic){return U.reduce(function(kb,jc,K,ne){if(jc){var Jl=ic[J-1]&&ic[J-1][K]&&1||0;Jl||(m[J][K]+=2,m[J][K+1]+=8,J>0&&p.set(xm(K,J-1),(p.get([K,J-1])||0)+4));var Kl=ne[K+1]&&2||0;Kl||(m[J][K+1]+=4,m[J+1][K+1]+=1,K<t-1&&p.set(xm(K+
1,J),(p.get([K+1,J])||0)+8));var Ll=ic[J+1]&&ic[J+1][K]&&4||0;Ll||(m[J+1][K]+=2,m[J+1][K+1]+=8,J<A-1&&p.set(xm(K,J+1),(p.get([K,J+1])||0)+1));ne=ne[K-1]&&8||0;ne||(m[J][K]+=4,m[J+1][K]+=1,K>0&&p.set(xm(K-1,J),(p.get([K-1,J])||0)+2));kb.push([xm(K,J),xm(Jl+Kl+Ll+ne,(jc-1)*3+(K+J)%2)])}return kb},C)},[]);dn(n,new Map(y));bn(n,"water","water_tiles.png",xm(32,32));p.forEach(function(C,U){p.set(U,[xm(C,0),xm(C,1)])});en(n,p);return n}());l.V(function(n,p){n=n===void 0?0:n;p=p===void 0?0:p;var t=new Rm;
t.$a=!0;t.position.x-=8-n;t.position.y-=8-p;bn(t,"default","fence_tiles.png",xm(16,16));n=k.bh.reduce(function(A,y,C,U){return y.reduce(function(J,ic,kb,jc){if(ic){var K=(ic-1)%16;jc=((K&1)===0&&U[C-1]&&U[C-1][kb]&&1||0)+((K&2)===0&&jc[kb+1]&&2||0)+((K&4)===0&&U[C+1]&&U[C+1][kb]&&4||0)+((K&8)===0&&jc[kb-1]&&8||0);m[C][kb]|=jc;J.push([xm(kb,C),xm(jc,Math.floor(ic/16))])}return J},A)},[]);dn(t,new Map(n));return t}());(function(){var n=new Map;m.forEach(function(p,t){var A=null;p.forEach(function(y,
C){y&&(A===null?(y&2)>0&&(A=C):(y&2)===0&&(l.V(new tn("10",xm(A*16,t*16),(C-A)*16,0)),A=null),n.get(C)===void 0?(y&4)>0&&n.set(C,t):(y&4)===0&&(l.V(new tn("10",xm(C*16,n.get(C)*16),0,(t-n.get(C))*16)),n.delete(C)))})})})();l.V(q);k.Nb.Bp.forEach(function(n){var p=a();p.position.x=n.x*16;p.position.y=n.y*16;l.V(p)});k.Nb.xm.forEach(function(n){var p=b();p.u.x=n.x*16;p.u.y=n.y*16;p.Zc=function(){this.ga.play(n.type)};l.V(p)});k.Nb.Zi.forEach(function(n){var p=c();p.u.x=n.x*16;p.u.y=n.y*16;n.type&&(p.Zc=
function(){this.ga.play(n.type)});l.V(p)});k.Nb.keys.forEach(function(n){var p=e();p.u.x=n.x*16;p.u.y=n.y*16;p.ga.Zc=function(){this.play(n.type)};l.V(p)});k.Nb.Ao.forEach(function(n){var p=d(n.pm);p.u.x=n.x*16-(n.pm?8:0);p.u.y=n.y*16-(n.pm?0:8);p.color.Zc=function(){this.play(n.type)};l.V(p)});En+=Math.min(k.Nb.xm.length,k.Nb.Zi.length);console.log(En);Dm=new Um(l);Dm.S()}
function Gn(a){a=="move_right"?wm.ps():a=="move_down"?wm.ls():a=="move_left"?wm.os():a=="move_up"?wm.qs():a=="move_forward"&&wm.ns()}function Hn(a){a=="right"?wm.jt():a=="left"&&wm.ht()};var Vl="robot-gate-harvest";Ak=10;Cn=Bk=zk(Math.min(parseInt(window.localStorage[Vl]||"0")+1,Ak));var In=0,Jn=!1;function Kn(a){if(!im(a)){T.lh(!1);a=Q("runButton");var b=Q("resetButton");b.style.minWidth||(b.style.minWidth=a.offsetWidth+"px");a.style.display="none";b.style.display="inline";Ln()}}
function Ln(){if("Interpreter"in window){N&&Ng(N);var a=P;var b=Ui;b||(console.warn("No workspace specified in workspaceToCode call.  Guessing."),b=Zc);var c=[];a.S(b);b=b.Ja(!0);for(var d=0,e;e=b[d];d++){var f=Xj(a,e);Array.isArray(f)&&(f=f[0]);f&&(e.s&&(f=a.Lp(f),a.Ec&&!e.ng&&(f=Yj(a.Ec,e)+f),a.yd&&!e.ng&&(f+=Yj(a.yd,e))),c.push(f))}c=c.join("\n");c=a.finish(c);c=c.replace(/^\s+\n/,"");c=c.replace(/\n\s+$/,"\n");lm=a=c=c.replace(/[ \t]+\n/g,"\n");am();In=0;Mn=new Interpreter(a,Nn);Jn=!1;Dm&&Dm.run();
On()}else setTimeout(Ln,99)}
function On(){if(En<=0){In=1;wm.Sr();var a=window.localStorage[Vl];a||(a=0);a<Bk&&(window.localStorage[Vl]=Bk);setTimeout(pm,1E3)}else for(;!Jn&&In===0;){do{var b=Mn.getStateStack();var c=b[b.length-1],d=c.node.type;d!=="VariableDeclaration"&&d.substr(-9)!=="Statement"||d==="BlockStatement"||d==="VariableDeclaration"&&b[b.length-2].node.type==="ForStatement"||Pn[Pn.length-1]===c||Pn.indexOf(c)!==-1&&d!=="ForStatement"&&d!=="WhileStatement"&&d!=="DoWhileStatement"?b=!1:(Pn=b.slice(),b=!0);b=!b;try{a=
Mn.step()}catch(e){e===Infinity?In=2:e===!1?In=-2:(In=-2,alert(e))}finally{a||(b=!1,In===0&&(In=-1))}}while(b)}}var Mn,Pn=[];
function Qn(){var a=If(Ui),b=Q("capacity");if(a===Infinity)b.style.display="none";else{b.style.display="inline";b.innerHTML="";var c=document.createElement("span");c.className="capacityNumber";c.appendChild(document.createTextNode(Number(a)));a=(a===0?R("Maze.capacity0",!1):a===1?R("Maze.capacity1",!1):R("Maze.capacity2",!1)).split(/%\d/);for(var d=0;d<a.length;d++)b.appendChild(document.createTextNode(a[d])),d!==a.length-1&&b.appendChild(c.cloneNode(!0))}}
function Rn(a){im(a)||(Q("runButton").style.display="inline",Q("resetButton").style.display="none",Ti(null),Dm&&Dm.root.qd(),Fn())}
function Nn(a,b){function c(e){var f=d;a.setProperty(b,e,a.createNativeFunction(function(h){Jn=!0;if(h){var k=h.match(/^block_id_([^']+)$/);k&&(h=k[1])}Ti(h);f()},!1))}var d=function(){Hn("left")};c("turnLeft");d=function(){Hn("right")};c("turnRight");d=function(){Gn("move_forward")};c("moveForward");d=function(){wm.Tr()};c("harvest");d=function(){wm.$s()};c("take");d=function(){wm.xr()};c("drop");d=function(){wm.Bs()};c("openDoor");d=function(){Gn("move_right")};c("moveRight");d=function(){Gn("move_down")};
c("moveDown");d=function(){Gn("move_left")};c("moveLeft");d=function(){Gn("move_up")};c("moveUp")}
(function(a){function b(){window.BlocklyGamesMsg?(window.BlocklyMsg&&(w=window.BlocklyMsg),a()):setTimeout(b,99)}window.addEventListener("load",b)})(function(){function a(){b.style.top=Math.max(10,c.offsetTop-window.pageYOffset)+"px";b.style.left=wk?"10px":"420px";b.style.width=window.innerWidth-440+"px"}tm();document.body.innerHTML=um();document.getElementById("clearButton").addEventListener("click",function(){confirm("Delete all your solutions?")&&(delete window.localStorage[Vl],location.reload())});
$l();var b=Q("blockly"),c=Q("visualization");window.addEventListener("scroll",function(){a(null);dj(Ui)});window.addEventListener("resize",a);a(null);fm();Mf(Ui,vd);ck("moveForward,moveBackward,turnRight,turnLeft,isPathForward,isPathRight,isPathBackward,isPathLeft,moveRight,moveDown,moveLeft,moveUp,harvest,take,drop,openDoor");dm();Mf(Ui,Qn);Dk("runButton",Kn);Dk("resetButton",Rn);Ym();vm=function(){Jn=!1;On()};Fn();nm();om()});
